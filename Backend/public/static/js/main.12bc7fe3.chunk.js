(this.webpackJsonptrello=this.webpackJsonptrello||[]).push([[0],{229:function(e,t){},353:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),s=a.n(n),o=a(19),c=a.n(o),i=a(14),l=a(5),d=a.n(l),u=a(12),p=a(8),b=a(9),m=a(11),h=a(10),g=a(28),j=a(154),v="/api/",f=a.n(j).a.create({withCredentials:!0}),O=function(e,t){return console.log("data",t),C(e,"GET",t)},x=function(e,t){return C(e,"POST",t)},y=function(e,t){return C(e,"PUT",t)},w=function(e,t){return C(e,"DELETE",t)};function C(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(d.a.mark((function e(t){var a,r,n,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"get",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,f({url:"".concat(v).concat(t),method:a,data:r});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={store:function(e,t){sessionStorage[e]=JSON.stringify(t)},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=sessionStorage[e];return a?JSON.parse(a):t},clear:function(){sessionStorage.clear()}};var N="loggedinUser",U={query:function(e){return _.apply(this,arguments)},login:function(e){return A.apply(this,arguments)},logout:function(){return D.apply(this,arguments)},signup:function(e){return B.apply(this,arguments)},loadUser:function(){return I.apply(this,arguments)}};function _(){return(_=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fiter by",t),e.abrupt("return",O("user",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("auth/login",t);case 2:return a=e.sent,e.abrupt("return",M(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.clear(),e.next=3,x("auth/logout");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",M(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.load(N),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return S.store(N,e),e}function L(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.query(e);case 3:r=t.sent,a({type:"SET_USERS",users:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err userAction LOAD users",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function T(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.login(e);case 3:r=t.sent,a({type:"LOGIN",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err userAction LOGIN USER",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var P={query:function(){return O("board")},remove:function(e){return w("board/".concat(e))},save:function(e){return e._id?y("board/".concat(e._id),e):x("board",e)},getBoardById:F,getGroupIdxById:function(e,t){return E.apply(this,arguments)}};function F(e){return O("board/".concat(e))}function E(){return(E=Object(u.a)(d.a.mark((function e(t,a){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return r=e.sent,n=r.groups.findIndex((function(e){return e.id===a})),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("err boardService GET GROUP IDX BY ID",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var R=a(15),G=a(155),H=a.n(G),z=function(){var e;return{setup:function(){e=H()("")},on:function(t,a){e.on(t,a)},off:function(t,a){e.off(t,a)},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}}}();function q(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.getBoardById(e);case 3:r=t.sent,console.log("board from DISPATCH",r),a({type:"SET_BOARD",board:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("err boardAction LOAD BOARD",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function W(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(u.a)(d.a.mark((function a(r){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,P.save(e);case 3:n=a.sent,t||(console.log("ACTIONboard",e),z.emit("render",e)),r({type:e._id?"UPDATE_BOARD":"ADD_BOARD",board:n}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("err boardAction SAVE BOARD",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}window.socketService=z;var J={getRandomInt:V,makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},createTime:function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds(),n=""+(t>12?t-12:t);return n+=(a<10?":0":":")+a,n+=(r<10?":0":":")+r},getDueDate:function(e){var t=new Date(e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate();return"".concat(a," ").concat(r)},convertName:function(e){if(!e)return;var t,a=e.split(" ");t=a[1]?a[0][0].toUpperCase()+a[1][0].toUpperCase():a[0][0].toUpperCase();return t},getTodoProgress:function(e){if(e.checklist){var t=e.checklist.todos,a=t.filter((function(e){return e.isDone}));return{total:t.length,done:a.length}}return},getRandomDarkColor:function(){return["#00adb5","#6a2c70","#b83b5e","#0000FF","#9d83eb","#9a9a9a","#323232"][V(0,7)]},getRandomBrightColor:function(){return["#FFFF00","#FFA500","\t#00FF00","#FF0000","#e16941","#32cd32","#cdcd32"][V(0,7)]},getModalPos:function(e,t){var a=t.width,r=t.height;if(!e)return;var n=window.innerWidth-e.clientX,s=window.innerHeight-e.clientY,o={x:e.clientX,y:e.clientY};o.x<a&&(o.x=10);n<a&&(o.x=window.innerWidth-(a+10));s<r&&(o.y-=r-s);return o}};function V(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var X=a(16),Y=a(4),K=a(395),Q=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:{title:"",imgUrlLarge:"",imgUrlmedium:""},mounted:!1,picked:""},e.onClose=function(){e.setState({mounted:!1})},e.bgColors=function(){return[{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_300/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712052/pexels-pixabay-461940_znnsxj.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_300/v1610712052/pexels-pixabay-461940_znnsxj.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/green-1_rp1fjx.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/green-1_rp1fjx.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/cooldownpink_y0m0db.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/cooldownpink_y0m0db.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/mizu_qlr5uq.png",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/mizu_qlr5uq.png"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/0322_purple_hkmphn.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/v1611084082/0322_purple_hkmphn.jpg"}]},e.setBgcImg=function(t,a,r){console.log("the chosen url is",t),e.setState((function(e){return{board:Object(Y.a)(Object(Y.a)({},e.board),{},{imgUrlLarge:t,imgUrlmedium:a})}})),e.setState({picked:r})},e.onAddBoard=function(t){t.preventDefault();var a=e.state.board,r={title:a.title,style:{backgroundImage:a.imgUrlLarge,backgroundImagePreview:a.imgUrlmedium}};e.props.addBoard(r),e.onClose()},e.handleInput=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{board:Object(Y.a)(Object(Y.a)({},e.board),{},Object(X.a)({},r,n))}}),(function(){return console.log("input title",e.state.board.title)}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.mounted,n=t.picked;return Object(r.jsx)(K.a,{in:a,classNames:"modal",timeout:300,onExited:this.props.toggleAddBoard,children:Object(r.jsxs)("div",{className:"new-board-modal flex column",children:[Object(r.jsxs)("div",{className:"new-board-header flex space-around",children:[Object(r.jsx)("h3",{children:"Create New Board"}),Object(r.jsx)("button",{onClick:this.onClose,children:"\u2715"})]}),Object(r.jsx)("div",{className:"board-cover-colors",children:this.bgColors().map((function(t,a){return Object(r.jsx)("div",{className:n===a?"new-board-color picked":"new-board-color",onClick:function(){return e.setBgcImg(t.imgUrlLarge,t.imgUrlmedium,a)},children:Object(r.jsx)("img",{src:t.imgUrlmedium,alt:""})},a)}))}),Object(r.jsxs)("form",{onSubmit:this.onAddBoard,children:[Object(r.jsx)("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInput,className:"add-board-input",placeholder:"Enter a board title...",autoComplete:"off",required:!0}),Object(r.jsx)("button",{className:"create-board-btn",children:"Create board"})]})]})})}}]),a}(n.Component),Z=a(23),$=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={loggedInUser:null,isAddBoardShow:!1},e.toggleAddBoard=function(){e.setState({isAddBoardShow:!e.state.isAddBoardShow})},e.addBoard=function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.saveBoard(a,!0);case 2:r=e.props.board._id,console.log("newBoardId",r),e.props.history.push("/"),e.props.history.push("board/".concat(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUser();case 2:(t=e.sent)&&this.setState({loggedInUser:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){this.props.loggedInUser!==this.state.loggedInUser&&this.setState({loggedInUser:this.props.loggedInUser})}},{key:"render",value:function(){var e=this.state,t=e.loggedInUser,a=e.isAddBoardShow;return Object(r.jsxs)(r.Fragment,{children:[a&&Object(r.jsx)(Q,{addBoard:this.addBoard,toggleAddBoard:this.toggleAddBoard}),Object(r.jsxs)("header",{className:"app-header flex space-between",children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{className:"header-list flex justify-center",children:[Object(r.jsx)("li",{children:Object(r.jsx)(g.b,{to:"/",className:"home-btn",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625350/home_seebre.png",alt:""})})}),Object(r.jsx)("li",{children:Object(r.jsx)(g.b,{to:"/boards",className:"boards-btn",children:"Boards"})})]})}),Object(r.jsx)("li",{children:Object(r.jsxs)(g.b,{to:"/",className:"header-title",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1611315507/multitask_1_fjrnbt.png",alt:""}),Object(r.jsx)("h2",{children:"TasKooler"})]})}),Object(r.jsxs)("div",{className:"header-right flex",children:[Object(r.jsx)("button",{className:"header-add-board-btn",onClick:this.toggleAddBoard,children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png",alt:""})}),t&&Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)("div",{className:"header-user-logged-in",style:{backgroundImage:"url(".concat(t.imgUrl?t.imgUrl:"#3f72af",")")}})," ",Object(r.jsx)("button",{className:"header-log-board-btn",onClick:this.props.logout,children:" Logout"})]}),!t&&Object(r.jsxs)(r.Fragment,{children:["  ",Object(r.jsxs)("div",{className:"header-user-logged-in",children:["G "," "]})," ",Object(r.jsx)("button",{className:"header-log-board-btn",children:Object(r.jsx)(g.b,{to:"/login",children:"Login"})})]})]})]})]})}}]),a}(n.Component),ee={logout:function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.logout();case 3:t({type:"LOGOUT"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("err userAction LOGOUT USER",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},loadUser:function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.loadUser(e);case 3:r=t.sent,a({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err userAction LOAD USER",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},saveBoard:W},te=Object(i.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,board:e.boardModule.currBoard}}),ee)(Object(Z.f)($));function ae(){var e;return Object(r.jsxs)("main",{className:"home-container",children:[Object(r.jsx)("div",{className:"home-img"}),Object(r.jsxs)("div",{className:"text-container flex column",children:[Object(r.jsx)("h1",{className:"h1-main-header",children:"Welcome to TasKooler"}),Object(r.jsx)("h3",{className:"h3-secondary-header",children:"TasKooler enables you and your team to organize and prioritize all your projects in a fun, flexible way."}),Object(r.jsx)(g.b,(e={to:"/boards",className:"boards-btn"},Object(X.a)(e,"className","get-started-btn"),Object(X.a)(e,"children","GET STARTED!"),e))]})]})}function re(e){var t=e.board;return Object(r.jsx)(g.b,{style:{width:"280px"},to:"/board/".concat(t._id),children:Object(r.jsx)("div",{style:{backgroundImage:"url(".concat(t.style.backgroundImagePreview,")"),backgroundColor:"#6DB3F2",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},className:"board-preview",children:Object(r.jsx)("h1",{children:t.title})})})}var ne=a(27),se=a.n(ne),oe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddBoardShown:!1},e.toggleAddBoard=function(){e.setState({isAddBoardShown:!e.state.isAddBoardShown})},e.addBoard=function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.saveBoard(a,!0);case 2:r=e.props.board._id,console.log("newBoardId",r),e.props.history.push("board/".concat(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){var e=this.props.boards;if(!e)return Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})});var t=this.state.isAddBoardShown;return Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)(Q,{addBoard:this.addBoard,toggleAddBoard:this.toggleAddBoard}),Object(r.jsxs)("div",{className:"boards-page",children:[Object(r.jsx)("h2",{children:"Our Boards"}),Object(r.jsxs)("section",{className:"boards-container",children:[Object(r.jsx)("div",{className:"new-board",onClick:this.toggleAddBoard,children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png",alt:""})}),e.map((function(e){return Object(r.jsx)(re,{board:e},e._id)}))]})]})]})}}]),a}(n.Component),ce={loadBoards:function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.query();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err boardAction LOAD BOARDS",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},saveBoard:W},ie=Object(i.b)((function(e){return{boards:e.boardModule.boards,board:e.boardModule.currBoard}}),ce)(oe),le=a(44),de=a(384),ue=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={mounted:!1,filterBy:{fullname:""}},e.onClose=function(){e.setState({mounted:!1})},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{filterBy:Object(Y.a)(Object(Y.a)({},e.filterBy),{},Object(X.a)({},r,n))}}),(function(){e.props.onSetUserFilter(e.state.filterBy)}))},e.onToggleUser=function(t){e.props.onUpdateMembers(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.members,s=this.state,o=s.filterBy,c=s.mounted;return Object(r.jsx)(K.a,{in:c,classNames:"modal",timeout:300,onExited:this.props.toggleMembers,children:Object(r.jsxs)("div",{className:"members-container header-members",style:this.props.modalChangePos?{position:"fixed",top:this.props.modalChangePos.y,left:this.props.modalChangePos.x}:null,children:[Object(r.jsxs)("div",{className:"add-member-header flex spase-between",children:[Object(r.jsx)("h3",{children:"Members"}),Object(r.jsx)("button",{onClick:this.onClose,className:"member-close-btn",children:"\u2715"})]}),Object(r.jsx)(de.a,{className:"member-filter",type:"text",name:"fullname",value:o.fullname,onChange:this.handleChange,placeholder:"Search members...",autoComplete:"off"}),Object(r.jsx)("div",{className:"new-member-list flex column",children:a.map((function(t){return Object(r.jsxs)("div",{className:"member-items flex space-between",onClick:function(){return e.onToggleUser(t)},children:[Object(r.jsxs)("div",{className:"flex space-between",children:[Object(r.jsx)("div",{className:"member-item",style:{backgroundImage:"url(".concat(t.imgUrl?t.imgUrl:"#3f72af",")")}}),Object(r.jsx)("p",{children:t.fullname})]}),Object(r.jsx)("button",{className:n.findIndex((function(e){return e._id===t._id}))>-1?"checked-member":"unchecked-member",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610900476/checked_etlnj9.png",alt:""})})]},t._id)}))})]})})}}]),a}(n.Component),pe=Object(i.b)((function(e){return{}}),{})(ue),be=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).bgColors=function(){return[{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731294/blue_icz7cd.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731552/yellow_acyunw.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731568/yellow2_gakpte.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731599/green-1_h78uob.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731662/green-2_ura9cy.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731705/red-1_mrdvf7.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731707/red-2_vo74ot.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731757/gray-1_rpkrjg.png"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731759/gray-2_shnjdu.jpg"},{imgUrl:"https://res.cloudinary.com/dxh5keaol/image/upload/v1610731294/blue_icz7cd.jpg"}]},e.getImgForBgc=function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.props.currBoard).style.backgroundImage=a,t.next=4,e.props.saveBoard(r);case 4:e.props.toggleMenu();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"board-colors flex justify-center",children:this.bgColors().map((function(t,a){return Object(r.jsx)("div",{className:"menu-img-box",children:Object(r.jsx)("img",{className:"board-colors-grid",onClick:function(){return e.getImgForBgc(t.imgUrl)},src:t.imgUrl,alt:"not good"})},a)}))})}}]),a}(n.Component),me={saveBoard:W},he=Object(i.b)((function(e){return{currBoard:e.boardModule.currBoard}}),me)(be),ge=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).photos=function(){return[{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611385391/sq-92babc9a34c3443f8a5049859caf4799_cwfiw3.webp",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611385391/sq-92babc9a34c3443f8a5049859caf4799_cwfiw3.webp",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611385391/sq-92babc9a34c3443f8a5049859caf4799_cwfiw3.webp"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/v1611388221/ak5cUXibbvJDtkYeDGv6.width-1280_wwbrjj.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/v1611388221/ak5cUXibbvJDtkYeDGv6.width-1280_wwbrjj.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/v1611388221/ak5cUXibbvJDtkYeDGv6.width-1280_wwbrjj.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611500194/pexels-asad-photo-maldives-1450360_jyudu1.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611500194/pexels-asad-photo-maldives-1450360_jyudu1.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611500194/pexels-asad-photo-maldives-1450360_jyudu1.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611500182/pexels-julius-silver-753325_gnne5q.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611500182/pexels-julius-silver-753325_gnne5q.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611500182/pexels-julius-silver-753325_gnne5q.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611500178/pexels-baskin-creative-studios-1766838_au2rj4.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611500178/pexels-baskin-creative-studios-1766838_au2rj4.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611500178/pexels-baskin-creative-studios-1766838_au2rj4.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611500175/pexels-fabian-reitmeier-707915_xjs29p.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611500175/pexels-fabian-reitmeier-707915_xjs29p.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611500175/pexels-fabian-reitmeier-707915_xjs29p.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712052/pexels-pixabay-461940_znnsxj.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712052/pexels-pixabay-461940_znnsxj.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712052/pexels-pixabay-461940_znnsxj.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063807/pexels-pixabay-33545_zzzi4o.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063807/pexels-pixabay-33545_zzzi4o.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063807/pexels-pixabay-33545_zzzi4o.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611328466/pexels-asad-photo-maldives-1024967_pnt6jt.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611328466/pexels-asad-photo-maldives-1024967_pnt6jt.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611328466/pexels-asad-photo-maldives-1024967_pnt6jt.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611328467/pexels-fabian-wiktor-994605_vi6pck.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400v1611328467/pexels-fabian-wiktor-994605_vi6pck.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611328467/pexels-fabian-wiktor-994605_vi6pck.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063800/pexels-steve-397857_n8hqga.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063800/pexels-steve-397857_n8hqga.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063800/pexels-steve-397857_n8hqga.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063805/pexels-roberto-shumski-1903702_vtanbj.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063805/pexels-roberto-shumski-1903702_vtanbj",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063805/pexels-roberto-shumski-1903702_vtanbj"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712046/pexels-pixabay-2150_mujmra.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712046/pexels-pixabay-2150_mujmra.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712046/pexels-pixabay-2150_mujmra.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063801/pexels-pixabay-302769_elwsut.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063801/pexels-pixabay-302769_elwsut.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063801/pexels-pixabay-302769_elwsut.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712052/pexels-rakicevic-nenad-769525_axqkwd.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712052/pexels-rakicevic-nenad-769525_axqkwd.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712052/pexels-rakicevic-nenad-769525_axqkwd.jpg"},{imgUrlLarge:"https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712045/pexels-roberto-nickson-2559941_cguwhp.jpg",imgUrlmedium:"https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712045/pexels-roberto-nickson-2559941_cguwhp.jpg",imgUrlSmall:"https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712045/pexels-roberto-nickson-2559941_cguwhp.jpg"}]},e.useImgForBgc=function(){var t=Object(u.a)(d.a.mark((function t(a,r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.props.currBoard).style.backgroundImage=a,n.style.backgroundImagePreview=r,t.next=5,e.props.saveBoard(n);case 5:e.props.toggleMenu();case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"board-photos flex justify-center",children:this.photos().map((function(t,a){return Object(r.jsx)("div",{className:"menu-img-box",children:Object(r.jsx)("img",{onClick:function(){return e.useImgForBgc(t.imgUrlLarge,t.imgUrlmedium)},className:"board-photos-img",src:t.imgUrlSmall,alt:"not good"})},a)}))})}}]),a}(n.Component),je={saveBoard:W},ve=Object(i.b)((function(e){return{currBoard:e.boardModule.currBoard}}),je)(ge),fe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={bgcFrom:null},e.chooseBgcFrom=function(t){e.setState({bgcFrom:t})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onChangeBackground,n=t.toggleMenu,s=this.state.bgcFrom;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"change-bgc-back",children:Object(r.jsx)("button",{onClick:a,children:"back"})}),Object(r.jsxs)("div",{className:"change-bgc flex justify-center",children:[!s&&Object(r.jsxs)("div",{className:"flex align-center",children:[Object(r.jsxs)("div",{className:"flex column align-center",children:[Object(r.jsx)("div",{onClick:function(){return e.chooseBgcFrom("Photos")},className:"photos-btn"}),Object(r.jsx)("span",{children:"Photos"})]}),Object(r.jsxs)("div",{className:"flex column align-center",children:[Object(r.jsx)("div",{onClick:function(){return e.chooseBgcFrom("Colors")},className:"colors-menu-btn"}),Object(r.jsx)("span",{children:"Colors"})]})]}),"Photos"===s&&Object(r.jsx)(ve,{toggleMenu:n}),"Colors"===s&&Object(r.jsx)(he,{toggleMenu:n})]})]})}}]),a}(n.Component),Oe=a(86),xe=a.n(Oe),ye=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.toggleMenu,a=e.mainRef,n=e.onChangeBackground,s=e.isChanging,o=e.board;return Object(r.jsx)("div",{className:"board-menu-screen flex justify-center",onClick:function(e){return e.stopPropagation()},ref:a,style:{opacity:"0",visibility:"hidden",width:0},children:Object(r.jsxs)("section",{className:"menu-container",children:[Object(r.jsxs)("div",{className:"board-menu-header flex space-around",children:[Object(r.jsx)("h3",{className:"board-menu-title",children:"Menu"}),Object(r.jsx)("h4",{className:"board-menu-close",onClick:t,children:"\u2715"})]}),!s&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"bgc-change flex align-center",children:Object(r.jsx)("button",{onClick:n,children:"Change Background"})}),Object(r.jsxs)("div",{className:"side-activity-title",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{className:"desc-img",src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/left-align_qaakok.png",alt:""})}),Object(r.jsx)("p",{children:" Activity"})]}),Object(r.jsx)("section",{className:"activities-wrapper",children:o.activities&&o.activities.map((function(e,t){var a,n,s,o,c;return Object(r.jsxs)("div",{className:"activity-comment-wrapper flex",children:[Object(r.jsx)("div",{className:"member",style:{backgroundImage:"url(".concat((null===(a=e.byMember)||void 0===a?void 0:a.imgUrl)?null===(n=e.byMember)||void 0===n?void 0:n.imgUrl:"#3f72af",")")},children:(null===(s=e.byMember)||void 0===s?void 0:s.imgUrl)?"":"G"}),Object(r.jsxs)("div",{className:"activity-comment",children:[!e.toGroup&&Object(r.jsxs)("p",{children:[e.byMember?e.byMember.fullname:"Guest",": ",e.txt,null===(o=e.card)||void 0===o?void 0:o.title," ",null===(c=e.group)||void 0===c?void 0:c.title]}),e.toGroup&&Object(r.jsxs)("p",{children:[e.byMember?e.byMember.fullname:"Guest",": ",e.txt,"from ",e.group.title," to ",e.toGroup.title]}),Object(r.jsx)(xe.a,{className:"activity-time",date:e.createdAt})]})]},t)}))})]}),s&&Object(r.jsx)(fe,{toggleMenu:t,onChangeBackground:n})]})})}}]),a}(n.Component),we=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(ye),Ce=a(397),ke=(n.Component,function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={board:{title:""},isChanging:!1,isWrapper:!1,isMoreMembersShown:!1,filterUserBy:{fullname:""}},e.toggleMenu=function(){var t=e.boardMenuVisibility.current;"0"===t.style.opacity?(t.style.opacity="1",t.style.visibility="visible",t.style.width="339px"):"1"===t.style.opacity&&(t.style.opacity="0",t.style.visibility="hidden",t.style.width="0"),e.setState({isChanging:!1,isWrapper:!e.state.isWrapper})},e.onChangeBackground=function(){e.setState({isChanging:!e.state.isChanging})},e.boardMenuVisibility=s.a.createRef(),e.handleInput=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{board:Object(Y.a)(Object(Y.a)({},e.board),{},Object(X.a)({},r,n))}}))},e.onSaveTitle=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=e.props.board,n=e.state.board.title,r.title=n,t.next=6,e.props.saveBoard(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleMembers=function(){e.setState({isMoreMembersShown:!e.state.isMoreMembersShown})},e.onUpdateMembers=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.board,(n=r.members.findIndex((function(e){return e._id===a._id})))>-1?r.members.splice(n,1):r.members.push(a),t.next=5,e.props.saveBoard(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSetUserFilter=function(t){e.setState({filterUserBy:t},(function(){return e.props.setUserFilter(e.state.filterUserBy)})),e.props.loadUsers(e.props.filterUserBy)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.loadUsers(this.props.filterUserBy),this.setState({board:{title:this.props.board.title}})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.board.title!==e.board.title&&this.setState((function(e){return{board:Object(Y.a)(Object(Y.a)({},e.board),{},{title:t.props.board.title})}}))}},{key:"render",value:function(){var e=this.props,t=e.members,a=e.users,n=this.state,s=n.board,o=n.isChanging,c=n.isWrapper,i=n.isMoreMembersShown,l=this.props.board._id;return s||l?Object(r.jsxs)(r.Fragment,{children:[i&&Object(r.jsx)("div",{className:"board-header-member-box",children:Object(r.jsx)(pe,{toggleMembers:this.toggleMembers,onUpdateMembers:this.onUpdateMembers,onSetUserFilter:this.onSetUserFilter,members:t,users:a})}),Object(r.jsxs)("header",{className:"board-header flex space-between",children:[Object(r.jsxs)("div",{className:"header-options flex",children:[Object(r.jsx)("form",{onSubmit:this.onSaveTitle,onBlur:this.onSaveTitle,className:"board-title-form flex space-between",children:Object(r.jsx)("input",{type:"text",name:"title",value:s.title,onChange:this.handleInput,className:"board-title-input",placeholder:"Enter board title...",autoComplete:"off"})}),Object(r.jsx)(g.b,{to:"/board/".concat(l,"/dashboard"),children:Object(r.jsxs)("button",{className:"board-header-btn flex space-around",children:[Object(r.jsx)("h3",{children:"Statistics"}),Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610626728/pie-chart_fnvwct.png",alt:""})]})}),Object(r.jsxs)("div",{className:"header-members flex",children:[Object(r.jsx)("ul",{className:"member-list flex",children:Object(r.jsx)(Ce.a,{className:"members-list flex",children:t.map((function(e,t){return Object(r.jsx)(K.a,{timeout:500,classNames:"item",children:Object(r.jsx)("li",{className:"header-member",style:{backgroundImage:"url(".concat(e.imgUrl?e.imgUrl:"#3f72af",")")}},e.fullname)},t)}))})}),Object(r.jsx)("button",{className:"add-member",onClick:this.toggleMembers,children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625640/add-user_qxgidw.png",alt:""})})]})]}),Object(r.jsx)(we,{toggleMenu:this.toggleMenu,mainRef:this.boardMenuVisibility,onChangeBackground:this.onChangeBackground,isChanging:o}),c&&Object(r.jsx)("div",{className:"board-menu-wrapper",onClick:c?this.toggleMenu:function(){}}),Object(r.jsx)("button",{className:"menu-btn",onClick:this.toggleMenu,children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610637597/menu_btis53.png",alt:""})})]})]}):Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})})}}]),a}(n.Component)),Se={saveBoard:W,loadUsers:L,setUserFilter:function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}}},Ne=Object(i.b)((function(e){return{board:e.boardModule.currBoard,users:e.userModule.users,filterUserBy:e.userModule.filterBy}}),Se)(ke),Ue=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddOpen:!1,group:{title:""}},e.openInput=function(){e.setState({isAddOpen:!0})},e.closeInput=function(){e.setState({isAddOpen:!1})},e.onSaveGroup=function(t){t.preventDefault();var a={title:e.state.group.title,id:J.makeId(),cards:[]};e.props.onAddGroup(a),e.setState({group:{title:""},isAddOpen:!1},(function(){return e.props.onScroll(null,280)}))},e.handleInput=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{group:Object(Y.a)(Object(Y.a)({},e.group),{},Object(X.a)({},r,n))}}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isAddOpen,a=e.group;return Object(r.jsxs)("section",{className:"add-group-container",children:[t&&Object(r.jsxs)("form",{onSubmit:this.onSaveGroup,className:"new-group-form",children:[Object(r.jsx)("input",{type:"text",name:"title",value:a.title,onChange:this.handleInput,className:"my-input",placeholder:"Enter List title...",autoFocus:!0,autoComplete:"off"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"submit-group-btn",children:"Add List"}),Object(r.jsx)("button",{onClick:this.closeInput,className:"close-input-btn",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610646476/close_voj9v3.png",alt:""})})]})]}),!t&&Object(r.jsxs)("button",{className:"add-group-btn",onClick:this.openInput,children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png",alt:""}),Object(r.jsx)("span",{children:"Add another List"})]})]})}}]),a}(n.Component);var _e={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function Ae(e){return function(t){try{t({type:"SET_GROUP",group:e})}catch(a){console.log("err cardAction SET GROUP",a)}}}var De=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isLableTitleShown:!1},e.toggleLableTitle=function(t){t.stopPropagation(),e.setState({isLableTitleShown:!e.state.isLableTitleShown})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.card,a=this.state.isLableTitleShown;return Object(r.jsx)("div",{children:t.labels&&Object(r.jsx)("div",{className:"label-container flex",children:t.labels.map((function(t){return Object(r.jsx)("div",{style:{backgroundColor:t.color},className:a?"card-label open":"card-label",onClick:e.toggleLableTitle,children:a&&t.title},t.id)}))})})}}]),a}(n.Component);function Be(e){var t=e.card,a=J.getTodoProgress(t);return Object(r.jsxs)("div",{className:"card-extras-container flex space-between",children:[t.dueDate&&Object(r.jsxs)("div",{className:t.dueDate<Date.now()?"dueDate-container red flex":"dueDate-container flex",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png",alt:""}),Object(r.jsx)("p",{className:"dueDate",children:J.getDueDate(t.dueDate)})]}),t.comments&&Object(r.jsxs)("div",{className:"comments-container flex",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610704026/messenger_ypya0t.png",alt:""}),Object(r.jsx)("p",{className:"comments",children:t.comments.length})]}),t.checklist&&Object(r.jsxs)("div",{className:a.done===a.total?"check-list-container complete flex":"chec-klist-container flex",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/check-box_pzd2ul.png",alt:""}),Object(r.jsxs)("p",{className:"chec-klist",children:[a.done,"/",a.total]})]}),t.members&&Object(r.jsx)("div",{className:"preview-members-container flex",children:t.members.map((function(e){return Object(r.jsx)("div",{className:"member",style:{backgroundImage:"url(".concat(e.imgUrl?e.imgUrl:"#3f72af",")")}},e.fullname)}))})]})}var Ie=a(87),Me=a.n(Ie),Le=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onShowCard=function(t,a){e.props.setCard(t),e.props.setGroup(a),_e.emit("show-details",!0)},e.showPreviewDetails=function(t,a,r){var n={ev:t,newClientPos:J.getModalPos(t,{width:420,height:210})};e.props.setCard(a),e.props.setGroup(r),t.stopPropagation(),_e.emit("show-preview-details",n,!0)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.index,s=t.group;return Object(r.jsx)("div",{className:"card-preview",onClick:function(){return e.onShowCard(a,s)},children:Object(r.jsx)(le.b,{draggableId:a.id,index:n,children:function(t,n){return Object(r.jsx)(Me.a,{style:t.draggableProps.style,snapshot:n,children:function(o){return Object(r.jsxs)("article",Object(Y.a)(Object(Y.a)(Object(Y.a)({className:"card-preview",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:Te(n.isDragging,t.draggableProps.style,o,n.isDraggingOver),children:[Object(r.jsx)("button",{className:"show-preview-details-btn",onClick:function(t){return e.showPreviewDetails(t,a,s)},children:Object(r.jsx)("img",{className:"show-preview-details-pen",src:"https://res.cloudinary.com/basimgs/image/upload/v1610873061/pen_lgmg47.png",alt:"pen"})}),a.style&&(a.style.imgUrl?Object(r.jsx)("div",{className:"card-img-cover",children:Object(r.jsx)("img",{src:a.style.imgUrl,alt:""})}):Object(r.jsx)("div",{className:"card-color-cover",style:{backgroundColor:a.style.color}})),Object(r.jsxs)("div",{className:"lower-card",children:[Object(r.jsx)(De,{card:a}),Object(r.jsx)("div",{className:"flex space-between",children:Object(r.jsx)("pre",{children:a.title})}),Object(r.jsx)(Be,{card:a})]})]}))}})}},a.id)})}}]),a}(n.Component),Te=function(e,t,a,r){return Object(Y.a)(Object(Y.a)({userSelect:"none",padding:"0",margin:"0 4px 8px 3px",borderRadius:"3px",background:e?"##e4e0e0":"white",boxShadow:"0 1px 0 rgba(9, 30, 66, 0.25)"},t),a)},Pe={setCard:function(e){return function(t){try{t({type:"SET_CARD",card:e})}catch(a){console.log("err cardAction SET CARD",a)}}},setGroup:Ae},Fe=Object(i.b)((function(e){return{currCard:e.cardModule.currCard}}),Pe)(Le),Ee=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={card:{title:""},isAddOpen:!1,groupId:null},e.openCardAdd=function(t){var a=t.isAddOpen,r=t.groupId;e.props.groupId===r&&e.setState({isAddOpen:a,groupId:r})},e.handleInput=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},Object(X.a)({},r,n))}}))},e.closeInput=function(){e.setState({isAddOpen:!1,card:{title:""}},(function(){_e.emit("close-card-add",!1,e.state.groupId),setTimeout((function(){e.props.onScroll(null,1e3)}),150)}))},e.onSaveCard=function(t){if(t.preventDefault(),e.state.card.title){var a={title:e.state.card.title,id:J.makeId(),members:[],labels:[]};e.props.onAddCard(a,e.props.groupId),e.closeInput()}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.eventBusTerminate=_e.on("open-card-add",this.openCardAdd)}},{key:"componentWillUnmount",value:function(){this.eventBusTerminate()}},{key:"render",value:function(){var e=this.state,t=e.isAddOpen,a=e.card;return Object(r.jsx)("div",{className:"add-card-container",children:t&&Object(r.jsxs)("form",{onSubmit:this.onSaveCard,className:"new-card-form",children:[Object(r.jsx)("textarea",{type:"text",name:"title",value:a.title,onChange:this.handleInput,className:"my-input",placeholder:"Enter a card title...",autoFocus:!0,required:!0,cols:"35",rows:"4"}),Object(r.jsxs)("div",{className:"flex",style:{marginTop:5},children:[Object(r.jsx)("button",{className:"submit-card-btn",children:"Add card"}),Object(r.jsx)("button",{onMouseDown:this.closeInput,className:"close-input-btn",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610646476/close_voj9v3.png",alt:""})})]})]})})}}]),a}(n.Component),Re=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={scrollTop:0},e.getListStyle=function(e){return{paddingTop:1,paddingBottom:5,paddingLeft:5,position:"relative"}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cards,n=t.id,s=t.groupTitle,o=t.group,c=t.onAddCard;return a?Object(r.jsxs)("div",{className:"card-list",ref:this.props.refs,onScroll:this.props.onScroll,children:[Object(r.jsx)(le.c,{droppableId:o.id,type:"card",children:function(t,c){return Object(r.jsxs)("div",Object(Y.a)(Object(Y.a)({ref:t.innerRef,style:e.getListStyle(c.isDraggingOver)},t.droppableProps),{},{children:[a.map((function(e,t){return Object(r.jsx)(Fe,{card:e,group:o,index:t,groupId:n,groupTitle:s},e.id)})),t.placeholder]}))}}),Object(r.jsx)(Ee,{onAddCard:c,groupId:o.id,onScroll:this.props.onScroll})]}):Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})})}}]),a}(n.Component),Ge=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={groupIdx:null,group:{title:""},isTitleShown:!1},e.textInput=s.a.createRef(),e.handleInput=function(t){var a=t.target,r=a.name,n=a.value;console.log("target.value",n,r),e.setState((function(e){return{group:Object(Y.a)(Object(Y.a)({},e.group),{},Object(X.a)({},r,n))}}))},e.onSaveTitle=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n,s,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=e.props.group.id,n=Object(Y.a)({},e.props.board),s=e.state.group.title,o=n.groups.findIndex((function(e){return e.id===r})),n.groups[o].title=s,t.next=8,e.props.updateBoard(n);case 8:e.setState({groupIdx:null,isTitleShown:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showGroupMenu=function(t){var a=e.props.group;e.props.setGroup(a),t.stopPropagation(),_e.emit("show-group-menu",t,!0)},e.showInput=function(){e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isTitleShown:!0})}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.group.id,t=this.props,a=t.board,r=t.group,n=a.groups.findIndex((function(t){return t.id===e}));this.setState({groupIdx:n,group:{title:r.title}})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.group.title!==e.group.title&&this.setState((function(e){return{group:Object(Y.a)(Object(Y.a)({},e.group),{},{title:t.props.group.title})}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.group,n=t.isTitleShown;return Object(r.jsx)("section",Object(Y.a)(Object(Y.a)({className:"group-title"},this.props.dragHandle),{},{children:Object(r.jsxs)("form",Object(Y.a)(Object(Y.a)({onSubmit:this.onSaveTitle,ref:this.textInput},this.props.dragHandle),{},{className:"title-form flex space-between",children:[!n&&Object(r.jsx)("h3",{style:{width:"100%"},className:"title-input title",onClick:this.showInput,children:a.title}),n&&Object(r.jsx)("input",{type:"text",name:"title",style:{width:"90%",fontFamily:"montserrat",fontWeight:600,fontSize:"1rem",paddingTop:10,paddingBottom:10},autoFocus:!0,value:a.title,onChange:this.handleInput,className:"title-input",placeholder:"Enter List title...",autoComplete:"off",onBlur:this.onSaveTitle}),Object(r.jsx)("button",{className:"more-options-btn",onClick:function(t){return e.showGroupMenu(t)},children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/more_e8mezf.png",alt:""})})]}))}))}}]),a}(n.Component),He={loadBoard:q,saveBoard:W,setGroup:Ae},ze=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),He)(Ge),qe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddOpen:!1},e.openInput=function(){e.setState({isAddOpen:!0},(function(){e.props.onScroll(null,1e3),_e.emit("open-card-add",{isAddOpen:!0,groupId:e.props.groupId})}))},e.closeInput=function(t){var a=t.groupId;e.setState({isAddOpen:!1},(function(){return setTimeout((function(){e.props.groupId===a&&e.props.onScroll(null,1e3)}),150)}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.eventBusTerminate=_e.on("close-card-add",this.closeInput)}},{key:"componentWillUnmount",value:function(){this.eventBusTerminate()}},{key:"render",value:function(){var e=this.state.isAddOpen;return Object(r.jsx)("section",{className:"add-card-container",children:!e&&Object(r.jsxs)("button",{className:"add-card-btn",onClick:this.openInput,children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png",alt:""}),Object(r.jsx)("span",{children:"Add another card"})]})})}}]),a}(n.Component),We=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={scrollTop:0},e.refCard=s.a.createRef(),e.onScroll=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a){var r=e.refCard.current.scrollTop;e.setState({scrollTop:r},(function(){a&&(e.refCard.current.scrollTop=e.refCard.current.scrollTop+a)}))}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.group,n=t.idx,s=t.onAddCard,o=t.updateBoard;return Object(r.jsx)(le.b,{draggableId:a.id,index:n,children:function(t,c){return Object(r.jsx)(Me.a,{style:t.draggableProps.style,snapshot:c,children:function(i){return Object(r.jsxs)("article",Object(Y.a)(Object(Y.a)({className:"group-preview"},t.draggableProps),{},{style:Je(c.isDragging,t.draggableProps.style,i),ref:t.innerRef,children:[Object(r.jsx)("div",Object(Y.a)(Object(Y.a)({},t.dragHandleProps),{},{style:{width:272,outline:"none"}})),Object(r.jsx)(ze,{updateBoard:o,group:a,dragHandle:t.dragHandleProps}),Object(r.jsx)(Re,{refs:e.refCard,cards:a.cards,id:n,group:a,onScroll:e.onScroll,grpTitle:a.title,groupId:a.id,onAddCard:s}),Object(r.jsx)(qe,{groupId:a.id,onScroll:e.onScroll})]}))}})}})}}]),a}(n.Component),Je=function(e,t,a){return Object(Y.a)(Object(Y.a)({margin:"0 8px 0 0"},t),a)};function Ve(e){var t=e.groups,a=e.onAddCard,n=e.onAddGroup,s=e.onScroll,o=e.updateBoard;return Object(r.jsxs)("div",{className:"group-list",children:[t.map((function(e,t){return Object(r.jsx)(We,{updateBoard:o,group:e,idx:t,onAddCard:a},e.id)})),Object(r.jsx)(Ue,{onAddGroup:n,onScroll:s})]})}var Xe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={group:null,userClicked:null,mounted:!1},e.onClose=function(){e.setState({mounted:!1})},e.onRemoveGroup=function(){var t=Object(Y.a)({},e.props.board),a=e.state.group,r=t.groups.findIndex((function(e){return e.id===a.id}));t.groups.splice(r,1),e.props.saveBoard(t),e.onClose()},e.onAddCard=function(){console.log("not working yet")},e.onCopyGroup=Object(u.a)(d.a.mark((function t(){var a,r,n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(Y.a)({},e.props.board),r=e.state.group,n=a.groups.findIndex((function(e){return e.id===r.id})),s=Object(Y.a)(Object(Y.a)({},r),{},{id:J.makeId()}),a.groups.splice(n,0,s),t.next=7,e.props.saveBoard(a);case 7:e.onClose();case 8:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e;this.setState({group:this.props.group,userClicked:null===(e=this.props)||void 0===e?void 0:e.userClicked,mounted:!0})}},{key:"componentWillUnmount",value:function(){this.setState({group:null,userClicked:null})}},{key:"render",value:function(){var e=this.state,t=e.userClicked,a=e.group,n=e.mounted;return a?Object(r.jsx)(K.a,{in:n,classNames:"modal",timeout:300,onExited:this.props.showGroupMenu,children:Object(r.jsxs)("div",{className:"group-menu flex column",style:{position:"absolute",zIndex:1e3,top:(null===t||void 0===t?void 0:t.y)+10,left:(null===t||void 0===t?void 0:t.x)-150},children:[Object(r.jsxs)("div",{className:"group-actions flex spase-between",children:[Object(r.jsx)("h3",{children:"List Actions"}),Object(r.jsx)("button",{onClick:this.onClose,className:"group-close-btn",children:"\u2715"})]}),Object(r.jsxs)("div",{className:"group-menu-btns flex column",children:[Object(r.jsx)("button",{className:"group-menu-btn",onClick:this.onAddCard,children:"Add Card..."}),Object(r.jsx)("button",{className:"group-menu-btn",onClick:this.onCopyGroup,children:"Copy List..."}),Object(r.jsx)("button",{className:"group-menu-btn",onClick:this.onRemoveGroup,children:"Delete List..."}),Object(r.jsx)("button",{className:"group-menu-btn",children:"Watch..."}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{className:"group-menu-btn",children:"Sort By..."}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{className:"group-menu-btn",children:"Move All Cards In This List..."}),Object(r.jsx)("button",{className:"group-menu-btn",children:"Archive All Cards in this List..."})]})]})}):Object(r.jsx)("div",{children:"Loading..."})}}]),a}(n.Component),Ye={saveBoard:W},Ke=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Ye)(Xe);function Qe(e){var t=e.card,a=e.onHandleInputChange,n=e.group;return Object(r.jsxs)("div",{className:"card-header",children:[Object(r.jsxs)("div",{className:"card-title-area flex",children:[Object(r.jsx)("img",{className:"card-title-img",src:"https://res.cloudinary.com/basimgs/image/upload/v1610782307/document-header_xtqrpy.png",alt:""}),Object(r.jsx)("textarea",{className:"title-textarea my-input",type:"text",name:"title",value:t.title,onChange:a,placeholder:t.title,spellCheck:"false"})]}),Object(r.jsxs)("p",{className:"card-title-p",children:["In list ",n.title]})]})}var Ze=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={comments:null,isSaveOpen:!1,newComment:""},e.onHandleCommentChange=function(t){var a=t.target.value;a?e.onToggleIsSaveOpen(!0):e.onToggleIsSaveOpen(!1),e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{newComment:a})}))},e.onToggleIsSaveOpen=function(t){e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isSaveOpen:t})}))},e.createComment=function(){var t=e.state.newComment,a=e.props.loggedInUser,r=null;return a&&(r={_id:a._id,fullname:a.fullname,imgUrl:a.imgUrl,color:a.color}),{id:J.makeId(),txt:t,createdAt:Date.now(),byMember:r}},e.onSaveNewComment=function(){var t=e.createComment(),a=e.state.comments;a?a.unshift(t):a=new Array(t),e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{comments:a})}),(function(){e.props.onHandleActivitiesChange(e.state.comments),e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{newComment:"",isSaveOpen:!1})}))}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.comments;this.setState({comments:e})}},{key:"render",value:function(){var e=this.state,t=e.newComment,a=e.isSaveOpen,n=e.comments,s=this.props.loggedInUser;return Object(r.jsxs)("div",{className:"activity-container",children:[Object(r.jsxs)("div",{className:"activity-header flex",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1611394931/list_fd3uv1.png",alt:""}),Object(r.jsx)("h3",{children:"Activity"})]}),Object(r.jsxs)("div",{className:"flex column",children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("div",{className:"member",style:{backgroundImage:"url(".concat((null===s||void 0===s?void 0:s.imgUrl)?null===s||void 0===s?void 0:s.imgUrl:"#3f72af",")")},children:(null===s||void 0===s?void 0:s.imgUrl)?"":"G"}),Object(r.jsx)("textarea",{className:"activity-textarea",type:"text",name:"txt",value:t,onChange:this.onHandleCommentChange,placeholder:"Write a comment..."})]}),a&&Object(r.jsx)("button",{className:"save-btn",onMouseDown:this.onSaveNewComment,children:"Save"})]}),n&&n.map((function(e,t){var a,n,s;return Object(r.jsxs)("div",{className:"activity-comment-wrapper flex",children:[Object(r.jsx)("div",{className:"member",style:{backgroundImage:"url(".concat((null===(a=e.byMember)||void 0===a?void 0:a.imgUrl)?null===(n=e.byMember)||void 0===n?void 0:n.imgUrl:"#3f72af",")")},children:(null===(s=e.byMember)||void 0===s?void 0:s.imgUrl)?"":"G"}),Object(r.jsxs)("div",{className:"activity-comment",children:[Object(r.jsxs)("p",{children:[e.byMember?e.byMember.fullname:"Guest",": ",e.txt]}),Object(r.jsx)(xe.a,{className:"activity-time",date:e.createdAt})]})]},t)}))]})}}]),a}(n.Component),$e=Object(i.b)((function(e){return{board:e.boardModule.currBoard,loggedInUser:e.userModule.loggedInUser}}),{})(Ze),et={createTodo:tt,createChecklist:function(){return{id:J.makeId(),title:"",todos:[tt("")]}}};function tt(e){return{id:J.makeId(),title:e,isDone:!1}}var at=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={checklist:null,isAddOpen:!1,newTodoTitle:""},e.onHandleTitleChange=function(t){var a=t.target,r=a.value,n=a.name;e.setState((function(e){return{checklist:Object(Y.a)(Object(Y.a)({},e.checklist),{},Object(X.a)({},n,r))}}),(function(){return e.props.onHandleChecklistChange(e.state.checklist)}))},e.onHandleTodosChange=function(t,a){var r=e.state.checklist.todos,n="checkbox"===t.target.type?t.target.checked:t.target.value;a[t.target.name]=n;var s=Object(R.a)(r);e.saveTodos(s)},e.onRemoveTodo=function(t){1===e.state.checklist.todos.length&&e.props.addOrCancelChecklist(null);var a=Object(R.a)(e.state.checklist.todos);a.splice(t,1),e.saveTodos(a)},e.saveNewTodo=function(){var t=e.state.checklist.todos,a=e.state.newTodoTitle,r=Object(R.a)(t),n=et.createTodo(a);r.push(n),e.saveTodos(r)},e.saveTodos=function(t){e.setState((function(e){return{checklist:Object(Y.a)(Object(Y.a)({},e.checklist),{},{todos:Object(R.a)(t)}),newTodoTitle:""}}),(function(){return e.props.onHandleChecklistChange(e.state.checklist)}))},e.onHandleNewTodoChange=function(t){var a=t.target.value;e.setState({newTodoTitle:a})},e.toggleIsAddOpen=function(){e.setState((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{isAddOpen:!e.state.isAddOpen})}))},e.progressBarPrecentage=function(){var t=e.state.checklist,a=0;t.todos.forEach((function(e){e.isDone&&(a+=1)}));var r=100/t.todos.length;return 0===a?0:r*a},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.checklist;this.setState({checklist:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.checklist,n=t.isAddOpen,s=t.newTodoTitle;return a?Object(r.jsxs)("div",{className:"checklist flex column",children:[Object(r.jsxs)("div",{className:"checklist-header flex",children:[Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/check-box_pzd2ul.png",alt:""}),Object(r.jsx)("input",{className:"my-input",type:"text",name:"title",placeholder:"Checklist",value:a.title,onChange:this.onHandleTitleChange})]}),Object(r.jsxs)("div",{className:"progress-container flex space-between",children:[Object(r.jsxs)("p",{children:[Math.floor(this.progressBarPrecentage()),"%"]}),Object(r.jsx)("div",{className:"progress-bar flex",children:Object(r.jsx)("div",{style:{width:"".concat(this.progressBarPrecentage(),"%")},className:"todo-progress"})})]}),a.todos&&a.todos.map((function(t,a){return Object(r.jsxs)("div",{className:"checklist-todo flex",children:[Object(r.jsx)("input",{type:"checkbox",name:"isDone",checked:t.isDone,onChange:function(a){return e.onHandleTodosChange(a,t)}}),Object(r.jsx)("input",{className:"add-todo-input my-input",type:"text",name:"title",placeholder:"Add an item",value:t.title,onChange:function(a){return e.onHandleTodosChange(a,t)}}),Object(r.jsx)("button",{className:"delete-todo",onClick:function(){return e.onRemoveTodo(a)},children:"\u2715"})]},a)})),n&&Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Add an item",className:"new-todo-input",value:s,onChange:this.onHandleNewTodoChange,onBlur:this.toggleIsAddOpen}),Object(r.jsx)("button",{className:"save-btn",onMouseDown:this.saveNewTodo,children:"Save"})]}),!n&&Object(r.jsx)("button",{className:"add-todo",onClick:this.toggleIsAddOpen,children:"Add todo"})]}):Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})})}}]),a}(n.Component),rt=a(110),nt=a.n(rt);function st(e){var t,a,n=e.card,s=e.onHandleInputChange,o=e.onHandleChecklistChange,c=e.onHandleActivitiesChange,i=e.addOrCancelChecklist;return Object(r.jsxs)("div",{className:"card-info",children:[n.members&&Object(r.jsxs)("div",{className:"members flex column",children:[Object(r.jsx)("h2",{className:"members-header",children:"Members"}),Object(r.jsx)(Ce.a,{className:"members-list flex",children:n.members.map((function(e,t){return Object(r.jsx)(K.a,{timeout:500,classNames:"item",children:Object(r.jsx)("span",{className:"member",style:{backgroundImage:"url(".concat(e.imgUrl?e.imgUrl:"#3f72af",")")}},t)},t)}))})]}),n.labels&&n.labels.length>0&&Object(r.jsxs)("div",{className:"card-labels-section",children:[Object(r.jsx)("h2",{className:"card-label-h2",children:"Labels"}),Object(r.jsx)("div",{className:"flex labels-container",children:n.labels.map((function(e,t){return Object(r.jsx)("button",{className:"label-btn",style:{backgroundColor:e.color},children:e.title},t)}))})]}),n.dueDate&&Object(r.jsxs)("div",{className:"due-date-wrapper",children:[Object(r.jsx)("h2",{className:"due-date-h2",children:"Due Date"}),Object(r.jsx)("p",{className:"due-date",children:nt()(n.dueDate).format("LLL")})]}),Object(r.jsxs)("div",{className:"card-description",children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{className:"desc-img",src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/left-align_qaakok.png",alt:""})}),Object(r.jsx)("h3",{children:"Description"})]}),Object(r.jsx)("textarea",{className:"desc-textarea my-input",type:"text",name:"description",value:n.description||"",onChange:s,placeholder:"Add more detailed description..."})]}),(null===(t=n.checklist)||void 0===t||null===(a=t.todos)||void 0===a?void 0:a.length)>0&&Object(r.jsx)(at,{card:n,onHandleChecklistChange:o,addOrCancelChecklist:i}),Object(r.jsx)($e,{card:n,onHandleActivitiesChange:c})]})}a(137);var ot={uploadImg:function(e){return ct.apply(this,arguments)}};function ct(){return(ct=Object(u.a)(d.a.mark((function e(t){var a,r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"basimgs",a="https://api.cloudinary.com/v1_1/".concat("basimgs","/image/upload"),(r=new FormData).append("file",t),r.append("upload_preset","misterToy"),e.prev=5,e.next=8,fetch(a,{method:"POST",body:r});case 8:return n=e.sent,e.next=11,n.json();case 11:return s=e.sent,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var it=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isUploading:!1,mounted:!1},e.onClose=function(){e.setState({mounted:!1})},e.coverColors=function(){return["#f9ed69","#a56cc1","#f38181","#95e1d3","#878ecd","#3fc1c9","#a1dd70","#ffcc29","#19456b","#d32626","#16c79a","#fcbad3","#ffaa64","#de95ba","#17b978"]},e.onUploadImg=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.next=3,ot.uploadImg(a.target.files[0]);case 3:r=t.sent,n=r.secure_url,e.setState({isUploading:!1},(function(){return e.props.onFinishUpload(n)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setColor=function(t){console.log("the chosen color is",t),e.props.onUpdateCoverColor(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isUploading,n=t.mounted;return Object(r.jsx)(K.a,{in:n,classNames:"modal",timeout:300,onExited:this.props.toggleCoverMenu,children:Object(r.jsxs)("div",{className:"card-cover-modal flex column",children:[Object(r.jsxs)("div",{className:"card-cover-header flex",children:[Object(r.jsx)("h3",{children:"Cover"}),Object(r.jsx)("button",{onClick:this.onClose,className:"close-cover-btn",children:"\u2715"})]}),Object(r.jsxs)("div",{className:"uploader",children:[Object(r.jsx)("label",{className:"upload-btn",htmlFor:"imageUploader",children:a?"Uploading....":"Upload Image"}),Object(r.jsx)("input",{onChange:this.onUploadImg,hidden:!0,type:"file",accept:"image/*",id:"imageUploader"})]}),Object(r.jsx)("h3",{children:"Colors"}),Object(r.jsx)("div",{className:"card-cover-colors",children:this.coverColors().map((function(t,a){return Object(r.jsx)("div",{className:"cover-colors-menu",style:{backgroundColor:t},onClick:function(){return e.setColor(t)}},a)}))})]})})}}]),a}(n.Component),lt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labels:[],isCreateLabel:!1,currLabel:{id:"",title:"",color:"#f2d601"},colors:["#f2d601","#ff9f19","#eb5a46","#c377e0","#0179bf","#04c2e0","#61bd50","#50e898","#ff78cb","#344563","#b3bac5"]},e.onEditClick=function(t){e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isCreateLabel:!0,currLabel:Object(Y.a)({},t)})}))},e.onHandleNewLabel=function(t){var a="color";"string"!==typeof t&&(t=t.target.value,a="title"),e.setState((function(r){return Object(Y.a)(Object(Y.a)({},r),{},{currLabel:Object(Y.a)(Object(Y.a)({},e.state.currLabel),{},Object(X.a)({},a,t))})}))},e.onToggleLabel=function(){e.setState((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{isCreateLabel:!e.state.isCreateLabel})}))},e.onAddLabel=function(){var t=e.state.currLabel,a=Object(R.a)(e.state.labels);if(t.id){var r=a.findIndex((function(e){return e.id===t.id}));a.splice(r,1,t)}else t.id=J.makeId(),a.push(t);e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{labels:Object(R.a)(a)})}),(function(){e.props.onHandleLabelsChange(e.state.labels),_e.emit("label-added",t),e.onToggleLabel(),e.clearNewLabel()}))},e.clearNewLabel=function(){e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{currLabel:{id:"",title:"",color:"#f2d601"}})}))},e.onChooseLabel=function(t){e.checkForDuplicate(t)?e.removeLabel(t):e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{labels:[].concat(Object(R.a)(e.labels),[t])})}),(function(){return e.props.onHandleLabelsChange(e.state.labels)}))},e.checkForDuplicate=function(t){var a=e.state.labels;return!!a&&(!!a.find((function(e){return e.id===t.id}))||void 0)},e.removeLabel=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object(R.a)(e.state.labels),n=r.findIndex((function(e){return e.id===t.id}));r.splice(n,1),e.setState((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{labels:r})}),(function(){e.props.onHandleLabelsChange(e.state.labels),a&&e.props.onToggleLabels(),e.clearNewLabel(),e.onToggleLabel()}))},e.checkForMark=function(t){return e.state.labels.find((function(e){return e.id===t.id}))},e.onRemoveLabel=function(t){e.removeLabel(t,!0),_e.emit("label-remove",t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.labels;e&&this.setState((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{labels:Object(R.a)(e),mounted:!0})}))}},{key:"render",value:function(){var e,t=this,a=this.props.board,n=this.state,s=n.isCreateLabel,o=n.colors,c=n.currLabel,i=n.mounted;return Object(r.jsx)(K.a,{in:i,classNames:"modal",timeout:300,onExited:this.props.toggleLabelMenu,children:Object(r.jsxs)("div",{className:"card-labels flex column",style:{height:s?"320px":"450px"},children:[Object(r.jsxs)("header",{className:"labels-header flex",children:[s&&Object(r.jsx)("button",{className:"go-back",onClick:this.onToggleLabel,children:" \u3008"}),Object(r.jsx)("p",{children:s?"Create Label":"Labels"}),Object(r.jsx)("button",{className:"close-btn inside-close",onClick:this.props.toggleLabelMenu,children:"\u2715"})]}),!s&&Object(r.jsx)("section",{className:"label-choose-container flex column",children:Object(r.jsx)("ul",{children:null===(e=a.labels)||void 0===e?void 0:e.map((function(e){return Object(r.jsxs)("li",{className:"label flex",children:[Object(r.jsxs)("div",{className:"label-title flex space-between",onClick:function(){return t.onChooseLabel(e)},style:{backgroundColor:e.color},children:[Object(r.jsxs)("p",{children:[e.title," "]}),Object(r.jsx)("span",{className:"checkmark",children:t.checkForMark(e)?"\u2713":""})]}),Object(r.jsx)("button",{className:"label-edit-btn",onClick:function(){return t.onEditClick(e)},children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610872377/pen_so2afr.png",alt:""})})]},e.id)}))})}),s&&Object(r.jsxs)("section",{className:"create-label-container flex column",children:[Object(r.jsx)("label",{htmlFor:"title",children:"Name"}),Object(r.jsx)("input",{type:"text",placeholder:"Enter label name...",name:"title",id:"title",value:c.title,onChange:this.onHandleNewLabel}),Object(r.jsx)("p",{children:"Select a color"}),Object(r.jsx)("ul",{className:"flex",children:o.map((function(e){return Object(r.jsx)("li",{className:"label-color-picker flex align-center justify-center",name:"color",style:{backgroundColor:e},onClick:function(){return t.onHandleNewLabel(e)},children:c.color===e?"\u2713":""},e)}))}),Object(r.jsxs)("div",{className:"flex space-between",children:[Object(r.jsx)("button",{className:"save-btn",onClick:this.onAddLabel,children:"Create"}),c.id&&Object(r.jsx)("button",{className:"delete-btn",onClick:function(){return t.onRemoveLabel(c)},children:"Delete"})]})]}),!s&&Object(r.jsx)("footer",{children:Object(r.jsx)("button",{className:"add-label-btn",onClick:this.onToggleLabel,children:"+ Create New Label"})})]})})}}]),a}(n.Component),dt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCard:e.cardModule.currCard}}),{})(lt),ut=a(91),pt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={mounted:!1,value:new Date},e.onClose=function(){e.setState({mounted:!1})},e.onChange=function(t){e.setState({value:t},(function(){return e.props.onSavedueDate((e.state.value+"").substring(4,32))})),e.setState({mounted:!1})},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.mounted;return Object(r.jsx)(K.a,{in:a,classNames:"modal",timeout:300,onExited:this.props.toggleDate,children:Object(r.jsxs)("div",{className:"date-picker",children:[Object(r.jsx)("button",{onClick:this.onClose,className:"close-date-btn",children:"\u2715"}),Object(r.jsx)(ut.a,{style:{zIndex:2e3,position:"absolute"},onChange:this.onChange,value:t})]})})}}]),a}(n.Component),bt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isDateShown:!1,isLabelsShown:!1,isLabelsMenuShown:!1,isCoverMenuShown:!1,isMoreMembersShown:!1},e.onRemoveCard=function(){e.props.onRemoveCard()},e.toggleMembers=function(){e.setState({isMoreMembersShown:!e.state.isMoreMembersShown})},e.toggleDate=function(){e.setState({isDateShown:!e.state.isDateShown})},e.toggleCoverMenu=function(){e.setState({isCoverMenuShown:!e.state.isCoverMenuShown})},e.toggleLabelMenu=function(){e.setState({isLabelsMenuShown:!e.state.isLabelsMenuShown}),window.isLabelsMenuShown=e.state.isLabelsMenuShown},e.onAddChecklist=function(){var t=et.createChecklist();e.props.addOrCancelChecklist(t)},e.onToggleLabels=function(){e.setState({isLabelsShown:!e.state.isLabelsShown})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isDateShown,a=e.isCoverMenuShown,n=e.isMoreMembersShown,s=e.isLabelsMenuShown,o=this.props,c=o.card,i=o.onHandleLabelsChange,l=o.saveChanges,d=o.users;return Object(r.jsxs)(r.Fragment,{children:[s&&Object(r.jsx)(dt,{saveChanges:l,card:c,onToggleLabels:this.onToggleLabels,toggleLabelMenu:this.toggleLabelMenu,onHandleLabelsChange:i}),a&&Object(r.jsx)(it,{onFinishUpload:this.props.onUploadCardCoverImg,onUpdateCoverColor:this.props.onUpdateCoverColor,toggleCoverMenu:this.toggleCoverMenu}),t&&Object(r.jsx)(pt,{onSavedueDate:this.props.onSavedueDate,toggleDate:this.toggleDate}),n&&Object(r.jsx)(pe,{toggleMembers:this.toggleMembers,onUpdateMembers:this.props.onUpdateMembers,onSetUserFilter:this.props.onSetUserFilter,members:c.members,users:d}),Object(r.jsxs)("div",{className:"card-side flex column",children:[Object(r.jsxs)("button",{className:"side-btn",onClick:this.toggleMembers,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/user_g2y481.png",alt:""})})," Members"]}),Object(r.jsxs)("button",{className:"side-btn",onClick:this.toggleLabelMenu,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610794160/price-tag_evse4z.png",alt:""})})," Labels"]}),!c.checklist&&Object(r.jsxs)("button",{className:"side-btn",onClick:this.onAddChecklist,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610794290/check-box_srgv0c.png",alt:""})})," Checklist"]}),Object(r.jsxs)("button",{className:"side-btn",onClick:this.toggleDate,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png",alt:""})})," Due Date"]}),Object(r.jsxs)("button",{className:"side-btn",onClick:this.toggleCoverMenu,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610793767/picture_omnffh.png",alt:""})})," Cover"]}),Object(r.jsxs)("button",{className:"side-btn",onClick:this.onRemoveCard,children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png",alt:""})})," Delete"]})]})]})}}]),a}(n.Component),mt={createActivity:function(e,t,a,r,n,s){var o=null,c=null;e&&(o={_id:e._id,fullname:e.fullname,imgUrl:e.imgUrl});s&&(c={id:s.id,title:s.title});a=a?{id:a.id,title:"".concat(a.title," ").concat(n)}:null;return{id:J.makeId(),txt:t,createdAt:Date.now(),byMember:o,card:a,group:{id:r.id,title:r.title},toGroup:c}}};var ht=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={card:null,filterBy:{fullname:""},mounted:!1,initialCard:null},e.onClose=function(){e.saveChanges(!0),e.checklistValidation(),e.setState({mounted:!1})},e.saveChanges=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.sendUpdatedBoard(t)},e.sendUpdatedBoard=Object(u.a)(d.a.mark((function t(){var a,r,n,s,o,c,i,l,u,p=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>0&&void 0!==p[0]&&p[0],r=Object(Y.a)({},e.props.board),n=Object(Y.a)({},e.props.group),s=e.state,o=s.card,c=s.initialCard,i=n.cards.findIndex((function(t){return t.id===e.state.card.id})),n.cards[i]=o,l=r.groups.findIndex((function(e){return e.id===n.id})),r.groups[l]=n,a&&JSON.stringify(c)!==JSON.stringify(o)&&(u=mt.createActivity(e.props.loggedInUser,"update card ",o,r.groups[l]," in"),r.activities?r.activities.unshift(u):r.activities=new Array(u)),t.next=11,e.props.saveBoard(r);case 11:case"end":return t.stop()}}),t)}))),e.onHandleInputChange=function(t){var a=t.target,r=a.value,n=a.name;e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},Object(X.a)({},n,r))}}),(function(){return e.saveChanges()}))},e.onHandleChecklistChange=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{checklist:Object(Y.a)({},t)})}}),(function(){return e.saveChanges()}))},e.onHandleActivitiesChange=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{comments:Object(R.a)(t)})}}),(function(){return e.saveChanges()}))},e.onHandleLabelsChange=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{labels:Object(R.a)(t)})}}),(function(){return e.saveChanges()}))},e.addOrCancelChecklist=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{checklist:t})}}),(function(){return e.saveChanges()}))},e.onSavedueDate=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{dueDate:Date.parse(t)})}}),(function(){return e.saveChanges()}))},e.onUploadCardCoverImg=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{style:{imgUrl:t,color:""}})}}),(function(){return e.saveChanges()}))},e.onUpdateCoverColor=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{style:{imgUrl:"",color:t}})}}),(function(){return e.saveChanges()}))},e.onRemoveCard=function(){var t=e.props,a=t.board,r=t.group,n=e.state.card,s=r.cards.findIndex((function(e){return e.id===n.id}));r.cards.splice(s,1);var o=a.groups.findIndex((function(e){return e.id===r.id}));a.groups[o]=r,e.props.saveBoard(a),e.props.toggleDetails(!1)},e.onUpdateMembers=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n,s,o,c,i,l,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("new members",a),r=e.props,n=r.board,s=r.group,o=e.state.card,c=Object(Y.a)({},o),(i=o.members.findIndex((function(e){return e._id===a._id})))>-1?c.members.splice(i,1):c.members.push(a),l=s.cards.findIndex((function(t){return t.id===e.state.card.id})),s.cards[l]=c,u=n.groups.findIndex((function(e){return e.id===s.id})),n.groups[u]=s,e.setState({card:c},(function(){e.props.saveBoard(n)}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checklistValidation=function(){var t=e.state.card.checklist;t&&1===t.todos.length&&!t.todos[0].title&&e.addOrCancelChecklist(null)},e.onSetUserFilter=function(t){e.setState({filterBy:t})},e.onDeleteCover=function(){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{style:null})}}),(function(){return e.saveChanges()}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card;this.setState({mounted:!0,card:e,initialCard:e})}},{key:"render",value:function(){var e,t,a,n,s=this.state,o=s.card,c=s.mounted,i=this.props.group,l=this.usersForDisplay;return o?Object(r.jsx)("div",{className:"modal-cover",onClick:this.onClose,children:Object(r.jsx)(K.a,{in:c,classNames:"modal",timeout:300,onExited:this.props.toggleDetails,children:Object(r.jsxs)("div",{className:"card-details flex column align-center",onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)("button",{className:"close-modal-btn",onClick:this.onClose,children:"\u2715"}),(null===(e=o.style)||void 0===e?void 0:e.color)&&Object(r.jsx)("div",{className:"details-img-wrapper",style:{backgroundColor:o.style.color,height:"150px"},children:Object(r.jsx)("img",{onClick:this.onDeleteCover,src:"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png",className:"trash",alt:""})}),(null===(t=o.style)||void 0===t?void 0:t.imgUrl)&&Object(r.jsxs)("div",{className:"details-img-wrapper flex justify-center",style:{height:"200px"},children:[Object(r.jsx)("img",{src:o.style.imgUrl,alt:""}),Object(r.jsx)("img",{onClick:this.onDeleteCover,src:"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png",className:"trash",alt:""})]}),Object(r.jsxs)("div",{className:"card-details-wrapper flex column",style:{paddingTop:(null===(a=o.style)||void 0===a?void 0:a.imgUrl)||(null===(n=o.style)||void 0===n?void 0:n.color)?"0":"15px"},children:[Object(r.jsx)(Qe,{card:o,onHandleInputChange:this.onHandleInputChange,group:i}),Object(r.jsxs)("div",{className:"card-content flex",children:[Object(r.jsx)(st,{card:o,onHandleChecklistChange:this.onHandleChecklistChange,onHandleInputChange:this.onHandleInputChange,onHandleActivitiesChange:this.onHandleActivitiesChange,addOrCancelChecklist:this.addOrCancelChecklist}),Object(r.jsx)(bt,{card:o,onRemoveCard:this.onRemoveCard,onSavedueDate:this.onSavedueDate,addOrCancelChecklist:this.addOrCancelChecklist,onUploadCardCoverImg:this.onUploadCardCoverImg,onHandleLabelsChange:this.onHandleLabelsChange,onUpdateCoverColor:this.onUpdateCoverColor,saveChanges:this.saveChanges,users:l,onUpdateMembers:this.onUpdateMembers,onSetUserFilter:this.onSetUserFilter})]})]})]})})}):Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})})}},{key:"usersForDisplay",get:function(){var e=this.props.board,t=this.state.filterBy,a=new RegExp(t.fullname,"i");return e.members.filter((function(e){return a.test(e.fullname)}))}}]),a}(n.Component),gt={saveBoard:W,clearState:function(e){return function(t){try{t({type:"CLEAR_STATE",clear:e})}catch(a){console.log("err cardAction CLEAR STATE",a)}}}},jt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,loggedInUser:e.userModule.loggedInUser}}),gt)(ht),vt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={card:null,userClicked:null,isCreateLabel:!1,isChangeMembers:!1,isChangeDueDate:!1,value:new Date,modalChangePos:null},e.modalRef=s.a.createRef(),e.modalLabelRef=s.a.createRef(),e.closeModal=function(){e.modalRef.current.style.visibility="hidden",e.props.showPreviewCardDetails()},e.toggleLabelMenu=function(t){var a=e.getNewPos(t,300,450);e.setState({isCreateLabel:!e.state.isCreateLabel,modalChangePos:a})},e.showMembers=function(t){var a=e.getNewPos(t,300,450);e.setState({isChangeMembers:!e.state.isChangeMembers,modalChangePos:a})},e.showDueDate=function(t){var a=e.getNewPos(t,340,288);e.setState({isChangeDueDate:!e.state.isChangeDueDate,modalChangePos:a})},e.onHandleInputChange=function(t){var a=t.target,r=a.value,n=a.name;console.log(a,n,r),e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},Object(X.a)({},n,r))}}))},e.onHandleLabelsChange=function(t){e.setState((function(e){return{card:Object(Y.a)(Object(Y.a)({},e.card),{},{labels:Object(R.a)(t)})}}),(function(){return e.onUpdateCard(e.state.card)}))},e.onChange=function(t){e.setState({value:t},(function(){return e.onSavedueDate((e.state.value+"").substring(4,32))})),e.showDueDate()},e.onSavedueDate=function(t){var a=e.state.card,r=Object(Y.a)({},a);r.dueDate=Date.parse(t),e.onUpdateCard(r)},e.onUpdateMembers=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(Y.a)({},e.state.card),console.log("copyCard",r),n=r.members.findIndex((function(e){return e._id===a._id})),console.log("copyCard",n),n>-1?(r.members.splice(n,1),e.setState({card:r})):(r.members.push(a),e.setState({card:r})),e.onUpdateCard(e.state.card);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateCard=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.props,n=r.board,s=r.group,o=s.cards.findIndex((function(t){return t.id===e.state.card.id}));s.cards[o]=t;var c=n.groups.findIndex((function(e){return e.id===s.id}));n.groups[c]=s,e.setState({card:t},(function(){e.props.saveBoard(n),a&&e.closeModal()}))},e.onRemoveCard=function(){var t=e.props,a=t.board,r=t.group,n=e.state.card,s=r.cards.findIndex((function(e){return e.id===n.id}));r.cards.splice(s,1);var o=a.groups.findIndex((function(e){return e.id===r.id}));a.groups[o]=r,e.props.saveBoard(a),e.closeModal()},e.getNewPos=function(e,t,a){var r={width:t,height:a};return J.getModalPos(e,r)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e;this.setState({card:this.props.card,userClicked:null===(e=this.props)||void 0===e?void 0:e.userClicked})}},{key:"componentWillUnmount",value:function(){this.setState({card:null,userClicked:null,isCreateLabel:!1,isChangeMembers:!1,isChangeDueDate:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.userClicked,n=t.card,s=t.isCreateLabel,o=t.isChangeMembers,c=t.isChangeDueDate,i=t.value,l=t.modalChangePos;return console.log("modalChangePos",l),n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"wrapper-preview-details",ref:this.modalRef,onClick:this.closeModal,style:{position:"absolute",zIndex:9e3,top:0,left:0,right:0,bottom:0,backgroundColor:"black",opacity:.5}}),Object(r.jsxs)("div",{className:"card-preview-details flex",style:{position:"absolute",top:a.y,left:a.x,zIndex:1e4},children:[Object(r.jsxs)("div",{className:"flex column space-between",children:[Object(r.jsx)("textarea",{className:"card-preview-details-textarea",name:"title",cols:"28",wrap:"hard",rows:"8",onChange:this.onHandleInputChange,value:n.title,autoFocus:!0}),Object(r.jsx)("button",{className:"card-preview-details-save",onClick:function(){return e.onUpdateCard(n,"save")},children:"Save"})]}),Object(r.jsxs)("div",{className:"card-preview-details-changes flex column",children:[Object(r.jsxs)("button",{className:"card-preview-details-changes-btn",onClick:this.toggleLabelMenu,children:[Object(r.jsx)("span",{className:"card-preview-details-changes-icon",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610794160/price-tag_evse4z.png",alt:"label"})}),"Edit Labels"]}),s&&Object(r.jsx)("div",{className:"card-preview-details-label-wrap",style:{top:-l.y,right:-130},children:Object(r.jsx)(dt,{toggleLabelMenu:this.toggleLabelMenu,onHandleLabelsChange:this.onHandleLabelsChange,card:n})}),Object(r.jsxs)("button",{className:"card-preview-details-changes-btn flex space-between",onClick:this.showMembers,children:[Object(r.jsx)("span",{className:"card-preview-details-changes-icon",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/user_g2y481.png",alt:"member"})}),Object(r.jsx)("span",{style:{flexGrow:1},children:"Change Members"})]}),o&&Object(r.jsx)(pe,{modalChangePos:l,toggleMembers:this.showMembers,onUpdateMembers:this.onUpdateMembers,onSetUserFilter:this.props.onSetUserFilter,members:n.members,users:this.props.board.members}),Object(r.jsxs)("button",{className:"card-preview-details-changes-btn",onClick:this.showDueDate,children:[Object(r.jsx)("span",{className:"card-preview-details-changes-icon",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png",alt:"clock"})}),Object(r.jsx)("span",{style:{flexGrow:1},children:" Change Due Date"})]}),c&&Object(r.jsxs)("div",{className:"date-picker ",style:{position:"fixed",top:l.y-30,left:l.x},children:[Object(r.jsx)("button",{onClick:this.showDueDate,className:"close-date-btn",children:"\u2715"}),Object(r.jsx)(ut.a,{onChange:this.onChange,value:i})]}),Object(r.jsxs)("button",{className:"card-preview-details-changes-btn",onClick:this.onRemoveCard,children:[Object(r.jsx)("span",{className:"card-preview-details-changes-icon",children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png",alt:"Trash"})}),Object(r.jsx)("span",{style:{flexGrow:1,textAlign:"left"},children:"Delete"})]})]})]})]}):Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})})}}]),a}(n.Component),ft={saveBoard:W},Ot=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),ft)(vt),xt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={isDetailsShown:!1,scrollLeft:0,isPreviewDetailsShown:!1,userClicked:{x:null,y:null},isGroupMenuShown:!1,scrollWidth:0},e.refBoard=s.a.createRef(),e.updateBoard=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.props.saveBoard(t,a)},e.loadBoard=Object(u.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.boardId,z.emit("set label",a),t.next=4,e.props.loadBoard(a);case 4:case"end":return t.stop()}}),t)}))),e.onAddGroup=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.board,(n=Object(Y.a)({},r)).groups.push(a),t.next=5,e.props.saveBoard(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveLabel=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.board,n=Object(Y.a)({},r),s=n.labels.findIndex((function(e){return e.id===a.id})),n.labels.splice(s,1),t.next=6,e.props.saveBoard(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddLabel=function(){var t=Object(u.a)(d.a.mark((function t(a){var r,n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.props.board).labels?(s=r.labels.find((function(e){return e.id===a.id})),n=s?r.labels.map((function(e){return e.id===a.id?a:e})):[].concat(Object(R.a)(r.labels),[a])):n=new Array(a),r.labels=Object(R.a)(n),t.next=5,e.props.saveBoard(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragCard=Object(u.a)(d.a.mark((function t(){var a,r,n,s,o,c=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:null,r=c.length>1&&void 0!==c[1]?c[1]:null,n=e.props.board,s=Object(Y.a)({},n),a&&r&&a.title!==r.title&&(o=mt.createActivity(e.props.loggedInUser,"moved card ",null,a," to",r),s.activities?s.activities.unshift(o):s.activities=new Array(o)),t.next=7,e.props.saveBoard(s);case 7:case"end":return t.stop()}}),t)}))),e.onAddCard=function(){var t=Object(u.a)(d.a.mark((function t(a,r){var n,s,o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.board,s=Object(Y.a)({},n),t.next=4,P.getGroupIdxById(n._id,r);case 4:return o=t.sent,s.groups[o].cards.push(a),c=mt.createActivity(e.props.loggedInUser,"added card ",a,s.groups[o],"to"),s.activities?s.activities.unshift(c):s.activities=new Array(c),t.next=10,e.props.saveBoard(s);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onDragEnd=function(t){var a=t.destination,r=t.source,n=t.draggableId,s=t.type,o=e.props.board.groups;if(a){if("group"===s){var c=o.find((function(e){return e.id===n}));return o.splice(r.index,1),o.splice(a.index,0,c),void e.onDragCard()}var i=o.find((function(e){return e.id===r.droppableId})),l=o.find((function(e){return e.id===a.droppableId})),d=i.cards.find((function(e){return e.id===n}));i.cards.splice(r.index,1),l.cards.splice(a.index,0,d),e.onDragCard(i,l)}},e.toggleDetails=function(){e.setState({isDetailsShown:!e.state.isDetailsShown})},e.onScroll=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a){var r=e.refBoard.current.scrollLeft;e.setState({scrollLeft:r},(function(){a&&(e.refBoard.current.scrollLeft+=a)}))}},e.showPreviewCardDetails=function(t){e.setState({userClicked:{x:null===t||void 0===t?void 0:t.newClientPos.x,y:null===t||void 0===t?void 0:t.newClientPos.y},isPreviewDetailsShown:!e.state.isPreviewDetailsShown})},e.showGroupMenu=function(t){e.setState({userClicked:{x:null===t||void 0===t?void 0:t.clientX,y:null===t||void 0===t?void 0:t.clientY},isGroupMenuShown:!e.state.isGroupMenuShown})},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z.setup(),e.next=3,this.loadBoard();case 3:z.on("load board",(function(e){return t.updateBoard(e,!0)})),this.eventBusTerminate=_e.on("show-details",this.toggleDetails),this.eventBusLabelTerminate=_e.on("label-added",this.onAddLabel),this.eventBusRemoveTerminate=_e.on("label-remove",this.onRemoveLabel),this.eventBusShowPreviewDetailsTerminate=_e.on("show-preview-details",this.showPreviewCardDetails),this.eventBusShowGroupMenuTerminate=_e.on("show-group-menu",this.showGroupMenu);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.eventBusTerminate(),this.eventBusLabelTerminate(),this.eventBusRemoveTerminate(),this.eventBusShowPreviewDetailsTerminate(),z.terminate(),this.props.cleanBoard(),this.eventBusShowGroupMenuTerminate()}},{key:"render",value:function(){var e=this,t=this.props.board;if(console.log("want to check if a new board is add",t),!t)return Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})});var a=this.state,n=a.isDetailsShown,s=a.isPreviewDetailsShown,o=a.userClicked,c=a.isGroupMenuShown;return Object(r.jsxs)(r.Fragment,{children:[this.props.currCard&&n&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(jt,{card:this.props.currCard,group:this.props.currGroup,toggleDetails:this.toggleDetails})}),c&&Object(r.jsx)(Ke,{board:t,showGroupMenu:this.showGroupMenu,userClicked:o,group:this.props.currGroup}),s&&Object(r.jsx)(Ot,{board:t,showPreviewCardDetails:this.showPreviewCardDetails,userClicked:o,card:this.props.currCard,group:this.props.currGroup}),Object(r.jsx)(Ne,{title:t.title,members:t.members,onAddGroup:this.onAddGroup}),Object(r.jsx)("section",{className:"board-container",ref:this.refBoard,onScroll:this.onScroll,children:Object(r.jsx)(le.a,{onDragEnd:this.onDragEnd,children:Object(r.jsx)(le.c,{droppableId:"app",type:"group",direction:"horizontal",children:function(a){return Object(r.jsxs)("div",Object(Y.a)(Object(Y.a)({style:{width:287*t.groups.length},ref:a.innerRef},a.droppableProps),{},{children:[Object(r.jsx)(Ve,{updateBoard:e.updateBoard,groups:t.groups,onAddCard:e.onAddCard,onAddGroup:e.onAddGroup,onScroll:e.onScroll}),a.placeholder]}))}})})})]})}}]),a}(n.Component),yt={loadBoard:q,saveBoard:W,cleanBoard:function(){return function(e){try{e({type:"CLEAN_BOARD"})}catch(t){console.log("err boardAction CLEAN BOARD",t)}}}},wt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCard:e.cardModule.currCard,currGroup:e.cardModule.currGroup,loggedInUser:e.userModule.loggedInUser}}),yt)(xt),Ct=a(396),kt=a(394),St=a(388),Nt=a(391),Ut=a(390),_t=a(389),At=a(393),Dt=a(88),Bt=a.n(Dt),It=a(357),Mt=a(387),Lt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={user:{username:"",password:""},err:""},e.handleChange=function(t){var a=t.target,r=a.name,n="number"===a.type?+a.value:a.value;e.setState((function(e){return{user:Object(Y.a)(Object(Y.a)({},e.user),{},Object(X.a)({},r,n))}}))},e.onLogin=function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),a.preventDefault(),t.prev=2,a.preventDefault(),t.next=6,e.props.login(e.state.user);case 6:console.log(e.props.loggedInUser),e.props.loggedInUser&&e.props.history.push("/boards"),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(2),a.preventDefault(),e.props.history.push("/login"),console.log("login",t.t0),e.setState({err:"no user"});case 16:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.err;return Object(r.jsxs)(Mt.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(St.a,{}),Object(r.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(r.jsx)(Ct.a,{style:{margin:"10px",backgroundColor:"blue"},children:Object(r.jsx)(Bt.a,{})}),Object(r.jsx)(It.a,{component:"h2",variant:"h5",children:"Login"}),Object(r.jsx)("div",{className:"err",children:a}),Object(r.jsxs)("form",{style:{width:"100%",marginTop:"5px"},children:[Object(r.jsx)(Nt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"Username",label:"Username",name:"username",autoFocus:!0,value:t.username,onChange:this.handleChange}),Object(r.jsx)(Nt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:t.password,onChange:this.handleChange}),a&&Object(r.jsx)("span",{children:"err"}),Object(r.jsx)(kt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{marginTop:"10px"},onClick:this.onLogin,children:"Login"}),Object(r.jsxs)(_t.a,{container:!0,children:[Object(r.jsx)(_t.a,{item:!0,xs:!0,style:{marginTop:"10px"},children:Object(r.jsx)(Ut.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(r.jsx)(_t.a,{item:!0,style:{marginTop:"10px"},children:Object(r.jsx)(Ut.a,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(r.jsx)(At.a,{mt:8})]})}}]),a}(n.Component),Tt={login:T},Pt=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Tt)(Lt),Ft=a(53),Et=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={user:{username:"",password:""},err:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{user:Object(Y.a)(Object(Y.a)({},e.user),{},Object(X.a)({},r,n))}}))},e.onLogin=function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.login(e.state.user);case 3:console.log(e.props.loggedInUser),e.props.loggedInUser&&e.props.history.push("/boards"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("login",t.t0),e.setState({err:"no user"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Any place in your app!"}),Object(r.jsx)(Ft.d,{initialValues:{username:"",password:""},onSubmit:this.onLogin,children:function(t){var a=t.isSubmitting;return Object(r.jsxs)(Ft.c,{children:[Object(r.jsx)(Ft.b,{type:"text",name:"username",required:!0,value:e.state.user.username,onChange:e.handleChange,placeholder:"username",as:Nt.a}),Object(r.jsx)(Ft.a,{name:"username",className:"err-msg"}),Object(r.jsx)(Ft.b,{type:"password",required:!0,placeholder:"password",value:e.state.user.password,onChange:e.handleChange,as:Nt.a,name:"password"}),Object(r.jsx)(Ft.a,{name:"password",className:"err-msg",component:"span"}),Object(r.jsx)("button",{type:"submit",disabled:a,children:"Submit"})]})}})]})}}]),a}(n.Component),Rt={login:T},Gt=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Rt)(Et),Ht=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={user:{username:"",fullname:"",password:""},err:{txt:""}},e.handleChange=function(t){var a=t.target,r=a.name,n="number"===a.type?+a.value:a.value;e.setState((function(e){return{user:Object(Y.a)(Object(Y.a)({},e.user),{},Object(X.a)({},r,n))}}))},e.onSignUpUser=function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,e.props.signup(e.state.user);case 4:e.props.history.push("/boards"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setState({err:t.t0});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.err;return Object(r.jsxs)(Mt.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(St.a,{}),Object(r.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(r.jsx)(Ct.a,{style:{margin:"10px",backgroundColor:"blue"},children:Object(r.jsx)(Bt.a,{})}),Object(r.jsx)(It.a,{component:"h2",variant:"h5",children:"Sign Up"}),Object(r.jsx)("div",{className:"err",children:a&&a.txt}),Object(r.jsxs)("form",{onSubmit:this.onSignUpUser,style:{width:"100%",marginTop:"5px"},children:[Object(r.jsx)(Nt.a,{variant:"filled",margin:"normal",required:!0,fullWidth:!0,id:"Username",label:"Username",name:"username",autoFocus:!0,value:t.username,onChange:this.handleChange}),Object(r.jsx)(Nt.a,{variant:"filled",margin:"normal",required:!0,fullWidth:!0,id:"fullname",label:"Full Name",name:"fullname",value:t.fullname,onChange:this.handleChange}),Object(r.jsx)(Nt.a,{variant:"filled",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:t.password,onChange:this.handleChange}),Object(r.jsx)(kt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{marginTop:"10px"},children:"Sign Up"})]})]}),Object(r.jsx)(At.a,{mt:8})]})}}]),a}(n.Component),zt={signup:function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.signup(e);case 3:r=t.sent,a({type:"SIGNUP",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err userAction SIGNUP USER",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},qt=Object(i.b)((function(e){return{users:e.userModule.users}}),zt)(Ht),Wt=a(115),Jt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,textSize:25},e.updateTextSize=function(){window.innerWidth<500?e.setState({textSize:15}):501===window.innerWidth&&e.setState({textSize:25})},e.loadBoard=function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadBoard(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showTaskPerGroup=function(){var t=e.state.board.groups.reduce((function(e,t){return e[t.title]=t.cards.length,e}),{});return console.log(Object.keys(t)),{labels:Object(R.a)(Object.keys(t)),datasets:[{data:Object(R.a)(Object.values(t).map((function(e){return e}))),backgroundColor:Object(R.a)(Object.keys(t).map((function(e,t){return t%2===0?J.getRandomBrightColor():J.getRandomDarkColor()}))),hoverBackgroundColor:Object(R.a)(Object.keys(t).map((function(){return"#FFFFFF"})))}]}},e.showTaskPerLabel=function(){var t=e.state.board.groups.reduce((function(e,t){return t.cards.forEach((function(t){t.labels.forEach((function(t){e[t.title]?e[t.title]+=1:e[t.title]=1}))})),e}),{});return{labels:Object(R.a)(Object.keys(t).map((function(e){return e}))),datasets:[{data:Object(R.a)(Object.values(t).map((function(e){return e}))),backgroundColor:Object(R.a)(Object.keys(t).map((function(e,t){return t%2===0?J.getRandomBrightColor():J.getRandomDarkColor()}))),hoverBackgroundColor:Object(R.a)(Object.keys(t).map((function(){return"#FFFFFF"})))}]}},e.showTotalCards=function(){var t=0,a=0;return e.state.board.groups.forEach((function(e){e.cards.forEach((function(e){var r;(null===(r=e.members)||void 0===r?void 0:r.length)>0&&a++,t++}))})),{cardNum:t,cardUnassignedNum:a=t-a}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.board){e.next=6;break}return t=this.props.match.params.boardId,e.next=5,this.loadBoard(t);case 5:this.setState({board:this.props.board});case 6:this.setState({board:this.props.board});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.state.board)return Object(r.jsx)("div",{className:"loader-wrapper",children:Object(r.jsx)(se.a,{className:"loader",type:"TailSpin",color:"gray",height:100,width:100,timeout:3e3})});var e=this.state.textSize;return Object(r.jsxs)("div",{className:"statistics-page flex column",style:{background:"linear-gradient(to right top, rgba(39, 61, 93, 0.65098), rgba(177, 106, 97, 0.501961))"},children:[Object(r.jsx)("h1",{children:"Statistics"}),Object(r.jsxs)("header",{className:"dashboard-header flex",children:[Object(r.jsxs)("div",{className:"dashboard-preview flex column",children:[Object(r.jsx)("span",{children:this.showTotalCards().cardNum})," ",Object(r.jsx)("span",{children:" TOTAL CARDS"})]}),Object(r.jsxs)("div",{className:"dashboard-preview flex column",children:[Object(r.jsx)("span",{children:this.showTotalCards().cardUnassignedNum})," ",Object(r.jsx)("span",{children:" UNASSIGNED CARDS"})]}),Object(r.jsxs)("div",{className:"dashboard-preview flex column",children:[Object(r.jsx)("span",{children:"3"})," ",Object(r.jsx)("span",{children:" ADDED TODAY"})]})]}),Object(r.jsx)("button",{children:Object(r.jsx)(g.b,{to:"board/".concat(this.state.board._id),children:" Back"})}),Object(r.jsxs)("div",{className:"dashboard-content flex",style:{height:"430px",width:"430px",flexWrap:"wrap",margin:"0 auto"},children:[Object(r.jsx)(Wt.Polar,{options:{responsive:!0,scales:{yAxes:[{stacked:!0,gridLines:{display:!0,color:"rgba(0,0,0,0.8)"}}],xAxes:[{gridLines:{display:!1}}]},title:{display:!0,text:"Tasks Per List",fontSize:e,fontColor:"rgb(0, 0, 0)"},legend:{display:!0,position:"right",labels:{fontColor:"rgb(0, 0, 0)",fontSize:.66*e}}},className:"test",data:this.showTaskPerGroup()}),Object(r.jsx)(Wt.Doughnut,{options:{responsive:!0,scales:{yAxes:[{stacked:!0,gridLines:{display:!0,color:"rgba(0,0,0,0.8)"}}],xAxes:[{gridLines:{display:!1}}]},title:{display:!0,text:"Tasks Per Label",fontSize:e,fontColor:"rgb(0, 0, 0)"},legend:{display:!0,position:"right",labels:{fontColor:"rgb(0, 0, 0)",fontSize:.66*e}}},className:"test",data:this.showTaskPerLabel()})]})]})}}]),a}(n.Component),Vt={loadUsers:L,loadBoard:q},Xt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,users:e.userModule.users}}),Vt)(Jt);var Yt={saveBoard:W},Kt=Object(i.b)((function(e){return{currBoard:e.boardModule.currBoard}}),Yt)((function(e){var t=e.currBoard;return Object(r.jsxs)("div",{className:"App",style:{backgroundImage:"url(".concat(t?t.style.backgroundImage:"white",")")},children:[Object(r.jsx)(te,{}),Object(r.jsxs)(Z.c,{children:[Object(r.jsx)(Z.a,{component:Gt,path:"/login1"}),Object(r.jsx)(Z.a,{component:Pt,path:"/login"}),Object(r.jsx)(Z.a,{component:qt,path:"/signup"}),Object(r.jsx)(Z.a,{component:Xt,path:"/board/:boardId/dashboard"}),Object(r.jsx)(Z.a,{component:wt,path:"/board/:boardId"}),Object(r.jsx)(Z.a,{component:ie,path:"/boards"}),Object(r.jsx)(Z.a,{component:ae,path:"/"})]})]})})),Qt=a(161),Zt=a(32),$t={currBoard:null,boards:[]};var ea={currCard:null,currGroup:null,isAddOpen:!1};var ta={loggedInUser:JSON.parse(sessionStorage.getItem("loggedinUser"))||null,users:[],filterBy:{fullname:""}};var aa=Object(Zt.c)({boardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(Y.a)(Object(Y.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(Y.a)(Object(Y.a)({},e),{},{currBoard:Object(Y.a)({},t.board)});case"UPDATE_BOARD":return Object(Y.a)(Object(Y.a)({},e),{},{currBoard:t.board});case"CLEAN_BOARD":return Object(Y.a)(Object(Y.a)({},e),{},{currBoard:null});case"ADD_BOARD":return Object(Y.a)(Object(Y.a)({},e),{},{boards:[].concat(Object(R.a)(e.boards),[t.board]),currBoard:Object(Y.a)({},t.board)});case"SAVE_BOARD":return Object(Y.a)(Object(Y.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});default:return e}},cardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CARD":return Object(Y.a)(Object(Y.a)({},e),{},{currCard:Object(Y.a)({},t.card)});case"SET_GROUP":return Object(Y.a)(Object(Y.a)({},e),{},{currGroup:Object(Y.a)({},t.group)});case"CLEAR_STATE":return Object(Y.a)(Object(Y.a)({},e),{},{currGroup:t.clear,currCard:t.clear});case"TOGGLE_ADD_CARD":return Object(Y.a)(Object(Y.a)({},e),{},{isAddOpen:t.isAddOpen});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(Y.a)(Object(Y.a)({},e),{},{users:t.users});case"SET_USER":return Object(Y.a)(Object(Y.a)({},e),{},{loggedInUser:t.user});case"LOGIN":return Object(Y.a)(Object(Y.a)({},e),{},{loggedInUser:Object(Y.a)({},t.user)});case"LOGOUT":return Object(Y.a)(Object(Y.a)({},e),{},{loggedInUser:null});case"SIGNUP":return Object(Y.a)(Object(Y.a)({},e),{},{users:[].concat(Object(R.a)(e.users),[t.user]),loggedInUser:t.user});case"SET_FILTER":return Object(Y.a)(Object(Y.a)({},e),{},{filterBy:t.filterBy});default:return e}}}),ra=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Zt.d,na=Object(Zt.e)(aa,ra(Object(Zt.a)(Qt.a))),sa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ca=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,400)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),s(e),o(e)}))};a(353);c.a.render(Object(r.jsx)(i.a,{store:na,children:Object(r.jsx)(g.a,{children:Object(r.jsx)(Kt,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");sa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):oa(t,e)}))}}(),ca()}},[[354,1,2]]]);
//# sourceMappingURL=main.12bc7fe3.chunk.js.map