{"version":3,"sources":["services/httpService.js","services/sessionStorage.js","services/userService.js","store/actions/userAction.js","services/boardService.js","services/socketService.js","store/actions/boardAction.js","services/utilService.js","cmps/BoardHeader/AddBoard.jsx","cmps/AppHeader.jsx","cmps/BoardPreview.jsx","pages/Boards.jsx","cmps/AddMember.jsx","cmps/BoardHeader/BoardColors.jsx","cmps/BoardHeader/BoardPhotos.jsx","cmps/BoardHeader/ChangeBackground.jsx","cmps/BoardHeader/BoardMenu.jsx","cmps/BoardHeader/BoardHeader.jsx","cmps/Group/GroupAdd.jsx","services/eventBusService.js","store/actions/cardAction.js","cmps/Card/CardPreviewLabel.jsx","cmps/Card/CardPreviewBottom.jsx","cmps/Card/CardPreview.jsx","cmps/Card/CardList.jsx","cmps/Group/GroupTitle.jsx","cmps/Card/CardAdd.jsx","cmps/Group/GroupPreview.jsx","cmps/Group/GroupList.jsx","cmps/Group/GroupMenu.jsx","cmps/Card/CardHeader.jsx","cmps/Card/CardActivityContainer.jsx","services/cardService.js","cmps/Card/CardChecklist.jsx","cmps/Card/CardInfo.jsx","services/cloudinaryService.js","cmps/Card/CardCover.jsx","cmps/Card/CardLabels.jsx","cmps/Card/DatePicker.jsx","cmps/Card/CardSide.jsx","services/activityService.js","cmps/Card/CardDetails.jsx","cmps/Card/CardPreviewDetails.jsx","pages/BoardApp.jsx","pages/Login.jsx","pages/Login1.jsx","pages/Signup.jsx","pages/DashBoard.jsx","App.jsx","store/reducers/boardReducer.js","store/reducers/cardReducer.js","store/reducers/userReducer.js","store/store.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","window","location","assign","storageService","store","key","value","sessionStorage","JSON","stringify","load","defaultValue","parse","clear","STORAGE_KEY","userService","query","login","logout","signup","loadUser","credentials","user","_handleLogin","newUser","loadUsers","dispatch","users","type","userCred","boardService","remove","boardId","save","board","_id","getBoardById","getGroupIdxById","groupId","groupIdx","groups","findIndex","group","id","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","loadBoard","saveBoard","isRenderSocket","savedBoard","utilService","getRandomInt","makeId","length","text","possible","i","charAt","Math","floor","random","createTime","timeNow","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","timeString","getDueDate","timeStamp","stampDate","month","getMonth","day","getDate","convertName","fullname","letterName","names","split","toUpperCase","getTodoProgress","card","checklist","todos","doneTodos","filter","todo","isDone","total","done","getRandomColor","min","max","ceil","AddBoard","state","title","imgUrlLarge","imgUrlmedium","mounted","picked","onClose","setState","bgColors","setBgcImg","idx","prevState","onAddBoard","style","backgroundImage","backgroundImagePreview","props","addBoard","handleInput","target","name","this","CSSTransition","in","classNames","timeout","onExited","toggleAddBoard","className","onClick","map","color","src","alt","onChange","placeholder","autoComplete","Component","_AppHeader","loggedInUser","isAddBoardShow","newBoardId","history","push","prevProps","to","mapDispatchToProps","AppHeader","connect","userModule","boardModule","currBoard","withRouter","BoardPreview","width","backgroundColor","backgroundRepeat","backgroundSize","backgroundPosition","_Boards","loadBoards","boards","height","Boards","_AddMember","filterBy","handleChange","field","onSetUserFilter","onToggleUser","onUpdateMembers","members","toggleMembers","Input","currUser","AddMember","_BoardColors","imgUrl","getImgForBgc","toggleMenu","BoardColors","_BoardPhotos","photos","imgUrlSmall","useImgForBgc","photo","BoardPhotos","ChangeBackground","bgcFrom","chooseBgcFrom","from","onChangeBackground","_BoardMenu","mainRef","isChanging","ev","stopPropagation","ref","opacity","visibility","activities","activity","byMember","toGroup","txt","date","createdAt","BoardMenu","_BoardHeader","isWrapper","isMoreMembersShown","current","boardMenuVisibility","React","createRef","onSaveTitle","preventDefault","member","memberIdx","currMember","splice","currBoardId","onSubmit","onBlur","TransitionGroup","BoardHeader","GroupAdd","isAddOpen","openInput","closeInput","onSaveGroup","cards","onAddGroup","onScroll","autoFocus","eventBusService","listener","callListener","detail","addEventListener","removeEventListener","dispatchEvent","CustomEvent","setGroup","err","CardPreviewLabel","isLableTitleShown","toggleLableTitle","labels","label","CardPreviewBottom","progress","dueDate","now","comments","_CardPreview","onShowCard","setCard","showPreviewDetails","pos","newClientPosY","calculateClick","clientX","clientY","innerWidth","innerHeight","sumY","index","draggableId","provided","snapshot","draggableProps","innerRef","dragHandleProps","getItemStyle","isDragging","isDraggingOver","draggableStyle","userSelect","padding","margin","borderRadius","background","boxShadow","CardPreview","currCard","cardModule","CardList","scrollTop","getListStyle","paddingTop","paddingBottom","paddingLeft","position","scrolltobottom","refCard","groupTitle","refs","droppableId","droppableProps","_GroupTitle","textInput","updateBoard","showGroupMenu","dragHandle","GroupTitle","CardAdd","setTimeout","onSaveCard","onAddCard","required","cols","rows","onMouseDown","GroupPreview","grpTitle","GroupList","_GroupMenu","userClicked","onRemoveGroup","copyBoard","currGroup","onCopyGroup","zIndex","top","y","left","x","GroupMenu","CardHeader","onHandleInputChange","spellCheck","_CardActivityContainer","isSaveOpen","newComment","onHandleCommentChange","onToggleIsSaveOpen","isOpen","createComment","onSaveNewComment","comment","commentsCopy","unshift","Array","onHandleActivitiesChange","CardActivityContainer","cardService","createTodo","createChecklist","CardChecklist","newTodoTitle","onHandleTitleChange","onHandleChecklistChange","onHandleTodosChange","checked","updatedTodos","saveTodos","onRemoveTodo","addOrCancelChecklist","todosCopy","saveNewTodo","todoToSave","onHandleNewTodoChange","toggleIsAddOpen","progressBarPrecentage","acc","forEach","todosPrecent","CardInfo","moment","format","description","cloudinaryService","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","CardCover","isUploading","coverColors","onUploadImg","files","secure_url","onFinishUpload","setColor","onUpdateCoverColor","toggleCoverMenu","htmlFor","hidden","accept","_CardLabels","isCreateLabel","currLabel","colors","onEditClick","onHandleNewLabel","val","onToggleLabel","onAddLabel","labelsCopy","onHandleLabelsChange","clearNewLabel","onChooseLabel","checkForDuplicate","removeLabel","find","isClose","onToggleLabels","checkForMark","onRemoveLabel","toggleLabelMenu","CardLabels","DatePicker","onSavedueDate","substring","toggleDate","CardSide","isDateShown","isLabelsShown","isLabelsMenuShown","isCoverMenuShown","onRemoveCard","onAddChecklist","saveChanges","onUploadCardCoverImg","activityService","createActivity","action","moveTo","_CardDetails","initialCard","checklistValidation","isActivityUpdate","sendUpdatedBoard","cardIdx","toggleDetails","newCard","onDeleteCover","usersForDisplay","filterRegex","RegExp","test","clearState","CardDetails","_CardPreviewDetails","isChangeMembers","isChangeDueDate","modalRef","modalLabelRef","closeModal","showPreviewCardDetails","showMembers","showDueDate","onUpdateCard","copyCard","updatedCard","isSave","right","bottom","wrap","flexGrow","textAlign","CardPreviewDetails","_BoardApp","isDetailsShown","scrollLeft","isPreviewDetailsShown","isGroupMenuShown","refBoard","match","params","isUpdate","updatedLabels","onDragCard","sourceGroup","destinationGroup","onDragEnd","result","destination","source","dragGroup","draggingCard","scrolltoleft","eventBusTerminate","eventBusLabelTerminate","eventBusRemoveTerminate","eventBusShowPreviewDetailsTerminate","eventBusShowGroupMenuTerminate","cleanBoard","direction","BoardApp","_Login","username","password","onLogin","Container","component","maxWidth","CssBaseline","marginTop","display","flexDirection","alignItems","Avatar","Typography","variant","TextField","fullWidth","Button","Grid","container","item","xs","Link","href","Box","mt","Login","_Login1","initialValues","isSubmitting","as","disabled","Login1","_Signup","onSignUpUser","Signup","_DashBoard","showTaskPerGroup","mapGroup","reduce","Object","keys","values","datasets","hoverBackgroundColor","showTaskPerLabel","mapLabels","showTotalCards","cardNum","cardUnassignedNum","flexWrap","options","scales","yAxes","stacked","gridLines","xAxes","fontSize","legend","fontColor","DashBoard","App","path","Home","initialState","getItem","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","theStore","subscribe","getState","Boolean","hostname","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"kSAEMA,EACA,QAIFC,E,OAAQC,EAAMC,OAAO,CACrBC,iBAAiB,IAGRC,EAAc,SACnBC,EAAUC,GACV,OAAOC,EAAKF,EAAU,MAAOC,IAFxBF,EAAc,SAIlBC,EAAUC,GACX,OAAOC,EAAKF,EAAU,OAAQC,IALzBF,EAAc,SAOnBC,EAAUC,GACV,OAAOC,EAAKF,EAAU,MAAOC,IARxBF,EAAc,SAUhBC,EAAUC,GACb,OAAOC,EAAKF,EAAU,SAAUC,I,SAIzBC,E,8EAAf,WAAoBF,GAApB,+BAAAG,EAAA,6DAA8BC,EAA9B,+BAAuC,MAAOH,EAA9C,+BAAqD,KAArD,kBAE0BN,EAAM,CACpBU,IAAI,GAAD,OAAKX,GAAL,OAAgBM,GACnBI,SACAH,SALZ,cAEcK,EAFd,yBAOeA,EAAIL,MAPnB,sCASQM,QAAQC,IAAR,qBAA0BJ,EAA1B,yCAAiEJ,EAAjE,wBAAyFC,IACzFM,QAAQE,IAAR,MACI,KAAIC,UAAoC,MAAxB,KAAIA,SAASC,QAC7BC,OAAOC,SAASC,OAAO,YAZnC,+D,sBC1BO,IAAMC,EAAiB,CAC5BC,MAKF,SAAeC,EAAKC,GAClBC,eAAeF,GAAOG,KAAKC,UAAUH,IALrCI,KASF,SAAcL,GAA2B,IAAtBM,EAAqB,uDAAN,KAC5BL,EAAQC,eAAeF,GAC3B,OAAKC,EACOE,KAAKI,MAAMN,GADJK,GAVnBE,MAeF,WACEN,eAAeM,UChBjB,IAAMC,EAAc,eAGPC,EAAc,CACvBC,M,2CACAC,M,4CACAC,O,2CACAC,O,4CACAC,S,wFASJ,sBAAA7B,EAAA,+EACWJ,EAAA,SADX,4C,kEAIA,WAAqBkC,GAArB,eAAA9B,EAAA,sEAEuBJ,EAAA,aAA+BkC,GAFtD,cAEUC,EAFV,yBAGWC,EAAaD,IAHxB,4C,kEAMA,sBAAA/B,EAAA,6DACIY,EAAeU,QADnB,SAEU1B,EAAA,eAFV,4C,kEAMA,WAAsBkC,GAAtB,eAAA9B,EAAA,sEAE0BJ,EAAA,cAAgCkC,GAF1D,cAEUG,EAFV,yBAGWD,EAAaC,IAHxB,4C,kEAMA,4BAAAjC,EAAA,6DACU+B,EAAOnB,EAAeO,KAAKI,GADrC,kBAGWQ,GAHX,4C,sBAKA,SAASC,EAAaD,GAElB,OADAnB,EAAeC,MAAMU,EAAaQ,GAC3BA,EC9CJ,SAASG,IACZ,8CAAO,WAAOC,GAAP,eAAAnC,EAAA,+EAEqBwB,EAAYC,QAFjC,OAEOW,EAFP,OAGCD,EAAS,CAAEE,KAAM,YAAaD,UAH/B,gDAKChC,QAAQC,IAAI,4BAAZ,MALD,yDAAP,sDAUG,SAASqB,EAAMY,GAClB,8CAAO,WAAOH,GAAP,eAAAnC,EAAA,+EAEoBwB,EAAYE,MAAMY,GAFtC,OAEOP,EAFP,OAGCI,EAAS,CAAEE,KAAM,QAASN,SAH3B,gDAKC3B,QAAQC,IAAI,4BAAZ,MALD,yDAAP,sDCbG,IAAMkC,EAAe,CACxBd,MAOJ,WACI,OAAO7B,EAAA,UAPP4C,OAUJ,SAAgBC,GACZ,OAAO7C,EAAA,gBAA4B6C,KAVnCC,KAYJ,SAAcC,GACV,OAAIA,EAAMC,IACChD,EAAA,gBAAyB+C,EAAMC,KAAOD,GAEtC/C,EAAiB,QAAS+C,IAfrCE,eACAC,gB,+CAkBJ,SAASD,EAAaJ,GAClB,OAAO7C,EAAA,gBAAyB6C,I,4CAGpC,WAA+BA,EAASM,GAAxC,iBAAA/C,EAAA,+EAE4B6C,EAAaJ,GAFzC,cAEcE,EAFd,OAGcK,EAAWL,EAAMM,OAAOC,WAAU,SAAAC,GAAK,OAAIA,EAAMC,KAAOL,KAHtE,kBAIeC,GAJf,gCAMQ5C,QAAQC,IAAI,uCAAZ,MANR,0D,oDC1BagD,EAMb,WACE,IAAIC,EAkBJ,MAjBsB,CACpBC,MADoB,WAElBD,EAASE,IAX2C,KAatDC,GAJoB,SAIjBC,EAAWC,GACZL,EAAOG,GAAGC,EAAWC,IAEvBC,IAPoB,SAOhBF,EAAWC,GACbL,EAAOM,IAAIF,EAAWC,IAExBE,KAVoB,SAUfH,EAAW5D,GACdwD,EAAOO,KAAKH,EAAW5D,IAEzBgE,UAboB,WAclBR,EAAS,OAtBcS,GCWtB,SAASC,EAAUvB,GACtB,8CAAO,WAAON,GAAP,eAAAnC,EAAA,+EAEqBuC,EAAaM,aAAaJ,GAF/C,OAEOE,EAFP,OAGCvC,QAAQC,IAAI,sBAAuBsC,GACnCR,EAAS,CAAEE,KAAM,YAAaM,UAJ/B,gDAMCvC,QAAQC,IAAI,6BAAZ,MAND,yDAAP,sDAWG,SAAS4D,EAAUtB,GAAgC,IAAzBuB,EAAwB,wDACrD,8CAAO,WAAO/B,GAAP,eAAAnC,EAAA,+EAE0BuC,EAAaG,KAAKC,GAF5C,OAEOwB,EAFP,OAIMD,GACDb,EAAcQ,KAAK,SAAUlB,GAGjCR,EAAS,CAAEE,KAAOM,EAAMC,IAAO,eAAiB,YAAaD,MAAOwB,IARrE,gDAUC/D,QAAQC,IAAI,6BAAZ,MAVD,yDAAP,sDDrBJI,OAAO4C,cAAgBA,EENhB,IAAMe,EAAc,CACzBC,eACAC,OAeF,WAGE,IAH2B,IAAbC,EAAY,uDAAH,EACnBC,EAAO,GACPC,EAAW,iEACNC,EAAI,EAAGA,EAAIH,EAAQG,IAC1BF,GAAQC,EAASE,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,EAASF,SAE9D,OAAOC,GApBPO,WAuBF,WACE,IAAIC,EAAU,IAAIC,KACdC,EAAQF,EAAQG,WAChBC,EAAUJ,EAAQK,aAClBC,EAAUN,EAAQO,aAClBC,EAAa,IAAON,EAAQ,GAAMA,EAAQ,GAAKA,GAGnD,OAFAM,IAAgBJ,EAAU,GAAM,KAAO,KAAOA,EAC9CI,IAAgBF,EAAU,GAAM,KAAO,KAAOA,GA7B9CG,WAiCF,SAAoBC,GAClB,IAAIC,EAAY,IAAIV,KAAKS,GAGnBE,EAFY,CAAC,MAAO,MAAO,MAAO,MACtC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3BD,EAAUE,YAC5BC,EAAMH,EAAUI,UAEtB,MADU,UAAMH,EAAN,YAAeE,IAtCzBE,YA0CF,SAAqBC,GACnB,IAAKA,EAAU,OACf,IAAIC,EACEC,EAAQF,EAASG,MAAM,KAExBF,EADAC,EAAM,GACOA,EAAM,GAAG,GAAGE,cAAgBF,EAAM,GAAG,GAAGE,cAD9BF,EAAM,GAAG,GAAGE,cAExC,OAAOH,GA/CPI,gBAkDF,SAAyBC,GACvB,GAAIA,EAAKC,UAAW,CAAC,IACXC,EAAUF,EAAKC,UAAfC,MACJC,EAAYD,EAAME,QAAO,SAAAC,GAAI,OAAIA,EAAKC,UAE1C,MADiB,CAAEC,MAAOL,EAAMlC,OAAQwC,KAAML,EAAUnC,QAGrD,QAxDLyC,eA2DF,WAGE,MAFa,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAEvD3C,EAAa,EAAG,MA1DhC,SAASA,EAAa4C,EAAKC,GAGzB,OAFAD,EAAMrC,KAAKuC,KAAKF,GAChBC,EAAMtC,KAAKC,MAAMqC,GACVtC,KAAKC,MAAMD,KAAKE,UAAYoC,EAAMD,IAAQA,E,4BCXtCG,EAAb,4MAEIC,MAAQ,CACJ1E,MAAO,CACH2E,MAAO,GACPC,YAAa,GACbC,aAAc,IAElBC,SAAS,EACTC,OAAQ,IAThB,EAgBIC,QAAU,WACN,EAAKC,SAAS,CAAEH,SAAS,KAjBjC,EAyBII,SAAW,WAEP,MAAO,CAAC,CAAEN,YAAa,uHAAwHC,aAAc,uHAC7J,CAAED,YAAa,mHAAoHC,aAAc,mHACjJ,CAAED,YAAa,gHAAiHC,aAAc,gHAC9I,CAAED,YAAa,mHAAoHC,aAAc,mHACjJ,CAAED,YAAa,sGAAuGC,aAAc,sGACpI,CAAED,YAAa,iFAAkFC,aAAa,kFAC9G,CAAED,YAAa,sFAAuFC,aAAa,uFACnH,CAAED,YAAa,8EAA+EC,aAAa,+EAC3G,CAAED,YAAa,qFAAsFC,aAAc,wFAnC3H,EAsCIM,UAAY,SAACP,EAAaC,EAAcO,GACpC3H,QAAQC,IAAI,oBAAqBkH,GACjC,EAAKK,UAAS,SAAAI,GACV,MAAO,CAACrF,MAAM,2BAAMqF,EAAUrF,OAAjB,IAAwB4E,cAAaC,qBAEtD,EAAKI,SAAS,CAAEF,OAAQK,KA3ChC,EA8CIE,WAAa,WAAO,IAAD,EAC8B,EAAKZ,MAAM1E,MAClDA,EAAQ,CAAE2E,MAFD,EACPA,MACeY,MAAO,CAACC,gBAFhB,EACAZ,YAC8Ca,uBAF9C,EACaZ,eAE5B,EAAKa,MAAMC,SAAS3F,GACpB,EAAKgF,WAlDb,EAqDIY,YAAc,YAAiB,IAAdC,EAAa,EAAbA,OACLC,EAASD,EAATC,KACA1H,EAAUyH,EAAVzH,MACR,EAAK6G,UAAS,SAAAI,GACV,MAAO,CACHrF,MAAM,2BACCqF,EAAUrF,OADZ,kBAEA8F,EAAO1H,QAGjB,kBAAMX,QAAQC,IAAI,cAAc,EAAKgH,MAAM1E,MAAM2E,WA/D5D,kEAaQoB,KAAKd,SAAS,CAAEH,SAAS,MAbjC,+BAkEc,IAAD,SACuBiB,KAAKrB,MAAzBI,EADH,EACGA,QAASC,EADZ,EACYA,OACjB,OACI,cAACiB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAMW,eAAlF,SACA,sBAAKC,UAAU,8BAAf,UACA,sBAAKA,UAAU,qCAAf,UACI,kDAAyB,wBAAQC,QAASR,KAAKf,QAAtB,uBAEzB,qBAAKsB,UAAU,qBAAf,SACSP,KAAKb,WAAWsB,KAAI,SAACC,EAAOrB,GACzB,OAAO,qBAAKkB,UAAYvB,IAAWK,EAAM,yBAA0B,kBAC/DmB,QAAS,kBAAM,EAAKpB,UAAUsB,EAAM7B,YAAa6B,EAAM5B,aAAcO,IADlE,SACwE,qBAAKsB,IAAKD,EAAM5B,aAAc8B,IAAI,MADtBvB,QAIvG,uBAAO1F,KAAK,OAAOoG,KAAK,QAAQ1H,MAAO2H,KAAKrB,MAAMC,MAAOiC,SAAUb,KAAKH,YACpEU,UAAU,kBAAkBO,YAAY,yBAAyBC,aAAa,QAC9E,wBAAQP,QAASR,KAAKT,WAAYgB,UAAU,mBAA5C,mCAlFpB,GAA8BS,a,QCMxBC,E,4MAEJtC,MAAQ,CACNuC,aAAc,KACdC,gBAAgB,G,EAiBlBb,eAAiB,WACf,EAAKpB,SAAS,CAAEiC,gBAAiB,EAAKxC,MAAMwC,kB,EAG9CvB,S,uCAAW,WAAO3F,GAAP,eAAA3C,EAAA,sEACH,EAAKqI,MAAMpE,UAAUtB,GAAO,GADzB,OAEHmH,EAAa,EAAKzB,MAAM1F,MAAMC,IACpCxC,QAAQC,IAAI,aAAcyJ,GAC1B,EAAKzB,MAAM0B,QAAQC,KAAnB,KACA,EAAK3B,MAAM0B,QAAQC,KAAnB,gBAAiCF,IALxB,2C,wPAhBUpB,KAAKL,MAAMxG,W,QAAxBE,E,SACI2G,KAAKd,SAAS,CAAEgC,aAAc7H,I,+IAGvBkI,EAAWjC,GAIxBU,KAAKL,MAAMuB,eAAiBlB,KAAKrB,MAAMuC,cACzClB,KAAKd,SAAS,CAAEgC,aAAclB,KAAKL,MAAMuB,iB,+BAepC,MAEkClB,KAAKrB,MAAtCuC,EAFD,EAECA,aAAcC,EAFf,EAEeA,eAGtB,OACE,qCACGA,GAAkB,cAAC,EAAD,CAAUvB,SAAUI,KAAKJ,SAAUU,eAAgBN,KAAKM,iBAC3E,yBAAQC,UAAU,gCAAlB,UACE,8BACE,qBAAIA,UAAU,kCAAd,UACE,6BAAK,cAAC,IAAD,CAAMiB,GAAG,IAAIjB,UAAU,WAAvB,SAAkC,qBAAKI,IAAI,8EAA8EC,IAAI,SAClI,6BAAK,cAAC,IAAD,CAAMY,GAAG,UAAUjB,UAAU,aAA7B,2BAGT,6BAAK,cAAC,IAAD,CAAMiB,GAAG,IAAIjB,UAAU,eAAvB,sBACL,sBAAKA,UAAU,oBAAf,UACE,wBAAQA,UAAU,uBAAuBC,QAASR,KAAKM,eAAvD,SAAuE,qBAAKK,IAAI,8EAA8EC,IAAI,OACjKM,GAAgB,yCAAG,qBAAKX,UAAU,wBAAf,SAAwC7E,EAAY4B,YAAY4D,EAAa3D,YAAhF,IAAiG,wBAAQgD,UAAU,uBAAuBC,QAASR,KAAKL,MAAM1G,OAA7D,yBAChHiI,GAAgB,0CAAI,sBAAKX,UAAU,wBAAf,UAAwC,KAAxC,OAAJ,IAAyD,wBAAQA,UAAU,uBAAlB,SAAyC,cAAC,IAAD,CAAMiB,GAAG,SAAT,qC,GApDvGR,aAkEnBS,GAAqB,CACzBxI,ONnDK,WACH,8CAAO,WAAOQ,GAAP,SAAAnC,EAAA,+EAEOwB,EAAYG,SAFnB,OAGCQ,EAAS,CAAEE,KAAM,WAHlB,+CAKCjC,QAAQC,IAAI,6BAAZ,MALD,wDAAP,uDMmDFwB,SN9BK,SAAkBS,GACrB,8CAAO,WAAOH,GAAP,eAAAnC,EAAA,+EAEoBwB,EAAYK,SAASS,GAFzC,OAEOP,EAFP,OAGCI,EAAS,CAAEE,KAAM,WAAYN,SAH9B,gDAKC3B,QAAQC,IAAI,2BAAZ,MALD,yDAAP,uDM8BF4D,aAGWmG,GAAYC,aAZK,SAAChD,GAC7B,MAAO,CACLuC,aAAcvC,EAAMiD,WAAWV,aAC/BjH,MAAO0E,EAAMkD,YAAYC,aAS2BL,GAA/BE,CAAmDI,YAAWd,I,UC/EhF,SAASe,GAAT,GAAkC,IAAV/H,EAAS,EAATA,MAC3B,OACI,cAAC,IAAD,CAAMuF,MAAO,CAAEyC,MAAO,SAAWT,GAAE,iBAAYvH,EAAMC,KAArD,SACI,qBAAKsF,MAAO,CACRC,gBAAgB,OAAD,OAASxF,EAAMuF,MAAME,uBAArB,KAAgDwC,gBAAiB,UAChFC,iBAAkB,YAClBC,eAAgB,QAChBC,mBAAoB,UAErB9B,UAAU,gBANb,SAOI,6BAAMtG,EAAM2E,Y,wBCNf0D,GAAb,4MAaI1C,SAbJ,sBAae,4BAAAtI,EAAA,6DACD2C,EAAQ,CAAE2E,MAAO,YAAaY,MAAO,IADpC,SAED,EAAKG,MAAMpE,UAAUtB,GAAO,GAF3B,OAGPvC,QAAQC,IAAI,mBAAoBsC,GAChC,EAAK0F,MAAM0B,QAAQC,KAAnB,gBAAiC,EAAK3B,MAAM1F,MAAMC,MAJ3C,2CAbf,kEAEQ8F,KAAKL,MAAM4C,eAFnB,+BA6Bc,IACEC,EAAWxC,KAAKL,MAAhB6C,OACR,OAAKA,EAGD,sBAAKjC,UAAU,cAAf,UACI,4CACA,0BAASA,UAAU,mBAAnB,UACI,qBAAKA,UAAU,YAAYC,QAASR,KAAKJ,SAAzC,SAAmD,qBAAKe,IAAI,8EAA8EC,IAAI,OAC7I4B,EAAO/B,KAAI,SAAAxG,GACR,OAAO,cAAC+H,GAAD,CAA8B/H,MAAOA,GAAlBA,EAAMC,cAR5B,qBAAKqG,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,YA/BtJ,GAA6BY,aAuDvBS,GAAqB,CACvBc,WL3DG,WACH,8CAAO,WAAO9I,GAAP,eAAAnC,EAAA,+EAEsBuC,EAAad,QAFnC,OAEOyJ,EAFP,OAGC/I,EAAS,CAAEE,KAAM,aAAc6I,WAHhC,gDAKC9K,QAAQC,IAAI,8BAAZ,MALD,yDAAP,uDK2DA4D,aAMSmH,GAASf,aAhBE,SAAAhD,GACpB,MAAO,CACH6D,OAAQ7D,EAAMkD,YAAYW,OAC1BvI,MAAO0E,EAAMkD,YAAYC,aAacL,GAAzBE,CAA6CW,I,mBC/DtDK,GAAb,4MAEIhE,MAAQ,CACJI,SAAS,EACT6D,SAAU,CACNrF,SAAU,KALtB,EAaI0B,QAAU,WACN,EAAKC,SAAS,CAAEH,SAAS,KAdjC,EAiBI8D,aAAe,YAAiB,IAAd/C,EAAa,EAAbA,OACRgD,EAAQhD,EAAOC,KACf1H,EAAQyH,EAAOzH,MAErB,EAAK6G,UAAS,SAAAI,GAAS,MAAK,CAAEsD,SAAS,2BAAMtD,EAAUsD,UAAjB,kBAA4BE,EAAQzK,QAAY,WAClF,EAAKsH,MAAMoD,gBAAgB,EAAKpE,MAAMiE,cAtBlD,EA0BII,aAAe,SAAC3J,GACZ,EAAKsG,MAAMsD,gBAAgB5J,IA3BnC,kEAUQ2G,KAAKd,SAAS,CAAEH,SAAS,MAVjC,+BA+Bc,IAAD,SACsBiB,KAAKL,MAAxBjG,EADH,EACGA,MAAOwJ,EADV,EACUA,QADV,EAEyBlD,KAAKrB,MAA3BiE,EAFH,EAEGA,SAAU7D,EAFb,EAEaA,QAElB,OACI,cAACkB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAMwD,cAAlF,SACI,sBAAK5C,UAAU,mCAAf,UACI,sBAAKA,UAAU,uCAAf,UACI,yCACA,wBAAQC,QAASR,KAAKf,QAASsB,UAAU,mBAAzC,uBAEJ,cAAC6C,GAAA,EAAD,CAAOzJ,KAAK,OAAOoG,KAAK,WAAW1H,MAAOuK,EAASrF,SAAUsD,SAAUb,KAAK6C,aAAc/B,YAAY,sBACtG,qBAAKP,UAAU,8BAAf,SACK7G,EAAM+G,KAAI,SAAApH,GAAI,OAAI,sBAAoBkH,UAAU,kCAAkCC,QAAS,kBAAM,EAAKwC,aAAa3J,IAAjG,UACf,sBAAKkH,UAAU,qBAAf,UAAoC,qBAAKA,UAAU,cAAcf,MAAO,CAAC0C,gBAAiB7I,EAAKqH,MAAOrH,EAAKqH,MAAO,WAA9E,SAA0F,+BAAOhF,EAAY4B,YAAYjE,EAAKkE,cAE9J,4BAAIlE,EAAKkE,cACb,wBAAQgD,UAAY2C,EAAQ1I,WAAU,SAAA6I,GAAQ,OAAIA,EAASnJ,MAAQb,EAAKa,QAAQ,EAC5E,iBAAmB,mBADvB,SAEI,qBAAKyG,IAAI,iFAAiFC,IAAI,SANzEvH,EAAKa,mBA5C1D,GAAgC8G,aAyEnBsC,GAAY3B,aAbD,SAAAhD,GACpB,MAAO,KAQgB,GAIFgD,CAA6CgB,IC3EhEY,G,4MACJpE,SAAW,WAET,MAAO,CAAC,CAAEqE,OAAQ,iFAClB,CAAEA,OAAQ,mFACV,CAAEA,OAAQ,oFACV,CAAEA,OAAQ,oFACV,CAAEA,OAAQ,oFACV,CAAEA,OAAQ,kFACV,CAAEA,OAAQ,kFACV,CAAEA,OAAQ,mFACV,CAAEA,OAAQ,mFACV,CAAEA,OAAQ,mF,EAEZC,a,uCAAe,WAAOD,GAAP,eAAAlM,EAAA,6DACLwK,EAAc,EAAKnC,MAAnBmC,WACEtC,MAAMC,gBAAkB+D,EAFrB,SAGP,EAAK7D,MAAMpE,UAAUuG,GAHd,OAIb,EAAKnC,MAAM+D,aAJE,2C,6GAML,IAAD,OACP,OACE,qBAAKnD,UAAU,mCAAf,SACGP,KAAKb,WAAWsB,KAAI,SAACC,EAAOrB,GAAU,OAAO,qBAAKkB,UAAU,eAAf,SAAyC,qBAAMA,UAAU,oBAAoBC,QAAS,kBAAM,EAAKiD,aAAa/C,EAAM8C,SAAS7C,IAAKD,EAAM8C,OAAQ5C,IAAI,cAAjHvB,Y,GAvB9D2B,aAgCrBS,GAAqB,CACzBlG,aAIWoI,GAAchC,aATH,SAAChD,GAAD,MAAY,CAClCmD,UAAWnD,EAAMkD,YAAYC,aAQqBL,GAAzBE,CAA6C4B,ICrClEK,G,4MAGJC,OAAS,WACP,MAAO,CAAC,CAAEhF,YAAa,+GAAgHC,aAAc,8GAA+GgF,YAAa,+GACjR,CAAEjF,YAAa,6GAA8GC,aAAc,4GAA6GgF,YAAa,6GACrQ,CAAEjF,YAAa,sHAAuHC,aAAc,qHAAsHgF,YAAa,sHACvR,CAAEjF,YAAa,uHAAwHC,aAAc,sHAAuHgF,YAAa,uHACzR,CAAEjF,YAAa,mHAAoHC,aAAc,kHAAmHgF,YAAa,mHACjR,CAAEjF,YAAa,gHAAiHC,aAAc,+GAAgHgF,YAAa,gHAC3Q,CAAEjF,YAAa,mHAAoHC,aAAc,kHAAmHgF,YAAa,mHACjR,CAAEjF,YAAa,sGAAuGC,aAAc,qGAAsGgF,YAAa,sGACvP,CAAEjF,YAAa,qGAAsGC,aAAc,oGAAsGgF,YAAa,qGACtP,CAAEjF,YAAa,oGAAqGC,aAAc,mGAAoGgF,YAAa,oGACnP,CAAEjF,YAAa,+GAAgHC,aAAc,0GAA4GgF,YAAa,2GACtQ,CAAEjF,YAAa,oGAAqGC,aAAc,mGAAoGgF,YAAa,sG,EAKrPC,a,uCAAe,WAAOlF,EAAaC,GAApB,eAAAxH,EAAA,6DACLwK,EAAc,EAAKnC,MAAnBmC,WACEtC,MAAMC,gBAAkBZ,EAClCiD,EAAUtC,MAAME,uBAAyBZ,EAH5B,SAIP,EAAKa,MAAMpE,UAAUuG,GAJd,OAKb,EAAKnC,MAAM+D,aALE,2C,+GAOL,IAAD,OACP,OACE,qBAAKnD,UAAU,mCAAf,SACGP,KAAK6D,SAASpD,KAAI,SAACuD,EAAO3E,GAAU,OAAO,qBAAekB,UAAU,eAAzB,SAAwC,qBAAKC,QAAS,kBAAM,EAAKuD,aAAaC,EAAMnF,YAAamF,EAAMlF,eAAeyB,UAAU,oBAAoBI,IAAKqD,EAAMF,YAAalD,IAAI,cAAtKvB,Y,GA9BnC2B,aAwCrBS,GAAqB,CACzBlG,aAIW0I,GAActC,aATH,SAAChD,GAAD,MAAY,CAClCmD,UAAWnD,EAAMkD,YAAYC,aAQqBL,GAAzBE,CAA6CiC,IC7C3DM,GAAb,4MACEvF,MAAQ,CACNwF,QAAS,MAFb,EAIEC,cAAgB,SAACC,GACf,EAAKnF,SAAS,CAAEiF,QAASE,KAL7B,uDAOY,IAAD,SACoCrE,KAAKL,MAAxC2E,EADD,EACCA,mBAAoBZ,EADrB,EACqBA,WACpBS,EAAYnE,KAAKrB,MAAjBwF,QACR,OACE,qCACE,qBAAK5D,UAAU,kBAAf,SAAiC,wBAAQC,QAAS8D,EAAjB,oBACjC,sBAAK/D,UAAU,iCAAf,WAEI4D,GACA,sBAAK5D,UAAU,oBAAf,UACE,sBAAKA,UAAU,2BAAf,UAA0C,qBAAKC,QAAS,kBAAM,EAAK4D,cAAc,WAAW7D,UAAU,eACpG,6CAEF,sBAAKA,UAAU,2BAAf,UACE,qBAAKC,QAAS,kBAAM,EAAK4D,cAAc,WAAW7D,UAAU,oBAC5D,gDAEO,WAAZ4D,GAAwB,cAACF,GAAD,CAAaP,WAAYA,IACrC,WAAZS,GAAwB,cAACR,GAAD,CAAaD,WAAYA,cAzB5D,GAAsC1C,a,oBCEhCuD,G,uKACM,IAAD,EACgEvE,KAAKL,MAApE+D,EADD,EACCA,WAAYc,EADb,EACaA,QAASF,EADtB,EACsBA,mBAAoBG,EAD1C,EAC0CA,WAAYxK,EADtD,EACsDA,MAC7D,OACE,qBAAKsG,UAAU,wCAAwCC,QAAS,SAAAkE,GAAE,OAAIA,EAAGC,mBAAmBC,IAAKJ,EAAShF,MAAO,CAAEqF,QAAS,IAAKC,WAAY,SAAU7C,MAAO,GAA9J,SAEE,0BAAS1B,UAAU,iBAAnB,UACE,sBAAKA,UAAU,sCAAf,UACE,oBAAIA,UAAU,mBAAd,kBACA,oBAAIA,UAAU,mBAAmBC,QAASkD,EAA1C,wBAGAe,GACA,qCACE,qBAAKlE,UAAU,+BAAf,SACE,wBAAQC,QAAS8D,EAAjB,iCAEF,sBAAK/D,UAAU,sBAAf,UACE,+BACE,qBAAKA,UAAU,WAAWI,IAAI,oFAAoFC,IAAI,OACjH,6CAET,yBAASL,UAAU,qBAAnB,SACGtG,EAAM8K,YAAc9K,EAAM8K,WAAWtE,KAAI,SAACuE,EAAU3F,GAAX,eACxC,sBAAKkB,UAAU,gCAAf,UACE,qBAAKA,UAAU,SAAf,SAAyByE,EAASC,SAAWvJ,EAAY4B,YAAY0H,EAASC,SAAS1H,UAAY,MAEnG,sBAAKgD,UAAU,mBAAf,WACIyE,EAASE,SAAW,8BAAIF,EAASC,SAAWD,EAASC,SAAS1H,SAAW,QAArD,KAAgEyH,EAASG,IAAzE,UACnBH,EAASnH,YADU,aACnB,EAAee,MADI,cACIoG,EAASvK,aADb,aACI,EAAgBmE,SAEzCoG,EAASE,SAAW,8BAAIF,EAASC,SAAWD,EAASC,SAAS1H,SAAW,QAArD,KAAgEyH,EAASG,IAAzE,QACdH,EAASvK,MAAMmE,MADD,OACYoG,EAASE,QAAQtG,SAElD,cAAC,KAAD,CAAS2B,UAAU,gBAAgB6E,KAAMJ,EAASK,iBAVFhG,WAgB3DoF,GAAc,cAAC,GAAD,CAAkBf,WAAYA,EAAYY,mBAAoBA,a,GAxC9DtD,aA6DZsE,GAAY3D,aAbD,SAAAhD,GACtB,MAAO,CACL1E,MAAO0E,EAAMkD,YAAYC,aAIF,GAOFH,CAA6C4C,I,UCxDzDgB,GAAb,4MAEE5G,MAAQ,CACN1E,MAAO,CACL2E,MAAO,IAET6F,YAAY,EACZe,WAAW,EACXC,oBAAoB,GARxB,EA+BE/B,WAAa,WAAO,IACVgC,EAAY,EAAKC,oBAAjBD,QACsB,MAA1BA,EAAQlG,MAAMqF,SAChBa,EAAQlG,MAAMqF,QAAU,IACxBa,EAAQlG,MAAMsF,WAAa,UAC3BY,EAAQlG,MAAMyC,MAAQ,SAEa,MAA1ByD,EAAQlG,MAAMqF,UACvBa,EAAQlG,MAAMqF,QAAU,IACxBa,EAAQlG,MAAMsF,WAAa,SAC3BY,EAAQlG,MAAMyC,MAAQ,KAExB,EAAK/C,SAAS,CAAEuF,YAAY,EAAOe,WAAY,EAAK7G,MAAM6G,aA3C9D,EA6CElB,mBAAqB,WACnB,EAAKpF,SAAS,CAAEuF,YAAa,EAAK9F,MAAM8F,cA9C5C,EAiDEkB,oBAAsBC,IAAMC,YAjD9B,EAmDEhG,YAAc,YAAiB,IAAdC,EAAa,EAAbA,OACPC,EAASD,EAATC,KACF1H,EAAQyH,EAAOzH,MACrB,EAAK6G,UAAS,SAAAI,GACZ,MAAO,CACLrF,MAAM,2BACDqF,EAAUrF,OADV,kBAEF8F,EAAO1H,SA1DlB,EAgEEyN,YAhEF,uCAgEgB,WAAOpB,GAAP,iBAAApN,EAAA,6DACZoN,EAAGqB,iBACK9L,EAAU,EAAK0F,MAAf1F,MACA2E,EAAU,EAAKD,MAAM1E,MAArB2E,MACR3E,EAAM2E,MAAQA,EAJF,SAKN,EAAKe,MAAMpE,UAAUtB,GALf,2CAhEhB,wDAwEEkJ,cAAgB,WACd,EAAKjE,SAAS,CAAEuG,oBAAqB,EAAK9G,MAAM8G,sBAzEpD,EA4EExC,gBA5EF,uCA4EoB,WAAO+C,GAAP,iBAAA1O,EAAA,6DACR2C,EAAU,EAAK0F,MAAf1F,OACFgM,EAAYhM,EAAMiJ,QAAQ1I,WAAU,SAAA0L,GAAU,OAAIA,EAAWhM,MAAQ8L,EAAO9L,SACjE,EACfD,EAAMiJ,QAAQiD,OAAOF,EAAW,GAEhChM,EAAMiJ,QAAQ5B,KAAK0E,GANL,SAQV,EAAKrG,MAAMpE,UAAUtB,GARX,2CA5EpB,wDAuFE8I,gBAAkB,SAACH,GACjBlL,QAAQC,IAAI,kBAAmBiL,IAxFnC,kEAaI5C,KAAKL,MAAMnG,YACXwG,KAAKd,SAAS,CAAEjF,MAAO,CAAE2E,MAAOoB,KAAKL,MAAM1F,MAAM2E,WAdrD,yCAiBqB2C,GAAY,IAAD,OAExBvB,KAAKL,MAAM1F,MAAM2E,QAAU2C,EAAUtH,MAAM2E,OAC7CoB,KAAKd,UAAS,SAAAI,GAAS,MAAK,CAC1BrF,MAAM,2BACDqF,EAAUrF,OADV,IAEH2E,MAAO,EAAKe,MAAM1F,MAAM2E,cAvBlC,+BA+FY,IAAD,EACoBoB,KAAKL,MAAxBuD,EADD,EACCA,QAASxJ,EADV,EACUA,MADV,EAEsDsG,KAAKrB,MAA1D1E,EAFD,EAECA,MAAOwK,EAFR,EAEQA,WAAYe,EAFpB,EAEoBA,UAAWC,EAF/B,EAE+BA,mBAChCW,EAAcpG,KAAKL,MAAM1F,MAAMC,IACrC,OAAKD,GAAUmM,EAEb,qCACGX,GAAsB,qBAAKlF,UAAU,0BAAf,SAAyC,cAAC+C,GAAD,CAAWH,cAAenD,KAAKmD,cAAeF,gBAAiBjD,KAAKiD,gBAClIF,gBAAiB/C,KAAK+C,gBAAiBG,QAASA,EAASxJ,MAAOA,MAClE,yBAAQ6G,UAAU,kCAAlB,UACE,sBAAKA,UAAU,sBAAf,UAEE,sBAAM8F,SAAUrG,KAAK8F,YAAaQ,OAAQtG,KAAK8F,YAAavF,UAAU,sCAAtE,SACE,uBAAO5G,KAAK,OAAOoG,KAAK,QAAQ1H,MAAO4B,EAAM2E,MAAOiC,SAAUb,KAAKH,YACjEU,UAAU,oBAAoBO,YAAY,uBAAuBC,aAAa,UAElF,cAAC,IAAD,CAAMS,GAAE,iBAAY4E,EAAZ,cAAR,SACE,yBAAQ7F,UAAU,qCAAlB,UACE,4CACA,qBAAKI,IAAI,mFAAmFC,IAAI,UAGpG,sBAAKL,UAAU,sBAAf,UACE,oBAAIA,UAAU,mBAAd,SACE,cAACgG,GAAA,EAAD,CAAiBhG,UAAU,oBAA3B,SACG2C,EAAQzC,KAAI,SAACuF,EAAQ3G,GAAT,OACX,cAACY,EAAA,EAAD,CAAyBG,QAAS,IAAKD,WAAW,OAAlD,SACE,oBAA0BI,UAAU,gBAAgBf,MAAO,CAAE0C,gBAAiB8D,EAAOtF,MAAQsF,EAAOtF,MAAQ,WAA5G,SACGhF,EAAY4B,YAAY0I,EAAOzI,WADzByI,EAAOzI,WADE8B,UAQ1B,wBAAQkB,UAAU,aAAaC,QAASR,KAAKmD,cAA7C,SACE,qBAAKxC,IAAI,kFAAkFC,IAAI,aAKrG,cAAC0E,GAAD,CACE5B,WAAY1D,KAAK0D,WACjBc,QAASxE,KAAK2F,oBACdrB,mBAAoBtE,KAAKsE,mBACzBG,WAAYA,IAIbe,GAAa,qBAAKjF,UAAU,qBAAqBC,QAAUgF,EAAaxF,KAAK0D,WAAa,eAE3F,wBAAQnD,UAAU,WAAWC,QAASR,KAAK0D,WAA3C,SAAuD,qBAAK/C,IAAI,8EAA8EC,IAAI,aA9CrH,qBAAKL,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,YAnGjK,GAAkCY,aAiK5BS,GAAqB,CACzBlG,YACA/B,aAKWgN,GAAc7E,aAhBH,SAAAhD,GACtB,MAAO,CACL1E,MAAO0E,EAAMkD,YAAYC,UACzBpI,MAAOiF,EAAMiD,WAAWlI,SAawB+H,GAAzBE,CAA6C4D,IChL3DkB,GAAb,4MAEI9H,MAAQ,CACJ+H,WAAW,EACXjM,MAAO,CACHmE,MAAO,KALnB,EASI+H,UAAY,WACR,EAAKzH,SAAS,CACVwH,WAAW,KAXvB,EAeIE,WAAa,WACT,EAAK1H,SAAS,CACVwH,WAAW,KAjBvB,EAqBIG,YAAc,SAACnC,GACXA,EAAGqB,iBACH,IAAMtL,EAAQ,CAAEmE,MAAO,EAAKD,MAAMlE,MAAMmE,MAAOlE,GAAIgB,EAAYE,SAAUkL,MAAO,IAChF,EAAKnH,MAAMoH,WAAWtM,GACtB,EAAKyE,SACD,CACIzE,MAAO,CAAEmE,MAAO,IAChB8H,WAAW,IACZ,kBAAM,EAAK/G,MAAMqH,SAAS,KAAM,SA7B/C,EAgCInH,YAAc,YAAiB,IAAdC,EAAa,EAAbA,OACLC,EAASD,EAATC,KACA1H,EAAUyH,EAAVzH,MACR,EAAK6G,UAAS,SAAAI,GACV,MAAO,CACH7E,MAAM,2BACC6E,EAAU7E,OADZ,kBAEAsF,EAAO1H,SAvC5B,uDA6Cc,IAAD,EACwB2H,KAAKrB,MAA1B+H,EADH,EACGA,UAAWjM,EADd,EACcA,MACnB,OAAO,0BAAS8F,UAAU,sBAAnB,UACFmG,GACG,uBAAML,SAAUrG,KAAK6G,YAAatG,UAAU,iBAA5C,UACI,uBAAO5G,KAAK,OAAOoG,KAAK,QAAQ1H,MAAOoC,EAAMmE,MAAOiC,SAAUb,KAAKH,YAC/DU,UAAU,WAAWO,YAAY,uBAAuBmG,WAAS,EAAClG,aAAa,QACnF,gCACI,wBAAQR,UAAU,mBAAlB,uBACA,wBAAQC,QAASR,KAAK4G,WAAYrG,UAAU,kBAA5C,SAA+D,qBAAKI,IAAI,+EAA+EC,IAAI,cAIrK8F,GAAa,yBAAQnG,UAAU,gBAAgBC,QAASR,KAAK2G,UAAhD,UACX,qBAAKhG,IAAI,8EAA8EC,IAAI,KAC3F,+DA5DhB,GAA8BI,aCYvB,IAAMkG,GAAkB,CAAEnM,GAfjC,SAAYC,EAAWmM,GACrB,IAAMC,EAAe,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACpBF,EAASE,IAGb,OADAtP,OAAOuP,iBAAiBtM,EAAWoM,GAC5B,WACHrP,OAAOwP,oBAAoBvM,EAAWoM,KASPjM,KALrC,SAAcH,EAAW5D,GACvBW,OAAOyP,cAAc,IAAIC,YAAYzM,EAAW,CAAEqM,OAAQjQ,OCArD,SAASsQ,GAASjN,GACvB,OAAO,SAAChB,GACN,IACEA,EAAS,CAAEE,KAAM,YAAac,UAC9B,MAAOkN,GACPjQ,QAAQC,IAAI,2BAA4BgQ,KCdvC,IAAMC,GAAb,4MACIjJ,MAAQ,CACJkJ,mBAAmB,GAF3B,EAKIC,iBAAmB,SAACpD,GAChBA,EAAGC,kBACH,EAAKzF,SAAS,CAAE2I,mBAAoB,EAAKlJ,MAAMkJ,qBAPvD,uDAYc,IAAD,OACGhK,EAASmC,KAAKL,MAAd9B,KACAgK,EAAsB7H,KAAKrB,MAA3BkJ,kBACR,OACI,8BACKhK,EAAKkK,QAAU,qBAAKxH,UAAU,uBAAf,SACX1C,EAAKkK,OAAOtH,KAAI,SAAAuH,GACb,OAAO,qBAAoBxI,MAAO,CAAE0C,gBAAiB8F,EAAMtH,OAASH,UAAWsH,EAAoB,kBAAoB,aAAcrH,QAAS,EAAKsH,iBAA5I,SACFD,GAAqBG,EAAMpJ,OADfoJ,EAAMtN,eAnB/C,GAAsCsG,aCC/B,SAASiH,GAAT,GAAsC,IAATpK,EAAQ,EAARA,KAE1BqK,EAAWxM,EAAYkC,gBAAgBC,GA0B7C,OACI,sBAAK0C,UAAU,2CAAf,UAIK1C,EAAKsK,SAAW,sBAAK5H,UAAW1C,EAAKsK,QAAU5L,KAAK6L,MAAO,6BAA6B,yBAAxE,UACb,qBAAKzH,IAAI,+EAA+EC,IAAI,KAC5F,mBAAGL,UAAU,UAAb,SAAwB7E,EAAYqB,WAAWc,EAAKsK,cACvDtK,EAAKwK,UAAY,sBAAK9H,UAAU,0BAAf,UACd,qBAAKI,IAAI,mFAAmFC,IAAI,KAChG,mBAAGL,UAAU,WAAb,SAAyB1C,EAAKwK,SAASxM,YAC1CgC,EAAKC,WAAa,sBAAKyC,UAAY2H,EAAS7J,OAAO6J,EAAS9J,MAAQ,qCAAuC,4BAAzF,UACf,qBAAKuC,IAAI,mFAAmFC,IAAI,KAChG,oBAAGL,UAAU,aAAb,UAA2B2H,EAAS7J,KAApC,IAA2C6J,EAAS9J,YACvDP,EAAKqF,SAAW,qBAAK3C,UAAU,iCAAf,SACZ1C,EAAKqF,QAAQzC,KAAI,SAAAuF,GACd,OAAO,qBAA2BzF,UAAU,SAASf,MAAO,CAAC0C,gBAAiB8D,EAAOtF,MAAOsF,EAAOtF,MAAO,WAAnG,SACFhF,EAAY4B,YAAY0I,EAAOzI,WADnByI,EAAOzI,kB,wBCtC/B+K,GAAb,4MACIC,WAAa,SAAC1K,EAAMpD,GAChB,EAAKkF,MAAM6I,QAAQ3K,GACnB,EAAK8B,MAAM+H,SAASjN,GACpByM,GAAgB/L,KAAK,gBAAgB,IAJ7C,EAOIsN,mBAAqB,SAAC/D,EAAI7G,EAAMpD,GAC5B,IACMiO,EAAM,CACRhE,KACAiE,cAHkB,EAAKC,eAAelE,IAK1C,EAAK/E,MAAM6I,QAAQ3K,GACnB,EAAK8B,MAAM+H,SAASjN,GACpBiK,EAAGC,kBACHuC,GAAgB/L,KAAK,uBAAwBuN,GAAK,IAhB1D,EA4BIE,eAAiB,SAAClE,GACdhN,QAAQC,IAAI,aAAc+M,EAAGmE,SAC7BnR,QAAQC,IAAI,aAAc+M,EAAGoE,SAC7BpR,QAAQC,IAAI,oBAAqBI,OAAOgR,YACxCrR,QAAQC,IAAI,qBAAsBI,OAAOiR,aACzC,IAAMC,EAAOlR,OAAOiR,YAActE,EAAGoE,QAOrC,GAJIpE,EAAGmE,QAIHI,EAAO,IAGP,OAFsBvE,EAAGoE,SAAW,IAAMG,GAM1CA,EAAO,KAAKvR,QAAQC,IAAI,OAAQsR,IA/C5C,uDAmDc,IAAD,SAC0BjJ,KAAKL,MAA5B9B,EADH,EACGA,KAAMqL,EADT,EACSA,MAAOzO,EADhB,EACgBA,MACrB,OACI,qBAAK8F,UAAU,eAAeC,QAAS,kBAAM,EAAK+H,WAAW1K,EAAMpD,IAAnE,SACI,cAAC,KAAD,CAAyB0O,YAAatL,EAAKnD,GAAIwO,MAAOA,EAAtD,SACK,SAACE,EAAUC,GAAX,OACG,cAAC,KAAD,CACI7J,MAAO4J,EAASE,eAAe9J,MAC/B6J,SAAUA,EAFd,SAIK,SAAA7J,GAAK,OACF,8DAASe,UAAU,eACfqE,IAAKwE,EAASG,UACVH,EAASE,gBACTF,EAASI,iBAHjB,IAIIhK,MAAOiK,GAAaJ,EAASK,WAAYN,EAASE,eAAe9J,MAAOA,EAAO6J,EAASM,gBAJ5F,UAMI,wBAAQpJ,UAAU,2BAA2BC,QAAS,SAACkE,GAAD,OAAQ,EAAK+D,mBAAmB/D,EAAI7G,EAAMpD,IAAhG,SAAwG,qBAAK8F,UAAU,2BAA2BI,IAAI,6EAA6EC,IAAI,UACtO/C,EAAK2B,QAAU3B,EAAK2B,MAAMgE,OAAS,qBAAKjD,UAAU,iBAAiBf,MAAO,CAAEC,gBAAgB,OAAD,OAAS5B,EAAK2B,MAAMgE,WAC1G,qBAAKjD,UAAU,mBAAmBf,MAAO,CAAE0C,gBAAiBrE,EAAK2B,MAAMkB,UAC7E,sBAAKH,UAAU,aAAf,UACI,cAAC,GAAD,CAAkB1C,KAAMA,IACxB,qBAAK0C,UAAU,qBAAf,SACI,8BAAM1C,EAAKe,UAGf,cAACqJ,GAAD,CAAmBpK,KAAMA,gBAtBjCA,EAAKnD,UAvDrC,GAAkCsG,aAyF5ByI,GAAe,SAACC,EAAYE,EAAgBpK,EAAOmK,GAApC,mBAAC,aAClBE,WAAY,OACZC,QAAS,IAETC,OAAQ,gBACRC,aAAc,MACdC,WAAYP,EAAa,WAAa,QAEtCQ,UAAU,iCACPN,GACApK,IASDiC,GAAqB,CACvB+G,QHtHG,SAAiB3K,GACtB,OAAO,SAACpE,GACN,IACEA,EAAS,CAAEE,KAAM,WAAYkE,SAE7B,MAAO8J,GACPjQ,QAAQC,IAAI,0BAA2BgQ,MGiHzCD,aAGSyC,GAAcxI,aAXH,SAAAhD,GACpB,MAAO,CACHyL,SAAUzL,EAAM0L,WAAWD,YASiB3I,GAAzBE,CAA6C2G,ICpH3DgC,GAAb,4MACI3L,MAAQ,CACJ4L,UAAW,GAFnB,EAKIC,aAAe,SAAAb,GAAc,MAAK,CAE9Bc,WAAY,EACZC,cAAe,EACfC,YAAa,EACbC,SAAU,aAVlB,EAcI5D,SAAW,SAACtC,GAA4B,IAAxBmG,EAAuB,uDAAN,EAC7B,GAAKA,EAAL,CACA,IAAMN,EAAY,EAAKO,QAAQpF,QAAQ6E,UACvC,EAAKrL,SAAS,CACVqL,UAAWA,IACZ,WACKM,IACA,EAAKlL,MAAMiF,IAAIc,QAAQ6E,UAAY,EAAK5K,MAAMiF,IAAIc,QAAQ6E,UAAYM,QArBtF,uDAwBc,IAAD,SACoC7K,KAAKL,MAAtCmH,EADH,EACGA,MAAOpM,EADV,EACUA,GAAIqQ,EADd,EACcA,WAAYtQ,EAD1B,EAC0BA,MAC/B,OAAKqM,EAID,aADA,CACA,OAAKvG,UAAU,YAAYqE,IAAK5E,KAAKL,MAAMqL,KAAMhE,SAAUhH,KAAKL,MAAMqH,SAAtE,SACI,cAAC,KAAD,CAAWiE,YAAaxQ,EAAMC,GAAIf,KAAK,OAAvC,SACK,SAACyP,EAAUC,GAAX,OACG,8CAAKzE,IAAKwE,EAASG,SAAU/J,MAAO,EAAKgL,aAAanB,EAASM,iBACvDP,EAAS8B,gBADjB,cAEKpE,EAAMrG,KAAI,SAAC5C,EAAMqL,GAAP,OAEP,cAACiB,GAAD,CAA2BtM,KAAMA,EAAMpD,MAAOA,EAC1CyO,MAAOA,EAAO7O,QAASK,EAAIqQ,WAAYA,GADzBlN,EAAKnD,OAI1B0O,EAAStI,qBAfX,qBAAKP,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,YA1BrJ,GAA8BY,aCDjBmK,GAAb,4MAEIxM,MAAQ,CACJrE,SAAU,KACVG,MAAO,CACHmE,MAAO,KALnB,EAQIwM,UAAYxF,IAAMC,YARtB,EA+BIhG,YAAc,YAAiB,IAAdC,EAAa,EAAbA,OACLC,EAASD,EAATC,KACF1H,EAAQyH,EAAOzH,MACrBX,QAAQC,IAAI,eAAgBU,EAAO0H,GACnC,EAAKb,UAAS,SAAAI,GACV,MAAO,CACH7E,MAAM,2BACC6E,EAAU7E,OADZ,kBAEAsF,EAAO1H,SAvC5B,EA6CIyN,YA7CJ,uCA6CkB,WAAOpB,GAAP,qBAAApN,EAAA,6DACVoN,EAAGqB,iBACG1L,EAAU,EAAKsF,MAAMlF,MAAMC,GAC3BT,EAHI,eAGS,EAAK0F,MAAM1F,OAEtB2E,EAAU,EAAKD,MAAMlE,MAArBmE,MACFtE,EAAWL,EAAMM,OAAOC,WAAU,SAAAC,GAAK,OAAIA,EAAMC,KAAOL,KAC9DJ,EAAMM,OAAOD,GAAUsE,MAAQA,EAPrB,SAQJ,EAAKe,MAAM0L,YAAYpR,GARnB,OASV,EAAKiF,SAAS,CAAE5E,SAAU,OAThB,2CA7ClB,wDAyDIgR,cAAgB,SAAC5G,GAAQ,IACbjK,EAAU,EAAKkF,MAAflF,MACR,EAAKkF,MAAM+H,SAASjN,GAEpBiK,EAAGC,kBACHuC,GAAgB/L,KAAK,kBAAmBuJ,GAAI,IA9DpD,kEAWQ,IAAMrK,EAAU2F,KAAKL,MAAMlF,MAAMC,GADjB,EAESsF,KAAKL,MAAtB1F,EAFQ,EAERA,MAAOQ,EAFC,EAEDA,MACTH,EAAWL,EAAMM,OAAOC,WAAU,SAAAC,GAAK,OAAIA,EAAMC,KAAOL,KAE9D2F,KAAKd,SAAS,CAAE5E,WAAUG,MAAO,CAAEmE,MAAOnE,EAAMmE,WAfxD,yCAkBuB2C,GAAY,IAAD,OAEtBvB,KAAKL,MAAMlF,MAAMmE,QAAU2C,EAAU9G,MAAMmE,OAC3CoB,KAAKd,UAAS,SAAAI,GAAS,MAAK,CACxB7E,MAAM,2BACC6E,EAAU7E,OADZ,IAEDmE,MAAO,EAAKe,MAAMlF,MAAMmE,cAxB5C,+BAiEc,IAAD,OACGnE,EAAUuF,KAAKrB,MAAflE,MAER,OAAO,iDAAS8F,UAAU,eAAkBP,KAAKL,MAAM4L,YAAhD,aACH,+CAAMlF,SAAUrG,KAAK8F,YAAalB,IAAK5E,KAAKoL,WAAepL,KAAKL,MAAM4L,YAAtE,IAAkFhL,UAAU,gCAA5F,UAGI,uBAAO5G,KAAK,OAAOoG,KAAK,QAAQ1H,MAAOoC,EAAMmE,MAAOiC,SAAUb,KAAKH,YAC/DU,UAAU,cAAcO,YAAY,uBAAuBC,aAAa,MAAMuF,OAAQtG,KAAK8F,cAC/F,wBAAQvF,UAAU,mBAAmBC,QAAS,SAACkE,GAAD,OAAQ,EAAK4G,cAAc5G,IAAzE,SAA8E,qBAAK/D,IAAI,8EAA8EC,IAAI,kBA1EzL,GAAiCI,aAwF3BS,GAAqB,CACvBnG,YACAC,YACAmM,aAKS8D,GAAa7J,aAhBF,SAAAhD,GACpB,MAAO,CACH1E,MAAO0E,EAAMkD,YAAYC,aAckBL,GAAzBE,CAA6CwJ,IClG1DM,GAAb,4MACI9M,MAAQ,CACJ+H,WAAW,EACX7I,KAAM,CACFe,MAAO,KAJnB,EAQI+H,UAAY,WACR,EAAKzH,SAAS,CAAEwH,WAAW,IAAQ,WAC/B,EAAK/G,MAAMqH,SAAS,KAAM,SAVtC,EAcIJ,WAAa,WACT,EAAK1H,SAAS,CAAEwH,WAAW,EAAO7I,KAAM,CAAEe,MAAO,MAAQ,kBAAM8M,YAAW,WACtE,EAAK/L,MAAMqH,SAAS,KAAM,OAC3B,SAjBX,EAoBI2E,WAAa,SAACjH,GAEV,GADAA,EAAGqB,iBACE,EAAKpH,MAAMd,KAAKe,MAArB,CACA,IAAMf,EAAO,CAAEe,MAAO,EAAKD,MAAMd,KAAKe,MAAOlE,GAAIgB,EAAYE,SAAUsH,QAAS,GAAI6E,OAAQ,IAC5F,EAAKpI,MAAMiM,UAAU/N,EAAM,EAAK8B,MAAMtF,SACtC,EAAK6E,SACD,CACIrB,KAAM,CAAEe,MAAO,MAChB,kBAAM,EAAKgI,kBA5B1B,EA+BI/G,YAAc,YAAiB,IAAdC,EAAa,EAAbA,OACLC,EAASD,EAATC,KACA1H,EAAUyH,EAAVzH,MACR,EAAK6G,UAAS,SAAAI,GACV,MAAO,CACHzB,KAAK,2BACEyB,EAAUzB,MADb,kBAECkC,EAAO1H,SAtC5B,uDA4Cc,IAAD,EACuB2H,KAAKrB,MAAzB+H,EADH,EACGA,UAAW7I,EADd,EACcA,KACnB,OAAO,0BAAS0C,UAAU,qBAAqB+F,OAAQtG,KAAK4G,WAArD,UACFF,GACG,uBAAML,SAAU,aAAkB9F,UAAU,gBAA5C,UACI,0BAAU5G,KAAK,OAAOoG,KAAK,QAAQ1H,MAAOwF,EAAKe,MAAOiC,SAAUb,KAAKH,YACjEU,UAAU,WAAWO,YAAY,wBAAwBmG,WAAS,EAAC4E,UAAQ,EAC3EC,KAAK,KAAKC,KAAK,MACnB,sBAAKxL,UAAU,OAAf,UACI,wBAAQ5G,KAAK,SAASqS,YAAahM,KAAK2L,WAAYpL,UAAU,kBAA9D,sBACA,wBAAQC,QAASR,KAAK4G,WAAYrG,UAAU,kBAA5C,SACI,qBAAKI,IAAI,+EAA+EC,IAAI,cAK1G8F,GAAa,yBAAQnG,UAAU,eAAeC,QAASR,KAAK2G,UAA/C,UACX,qBAAKhG,IAAI,8EAA8EC,IAAI,KAC3F,8DA9DhB,GAA6BI,aCIhBiL,GAAb,4MAIItN,MAAQ,CACJ4L,UAAW,GALnB,EAOIO,QAAUlF,IAAMC,YAPpB,EAQImB,SAAW,SAACtC,GAA4B,IAAxBmG,EAAuB,uDAAN,EAC7B,GAAKA,EAAL,CACA,IAAMN,EAAY,EAAKO,QAAQpF,QAAQ6E,UACvC,EAAKrL,SAAS,CACVqL,UAAWA,IACZ,WACKM,IACA,EAAKC,QAAQpF,QAAQ6E,UAAY,EAAKO,QAAQpF,QAAQ6E,UAAYM,QAflF,uDAkBc,IAAD,SAC0C7K,KAAKL,MAA5ClF,EADH,EACGA,MAAO4E,EADV,EACUA,IAAKuM,EADf,EACeA,UAAWP,EAD1B,EAC0BA,YAE/B,OACI,cAAC,KAAD,CAAWlC,YAAa1O,EAAMC,GAAIwO,MAAO7J,EAAzC,SACK,SAAC+J,EAAUC,GAAX,OACG,cAAC,KAAD,CACI7J,MAAO4J,EAASE,eAAe9J,MAC/B6J,SAAUA,EAFd,SAIK,SAAA7J,GAAK,OACF,8BACI,kDAASe,UAAU,iBAAoB6I,EAASE,gBAAhD,IACI9J,MAAOiK,GAAaJ,EAASK,WAAYN,EAASE,eAAe9J,MAAOA,GACxEoF,IAAKwE,EAASG,SAFlB,UAGI,+CAAUH,EAASI,iBAAnB,IAAoChK,MAAO,CAAEyC,MAAO,IAAKQ,OAAQ,aAEjE,cAAC+I,GAAD,CAAYH,YAAaA,EAAa5Q,MAAOA,EAAO8Q,WAAYnC,EAASI,kBACzE,cAAC,GAAD,CAAUwB,KAAM,EAAKF,QAAShE,MAAOrM,EAAMqM,MACvCpM,GAAI2E,EAAK5E,MAAOA,EAAOuM,SAAU,EAAKA,SACtCkF,SAAUzR,EAAMmE,MAAOvE,QAASI,EAAMC,GAAIkR,UAAWA,IACzD,cAAC,GAAD,CAASvR,QAASI,EAAMC,GAAIkR,UAAWA,EAAW5E,SAAU,EAAKA,2BAvCrG,GAAkChG,aAiD5ByI,GAAe,SAACC,EAAYE,EAAgBpK,GAA7B,mBAAC,aAGlBuK,OAAO,aACJH,GACApK,IC1DA,SAAS2M,GAAT,GAA8E,IAAzD5R,EAAwD,EAAxDA,OAAQqR,EAAgD,EAAhDA,UAAW7E,EAAqC,EAArCA,WAAYC,EAAyB,EAAzBA,SAAUqE,EAAe,EAAfA,YACjE,OACI,sBAAK9K,UAAU,aAAf,UACKhG,EAAOkG,KAAI,SAAChG,EAAO4E,GAAR,OACR,cAAC,GAAD,CAAcgM,YAAaA,EAA4B5Q,MAAOA,EAAO4E,IAAKA,EAAKuM,UAAWA,GAA7CnR,EAAMC,OAEvD,cAAC,GAAD,CAAUqM,WAAYA,EAAYC,SAAUA,O,ICJlDoF,G,4MACFzN,MAAQ,CACJlE,MAAO,KACP4R,YAAa,KACbtN,SAAS,G,EAgBbE,QAAU,WACN,EAAKC,SAAS,CAAEH,SAAS,K,EAI7BuN,cAAgB,WACZ,IAAMC,EAAS,eAAQ,EAAK5M,MAAM1F,OAC1BQ,EAAU,EAAKkE,MAAflE,MACFH,EAAWiS,EAAUhS,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAClF6R,EAAUhS,OAAO4L,OAAO7L,EAAU,GAClC,EAAKqF,MAAMpE,UAAUgR,GACrB,EAAKtN,W,EAGT2M,UAAY,WACRlU,QAAQC,IAAI,S,EAGhB8U,YAAc,WACV/U,QAAQC,IAAI,4B,kEAhCK,IAAD,EAEhBqI,KAAKd,SAAS,CAAEzE,MAAOuF,KAAKL,MAAMlF,MAAO4R,YAAW,UAAErM,KAAKL,aAAP,aAAE,EAAY0M,YAAatN,SAAS,M,6CAIxFiB,KAAKd,SAAS,CACVzE,MAAO,KACP4R,YAAa,S,+BA2BX,IAAD,EACmCrM,KAAKrB,MAArC0N,EADH,EACGA,YAAa5R,EADhB,EACgBA,MAAOsE,EADvB,EACuBA,QAC5B,OAAKtE,EAED,cAACwF,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAM2L,cAAlF,SACA,sBAAK/K,UAAU,yBAAyBf,MAAO,CAC3CoL,SAAU,WACV8B,OAAQ,IAAMC,KAAgB,OAAXN,QAAW,IAAXA,OAAA,EAAAA,EAAaO,GAAI,GAAIC,MAAiB,OAAXR,QAAW,IAAXA,OAAA,EAAAA,EAAaS,GAAI,KAFnE,UAII,sBAAKvM,UAAU,mCAAf,UACI,+CACA,wBAAQC,QAASR,KAAKf,QAASsB,UAAU,kBAAzC,uBAEJ,sBAAKA,UAAU,8BAAf,UACI,wBAAQA,UAAU,iBAAiBC,QAASR,KAAK4L,UAAjD,yBAEA,wBAAQrL,UAAU,iBAAiBC,QAASR,KAAKyM,YAAjD,2BAEA,wBAAQlM,UAAU,iBAAiBC,QAASR,KAAKsM,cAAjD,6BAEA,wBAAQ/L,UAAU,iBAAlB,sBAEA,uBACA,wBAAQA,UAAU,iBAAlB,wBAEA,uBACA,wBAAQA,UAAU,iBAAlB,4CAEA,wBAAQA,UAAU,iBAAlB,uDA1BO,iD,GA5CFS,aAqFnBS,GAAqB,CACvBlG,aAGSwR,GAAYpL,aARD,SAAChD,GAAD,MAAY,CAChC1E,MAAO0E,EAAMkD,YAAYC,aAOqBL,GAAzBE,CAA6CyK,IC9F/D,SAASY,GAAT,GAA2D,IAArCnP,EAAoC,EAApCA,KAAMoP,EAA8B,EAA9BA,oBAAqBxS,EAAS,EAATA,MACtD,OACE,sBAAK8F,UAAU,cAAf,UACE,sBAAKA,UAAU,uBAAf,UACE,qBAAKA,UAAU,iBAAiBI,IAAI,yFAAyFC,IAAI,KACjI,0BACEL,UAAU,0BACV5G,KAAK,OACLoG,KAAK,QACL1H,MAAOwF,EAAKe,MACZiC,SAAUoM,EACVnM,YAAajD,EAAKe,MAClBsO,WAAW,aAGf,oBAAG3M,UAAU,eAAb,qBAAqC9F,EAAMmE,Y,ICT3CuO,G,4MAEJxO,MAAQ,CACN0J,SAAU,KACV+E,YAAY,EACZC,WAAY,I,EAcdC,sBAAwB,YAAiB,IAC/BjV,EAD8B,EAAbyH,OACjBzH,MACJA,EAAO,EAAKkV,oBAAmB,GAC9B,EAAKA,oBAAmB,GAE7B,EAAKrO,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE+N,WAAYhV,Q,EAKlBkV,mBAAqB,SAACC,GACpB,EAAKtO,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE8N,WAAYI,Q,EAKlBC,cAAgB,WAAO,IACbJ,EAAe,EAAK1O,MAApB0O,WACFnM,EAAe,EAAKvB,MAAMuB,aAC5B+D,EAAW,KAUf,OARI/D,IACF+D,EAAW,CACT/K,IAAKgH,EAAahH,IAClBqD,SAAU2D,EAAa3D,SACvBiG,OAAQtC,EAAasC,SAIlB,CACL9I,GAAIgB,EAAYE,SAChBuJ,IAAKkI,EACLhI,UAAW9I,KAAK6L,MAChBnD,a,EAIJyI,iBAAmB,WAEjB,IAAMC,EAAU,EAAKF,gBACjBG,EAAe,EAAKjP,MAAM0J,SAC1BuF,EAAcA,EAAaC,QAAQF,GAClCC,EAAe,IAAIE,MAAMH,GAE9B,EAAKzO,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE+I,SAAUuF,OAEX,WACD,EAAKjO,MAAMoO,yBAAyB,EAAKpP,MAAM0J,UAC/C,EAAKnJ,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE+N,WAAY,GACZD,YAAY,W,kEAxEA,IAOV/E,EAAarI,KAAKL,MAAM9B,KAAxBwK,SACRrI,KAAKd,SAAS,CAAEmJ,e,+BAsER,IAAD,EACsCrI,KAAKrB,MAA1C0O,EADD,EACCA,WAAYD,EADb,EACaA,WAAY/E,EADzB,EACyBA,SAC1BnH,EAAelB,KAAKL,MAAMuB,aAChC,OACE,sBAAKX,UAAU,qBAAf,UACE,sBAAKA,UAAU,uBAAf,UACE,qBAAKI,IAAI,gFAAgFC,IAAI,KAC7F,6CAEF,sBAAKL,UAAU,cAAf,UACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,SAAf,SACGW,EAAexF,EAAY4B,YAAY4D,EAAa3D,UAAY,MAEnE,0BACEgD,UAAU,oBACV5G,KAAK,OACLoG,KAAK,MACL1H,MAAOgV,EACPxM,SAAUb,KAAKsN,sBACfxM,YAAY,0BAGfsM,GAAc,wBAAQ7M,UAAU,WAAWyL,YAAahM,KAAK0N,iBAA/C,qBAEhBrF,GAAYA,EAAS5H,KAAI,SAACkN,EAASzE,GAClC,OAAO,sBAAiB3I,UAAU,gCAA3B,UACL,qBAAKA,UAAU,SAAf,SACGoN,EAAQ1I,SAAWvJ,EAAY4B,YAAYqQ,EAAQ1I,SAAS1H,UAAY,MAE3E,sBAAKgD,UAAU,mBAAf,UACE,8BAAIW,EAAeA,EAAa3D,SAAW,QAA3C,KAAsDoQ,EAAQxI,OAC9D,cAAC,KAAD,CAAS5E,UAAU,gBAAgB6E,KAAMuI,EAAQtI,iBANpC6D,a,GAhHUlI,aA0IxBgN,GAAwBrM,aAVb,SAAAhD,GACtB,MAAO,CACL1E,MAAO0E,EAAMkD,YAAYC,UACzBZ,aAAcvC,EAAMiD,WAAWV,gBAIR,GAGUS,CAA6CwL,IC9IrEc,GAAc,CACzBC,cACAC,gBAWF,WACE,MAAO,CACLzT,GAAIgB,EAAYE,SAChBgD,MAAO,GACPb,MAAO,CAACmQ,GAAW,QAZvB,SAASA,GAAWtP,GAClB,MAAO,CACLlE,GAAIgB,EAAYE,SAChBgD,QACAT,QAAQ,GCNL,IAAMiQ,GAAb,4MACEzP,MAAQ,CACNb,UAAW,KACX4I,WAAW,EACX2H,aAAc,IAJlB,EAYEC,oBAAsB,YAAiB,IAAdxO,EAAa,EAAbA,OACfzH,EAAgByH,EAAhBzH,MAAO0H,EAASD,EAATC,KAEf,EAAKb,UAAS,SAAAI,GAAS,MAAK,CAC1BxB,UAAU,2BACLwB,EAAUxB,WADN,kBAENiC,EAAO1H,QAER,kBAAM,EAAKsH,MAAM4O,wBAAwB,EAAK5P,MAAMb,eApB5D,EAuBE0Q,oBAAsB,SAAC9J,EAAIxG,GAAU,IAC3BH,EAAU,EAAKY,MAAMb,UAArBC,MACF1F,EAA2B,aAAnBqM,EAAG5E,OAAOnG,KAAsB+K,EAAG5E,OAAO2O,QAAU/J,EAAG5E,OAAOzH,MAE5E6F,EADiBwG,EAAG5E,OAAZC,MACK1H,EAEb,IAAMqW,EAAY,YAAO3Q,GAEzB,EAAK4Q,UAAUD,IA/BnB,EAkCEE,aAAe,SAACvP,GAC4B,IAAtC,EAAKV,MAAMb,UAAUC,MAAMlC,QAAc,EAAK8D,MAAMkP,qBAAqB,MAE7E,IAAMC,EAAS,YAAO,EAAKnQ,MAAMb,UAAUC,OAC3C+Q,EAAU3I,OAAO9G,EAAK,GACtB,EAAKsP,UAAUG,IAvCnB,EA0CEC,YAAc,WAAO,IACXhR,EAAU,EAAKY,MAAMb,UAArBC,MACAsQ,EAAiB,EAAK1P,MAAtB0P,aACJS,EAAS,YAAO/Q,GAEdiR,EAAaf,GAAYC,WAAWG,GAC1CS,EAAUxN,KAAK0N,GAEf,EAAKL,UAAUG,IAlDnB,EAqDEH,UAAY,SAACD,GACX,EAAKxP,UAAS,SAAAI,GAAS,MAAK,CAC1BxB,UAAU,2BACLwB,EAAUxB,WADN,IAEPC,MAAM,YAAK2Q,KAEbL,aAAc,OACZ,kBAAM,EAAK1O,MAAM4O,wBAAwB,EAAK5P,MAAMb,eA5D5D,EA+DEmR,sBAAwB,YAAiB,IAC/B5W,EAD8B,EAAbyH,OACjBzH,MACR,EAAK6G,SAAS,CAAEmP,aAAchW,KAjElC,EAoEE6W,gBAAkB,WAChB,EAAKhQ,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEEoH,WAAY,EAAK/H,MAAM+H,gBAxE/B,EA6EEyI,sBAAwB,WAAO,IACrBrR,EAAc,EAAKa,MAAnBb,UACJsR,EAAM,EACVtR,EAAUC,MAAMsR,SAAQ,SAACnR,GAAeA,EAAKC,SAAQiR,GAAO,MAE5D,IAAME,EAAe,IAAMxR,EAAUC,MAAMlC,OAE3C,OAAY,IAARuT,EAAkB,EACfE,EAAeF,GArF1B,kEAOuB,IACXtR,EAAckC,KAAKL,MAAM9B,KAAzBC,UACRkC,KAAKd,SAAS,CAAEpB,gBATpB,+BAwFY,IAAD,SACwCkC,KAAKrB,MAA5Cb,EADD,EACCA,UAAW4I,EADZ,EACYA,UAAW2H,EADvB,EACuBA,aAC9B,OAAKvQ,EAEH,sBAAKyC,UAAU,wBAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKI,IAAI,mFAAmFC,IAAI,KAChG,uBACEL,UAAU,WACV5G,KAAK,OACLoG,KAAK,QACLe,YAAY,YACZzI,MAAOyF,EAAUc,MACjBiC,SAAUb,KAAKsO,yBAGnB,qBAAK/N,UAAU,eAAf,SAA8B,qBAAKf,MAAO,CAAEyC,MAAM,GAAD,OAAKjC,KAAKmP,wBAAV,UAChDrR,EAAUC,OAASD,EAAUC,MAAM0C,KAAI,SAACvC,EAAMmB,GAC7C,OAAO,sBAAKkB,UAAU,sBAAf,UACL,uBACE5G,KAAK,WACLoG,KAAK,SACL0O,QAASvQ,EAAKC,OACd0C,SAAU,SAAC6D,GAAD,OAAQ,EAAK8J,oBAAoB9J,EAAIxG,MAEjD,uBACEqC,UAAU,0BACV5G,KAAK,OACLoG,KAAK,QACLe,YAAY,cACZzI,MAAO6F,EAAKU,MACZiC,SAAU,SAAC6D,GAAD,OAAQ,EAAK8J,oBAAoB9J,EAAIxG,MAEjD,wBAAQqC,UAAU,cAAcC,QAAS,kBAAM,EAAKoO,aAAavP,IAAjE,sBAf+CA,MAmBlDqH,GAAa,sBAAKnG,UAAU,OAAf,UACZ,uBACE5G,KAAK,OACLsN,WAAS,EACTnG,YAAY,cACZP,UAAU,iBACVlI,MAAOgW,EACPxN,SAAUb,KAAKiP,sBACf3I,OAAQtG,KAAKkP,kBAEf,wBAAQ3O,UAAU,WAAWyL,YAAahM,KAAK+O,YAA/C,sBAGArI,GAAa,wBAAQnG,UAAU,WAAWC,QAASR,KAAKkP,gBAA3C,yBAhDI,qBAAK3O,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,YA1FrJ,GAAmCY,a,qBCC5B,SAASuO,GAAT,GAA2H,IAAD,IAAtG1R,EAAsG,EAAtGA,KAAMoP,EAAgG,EAAhGA,oBAAqBsB,EAA2E,EAA3EA,wBAAyBR,EAAkD,EAAlDA,yBAA0Bc,EAAwB,EAAxBA,qBACvG,OACE,sBAAKtO,UAAU,YAAf,UAEG1C,EAAKqF,SAAW,sBAAK3C,UAAU,sBAAf,UACf,oBAAIA,UAAU,iBAAd,qBAEA,cAACgG,GAAA,EAAD,CAAiBhG,UAAU,oBAA3B,SACG1C,EAAKqF,QAAQzC,KAAI,SAACuF,EAAQ3G,GAAT,OAClB,cAACY,EAAA,EAAD,CAAyBG,QAAS,IAAKD,WAAW,OAAlD,SACG,sBAAgBI,UAAU,SAASf,MAAO,CAAC0C,gBAAiB8D,EAAOtF,MAAOsF,EAAOtF,MAAO,WAAxF,SAAqGhF,EAAY4B,YAAY0I,EAAOzI,WAAzH8B,IADMA,WAQvBxB,EAAKkK,QAAUlK,EAAKkK,OAAOlM,OAAS,GAAK,sBAAK0E,UAAU,sBAAf,UACxC,oBAAIA,UAAU,gBAAd,oBACA,qBAAKA,UAAU,wBAAf,SACG1C,EAAKkK,OAAOtH,KAAI,SAACuH,EAAO3I,GACvB,OAAO,wBAAkBkB,UAAU,YAAYf,MAAO,CAAE0C,gBAAiB8F,EAAMtH,OAAxE,SAAkFsH,EAAMpJ,OAA3ES,WAKzBxB,EAAKsK,SAAW,sBAAK5H,UAAU,mBAAf,UACf,oBAAIA,UAAU,cAAd,sBACA,mBAAGA,UAAU,WAAb,SAAyBiP,KAAO3R,EAAKsK,SAASsH,OAAO,YAGvD,sBAAKlP,UAAU,mBAAf,UACE,sBAAKA,UAAU,OAAf,UACE,+BAAM,qBAAKA,UAAU,WAAWI,IAAI,oFAAoFC,IAAI,OAC5H,gDAEF,0BACEL,UAAU,yBACV5G,KAAK,OACLoG,KAAK,cACL1H,MAAOwF,EAAK6R,aAAe,GAC3B7O,SAAUoM,EACVnM,YAAY,yCAIf,UAAAjD,EAAKC,iBAAL,mBAAgBC,aAAhB,eAAuBlC,QAAS,GAC/B,cAAC,GAAD,CAAegC,KAAMA,EAAM0Q,wBAAyBA,EAAyBM,qBAAsBA,IACrG,cAACb,GAAD,CAAuBnQ,KAAMA,EAAMkQ,yBAA0BA,O,WCtDtD4B,GAAoB,CAC/BC,U,4FAEF,WAAyBC,GAAzB,qBAAAvY,EAAA,4DACqB,UACbwY,EAFR,0CACqB,UADrB,kBAIQC,EAAW,IAAIC,UACZC,OAAO,OAAQJ,GACxBE,EAASE,OAAO,gBAAiB,aANnC,kBAQsBC,MAAMJ,EAAY,CAClCvY,OAAQ,OACR4Y,KAAMJ,IAVZ,cAQUtY,EARV,iBAYuBA,EAAI2Y,OAZ3B,eAYUhZ,EAZV,yBAaWA,GAbX,kCAgBIM,QAAQC,IAAR,MAhBJ,2D,sBCCO,IAAM0Y,GAAb,4MAEI1R,MAAQ,CACJ2R,aAAa,EACbvR,SAAS,GAJjB,EAWIE,QAAU,WACN,EAAKC,SAAS,CAAEH,SAAS,KAZjC,EAeIwR,YAAc,WACV,MAAO,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAC3D,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,YAjBpG,EAoBIC,YApBJ,uCAoBkB,WAAM9L,GAAN,iBAAApN,EAAA,6DACV,EAAK4H,SAAS,CAAEoR,aAAa,IADnB,SAEmBX,GAAkBC,UAAUlL,EAAG5E,OAAO2Q,MAAM,IAF/D,gBAEFC,EAFE,EAEFA,WACR,EAAKxR,SAAS,CAAEoR,aAAa,IAAS,kBAAM,EAAK3Q,MAAMgR,eAAeD,MAH5D,2CApBlB,wDA0BIE,SAAW,SAAClQ,GACRhJ,QAAQC,IAAI,sBAAuB+I,GACnC,EAAKf,MAAMkR,mBAAmBnQ,IA5BtC,kEAQQV,KAAKd,SAAS,CAAEH,SAAS,MARjC,+BAgCc,IAAD,SAC4BiB,KAAKrB,MAA9B2R,EADH,EACGA,YAAavR,EADhB,EACgBA,QACrB,OACI,cAACkB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAMmR,gBAAlF,SACI,sBAAKvQ,UAAU,+BAAf,UACI,sBAAKA,UAAU,WAAf,UACI,uBAAOA,UAAU,aAAawQ,QAAQ,gBAAtC,SAAuDT,EAAc,gBAAkB,iBACvF,uBAAOzP,SAAUb,KAAKwQ,YAAaQ,QAAM,EACrCrX,KAAK,OAAOsX,OAAO,UAAUvW,GAAG,qBAExC,wCACA,qBAAK6F,UAAU,oBAAf,SACKP,KAAKuQ,cAAc9P,KAAI,SAACC,EAAOrB,GAC5B,OAAO,qBAAKkB,UAAU,oBAClBf,MAAO,CAAE0C,gBAAiBxB,GAASF,QAAS,kBAAM,EAAKoQ,SAASlQ,KADrBrB,QAIvD,sBAAKkB,UAAU,uBAAf,UACI,wBAAQC,QAASR,KAAKf,QAASsB,UAAU,iBAAzC,gBACA,wBAAQC,QAASR,KAAKf,QAASsB,UAAU,iBAAzC,gCAnDxB,GAA+BS,aCIzBkQ,G,4MAEJvS,MAAQ,CACNoJ,OAAQ,GACRoJ,eAAe,EACfC,UAAW,CACT1W,GAAI,GACJkE,MAAO,GACP8B,MAAO,WAET2Q,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAC9D,UAAW,UAAW,UAAW,UAAW,Y,EAsBhDC,YAAc,SAACtJ,GACb,EAAK9I,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE6R,eAAe,EACfC,UAAU,eAAMpJ,S,EAKtBuJ,iBAAmB,SAACC,GAClB,IAAIzR,EAAO,QAEU,kBAATyR,IACVA,EAAMA,EAAI1R,OAAOzH,MACjB0H,EAAO,SAGT,EAAKb,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE8R,UAAU,2BACL,EAAKzS,MAAMyS,WADP,kBAENrR,EAAOyR,U,EAMhBC,cAAgB,WACd,EAAKvS,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE6R,eAAgB,EAAKxS,MAAMwS,oB,EAKjCO,WAAa,WAAO,IACVN,EAAc,EAAKzS,MAAnByS,UACJO,EAAU,YAAO,EAAKhT,MAAMoJ,QAEhC,GAAKqJ,EAAU1W,GAGR,CACL,IAAM2E,EAAMsS,EAAWnX,WAAU,SAACwN,GAAD,OAAWA,EAAMtN,KAAO0W,EAAU1W,MACnEiX,EAAWxL,OAAO9G,EAAK,EAAG+R,QAJ1BA,EAAU1W,GAAKgB,EAAYE,SAC3B+V,EAAWrQ,KAAK8P,GAMlB,EAAKlS,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEEyI,OAAO,YAAK4J,QAEb,WACD,EAAKhS,MAAMiS,qBAAqB,EAAKjT,MAAMoJ,QAC3Cb,GAAgB/L,KAAK,cAAeiW,GACpC,EAAKK,gBACL,EAAKI,oB,EAITA,cAAgB,WACd,EAAK3S,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEE8R,UAAW,CACT1W,GAAI,GACJkE,MAAO,GACP8B,MAAO,iB,EAMfoR,cAAgB,SAAC9J,GAEM,EAAK+J,kBAAkB/J,GAG1C,EAAKgK,YAAYhK,GAInB,EAAK9I,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEEyI,OAAO,GAAD,mBAAMzI,EAAUyI,QAAhB,CAAwBC,SAE/B,kBAAM,EAAKrI,MAAMiS,qBAAqB,EAAKjT,MAAMoJ,Y,EAGtDgK,kBAAoB,SAAC/J,GAAW,IACtBD,EAAW,EAAKpJ,MAAhBoJ,OACR,QAAKA,MAEWA,EAAOkK,MAAK,SAACb,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,YAClE,I,EAGFsX,YAAc,SAAChK,GAA4B,IAArBkK,EAAoB,wDAClCP,EAAU,YAAO,EAAKhT,MAAMoJ,QAC5B1I,EAAMsS,EAAWnX,WAAU,SAAC4W,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,MACvEiX,EAAWxL,OAAO9G,EAAK,GAEvB,EAAKH,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEEyI,OAAQ4J,OAET,WACC,EAAKhS,MAAMiS,qBAAqB,EAAKjT,MAAMoJ,QACvCmK,GAAS,EAAKvS,MAAMwS,iBACxB,EAAKN,gBACL,EAAKJ,oB,EAIXW,aAAe,SAACpK,GAId,OAHmB,EAAKrJ,MAAhBoJ,OAEekK,MAAK,SAACb,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,O,EAIpE2X,cAAgB,SAACrK,GACf,EAAKgK,YAAYhK,GAAO,GACxBd,GAAgB/L,KAAK,eAAgB6M,I,kEA9InB,IAEVD,EAAW/H,KAAKL,MAAM9B,KAAtBkK,OACJA,GACF/H,KAAKd,UAAS,SAAAI,GACZ,OAAO,2BACFA,GADL,IAEEyI,OAAO,YAAKA,GACZhJ,SAAS,S,+BAyIP,IAAD,SACC9E,EAAU+F,KAAKL,MAAf1F,MADD,EAE+C+F,KAAKrB,MAAnDwS,EAFD,EAECA,cAAeE,EAFhB,EAEgBA,OAAQD,EAFxB,EAEwBA,UAAWrS,EAFnC,EAEmCA,QAC1C,OACE,cAACkB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAM2S,gBAAlF,SACE,sBAAK/R,UAAU,0BAA0Bf,MAAO,CAAEiD,OAAQ0O,EAAgB,QAAU,SAApF,UAEE,yBAAQ5Q,UAAU,qBAAlB,UACG4Q,GAAiB,wBAAQ5Q,UAAU,UAAUC,QAASR,KAAKyR,cAA1C,qBAClB,4BAAKN,EAA2B,eAAX,WACrB,wBAAQ5Q,UAAU,yBAAyBC,QAASR,KAAKL,MAAM2S,gBAA/D,wBAGAnB,GAAiB,yBAAS5Q,UAAU,qCAAnB,SACjB,uCACGtG,EAAM8N,cADT,aACG,EAActH,KAAI,SAACuH,GAAD,OACjB,qBAAmBzH,UAAU,aAA7B,UACE,sBAAKA,UAAU,iCAAiCC,QAAS,kBAAM,EAAKsR,cAAc9J,IAAQxI,MAAO,CAAE0C,gBAAiB8F,EAAMtH,OAA1H,UACE,8BAAIsH,EAAMpJ,MAAV,OACA,sBAAM2B,UAAU,YAAhB,SAA6B,EAAK6R,aAAapK,GAAS,SAAM,QAEhE,wBAAQzH,UAAU,iBAAiBC,QAAS,kBAAM,EAAK8Q,YAAYtJ,IAAnE,SACE,qBAAKrH,IAAI,6EAA6EC,IAAI,SANrFoH,EAAMtN,WAapByW,GAAiB,0BAAS5Q,UAAU,qCAAnB,UAChB,uBAAOwQ,QAAQ,QAAf,kBACA,uBACEpX,KAAK,OACLmH,YAAY,sBACZf,KAAK,QACLrF,GAAG,QACHrC,MAAO+Y,EAAUxS,MACjBiC,SAAUb,KAAKuR,mBAEjB,+CACA,oBAAIhR,UAAU,OAAd,SACG8Q,EAAO5Q,KAAI,SAACC,GAAD,OACV,oBACEH,UAAU,sDAEVR,KAAK,QACLP,MAAO,CAAE0C,gBAAiBxB,GAC1BF,QAAS,kBAAM,EAAK+Q,iBAAiB7Q,IALvC,SAME0Q,EAAU1Q,QAAUA,EAAQ,SAAM,IAJ7BA,QAOX,sBAAKH,UAAU,qBAAf,UACE,wBAAQA,UAAU,WAAWC,QAASR,KAAK0R,WAA3C,oBACCN,EAAU1W,IAAM,wBAAQ6F,UAAU,aAAaC,QAAS,kBAAM,EAAK6R,cAAcjB,IAAjE,2BAInBD,GACA,iCACE,wBAAQ5Q,UAAU,gBAAgBC,QAASR,KAAKyR,cAAhD,2C,GA/NYzQ,aAoPbuR,GAAa5Q,aAXF,SAAAhD,GACtB,MAAO,CACL1E,MAAO0E,EAAMkD,YAAYC,UACzBsI,SAAUzL,EAAM0L,WAAWD,YAIJ,GAIDzI,CAA6CuP,I,SCvP1DsB,GAAb,4MAEI7T,MAAQ,CACJI,SAAS,EACT1G,MAAO,IAAIkE,MAJnB,EAWI0C,QAAU,WACN,EAAKC,SAAS,CAAEH,SAAS,KAZjC,EAeI8B,SAAW,SAACxI,GACR,EAAK6G,SAAS,CAAE7G,UAAS,kBAAM,EAAKsH,MAAM8S,eAAe,EAAK9T,MAAMtG,MAAQ,IAAIqa,UAAU,EAAG,QAC7F,EAAKxT,SAAS,CAAEH,SAAS,KAjBjC,kEAQQiB,KAAKd,SAAS,CAAEH,SAAS,MARjC,+BAqBc,IAAD,EACsBiB,KAAKrB,MAAxBtG,EADH,EACGA,MAAO0G,EADV,EACUA,QACf,OACI,cAACkB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAMgT,WAAlF,SACI,sBAAKpS,UAAU,cAAf,UACI,wBAAQC,QAASR,KAAKf,QAASsB,UAAU,iBAAzC,oBACA,cAAC,KAAD,CAAUf,MAAO,CAAEkN,OAAQ,IAAM9B,SAAU,YACvC/J,SAAUb,KAAKa,SACfxI,MAAOA,aA7B/B,GAAgC2I,aCKnB4R,GAAb,4MAEEjU,MAAQ,CAENkU,aAAa,EACbC,eAAe,EACfC,mBAAmB,EACnBC,kBAAkB,EAClBvN,oBAAoB,GARxB,EAWEwN,aAAe,WACb,EAAKtT,MAAMsT,gBAZf,EAeE9P,cAAgB,WACd,EAAKjE,SAAS,CAAEuG,oBAAqB,EAAK9G,MAAM8G,sBAhBpD,EAmBEkN,WAAa,WACX,EAAKzT,SAAS,CAAE2T,aAAc,EAAKlU,MAAMkU,eApB7C,EAuBE/B,gBAAkB,WAChB,EAAK5R,SAAS,CAAE8T,kBAAmB,EAAKrU,MAAMqU,oBAxBlD,EA2BEV,gBAAkB,WAChB,EAAKpT,SAAS,CAAE6T,mBAAoB,EAAKpU,MAAMoU,oBAC/Chb,OAAOgb,kBAAoB,EAAKpU,MAAMoU,mBA7B1C,EAkCEG,eAAiB,WACf,IAAMpV,EAAYmQ,GAAYE,kBAC9B,EAAKxO,MAAMkP,qBAAqB/Q,IApCpC,EAuCEqU,eAAiB,WACf,EAAKjT,SAAS,CAAE4T,eAAgB,EAAKnU,MAAMmU,iBAxC/C,uDA8CY,IAAD,EAC0E9S,KAAKrB,MAA9EkU,EADD,EACCA,YAAaG,EADd,EACcA,iBAAkBvN,EADhC,EACgCA,mBAAoBsN,EADpD,EACoDA,kBADpD,EAEoD/S,KAAKL,MAAxD9B,EAFD,EAECA,KAAM+T,EAFP,EAEOA,qBAAsBuB,EAF7B,EAE6BA,YAAazZ,EAF1C,EAE0CA,MACjD,OACE,qCACGqZ,GAAqB,cAACR,GAAD,CAAYY,YAAaA,EAAatV,KAAMA,EAAMsU,eAAgBnS,KAAKmS,eAAgBG,gBAAiBtS,KAAKsS,gBAAiBV,qBAAsBA,IACzKoB,GAAoB,cAAC,GAAD,CAAWrC,eAAgB3Q,KAAKL,MAAMyT,qBACzDvC,mBAAoB7Q,KAAKL,MAAMkR,mBAAoBC,gBAAiB9Q,KAAK8Q,kBAC1E+B,GAAe,cAAC,GAAD,CAAYJ,cAAezS,KAAKL,MAAM8S,cAAeE,WAAY3S,KAAK2S,aACrFlN,GAAsB,cAACnC,GAAD,CAAWH,cAAenD,KAAKmD,cACpDF,gBAAiBjD,KAAKL,MAAMsD,gBAAiBF,gBAAiB/C,KAAKL,MAAMoD,gBAAiBG,QAASrF,EAAKqF,QAASxJ,MAAOA,IAI1H,sBAAK6G,UAAU,wBAAf,UACE,yBAAQA,UAAU,WAAWC,QAASR,KAAKmD,cAA3C,UACE,+BACE,qBAAKxC,IAAI,8EAA8EC,IAAI,OAF/F,cAKA,yBAAQL,UAAU,WAAWC,QAASR,KAAKsS,gBAA3C,UACE,+BACE,qBAAK3R,IAAI,mFAAmFC,IAAI,OAFpG,cAKE/C,EAAKC,WAAa,yBAAQyC,UAAU,WAAWC,QAASR,KAAKkT,eAA3C,UAClB,+BACE,qBAAKvS,IAAI,mFAAmFC,IAAI,OAFhF,gBAKpB,yBAAQL,UAAU,WAAWC,QAASR,KAAK2S,WAA3C,UACE,+BACE,qBAAKhS,IAAI,+EAA+EC,IAAI,OAFhG,eAKA,yBAAQL,UAAU,WAAWC,QAASR,KAAK8Q,gBAA3C,UACE,+BACE,qBAAKnQ,IAAI,iFAAiFC,IAAI,OAFlG,YAKA,yBAAQL,UAAU,WAAWC,QAASR,KAAKiT,aAA3C,UACE,+BACE,qBAAKtS,IAAI,+EAA+EC,IAAI,OAFhG,uBAtFV,GAA8BI,aCRjBqS,GAAkB,CAC7BC,eAGF,SAAwBja,EAAM8L,EAAKtH,EAAMpD,EAAO8Y,EAAQC,GACtD,IAAIvO,EAAW,KACXC,EAAU,KAEV7L,IACF4L,EAAW,CACT/K,IAAKb,EAAKa,IACVqD,SAAUlE,EAAKkE,SACfiG,OAAQnK,EAAKmK,SAIbgQ,IACFtO,EAAU,CACRxK,GAAI8Y,EAAO9Y,GACXkE,MAAO4U,EAAO5U,QAKhBf,EADEA,EACM,CACNnD,GAAImD,EAAKnD,GACTkE,MAAM,GAAD,OAAKf,EAAKe,MAAV,YAAmB2U,IAEd,KAGd,MAAO,CACL7Y,GAAIgB,EAAYE,SAChBuJ,MACAE,UAAW9I,KAAK6L,MAChBnD,WACApH,OACApD,MAAO,CACLC,GAAID,EAAMC,GACVkE,MAAOnE,EAAMmE,OAEfsG,a,IC9BEuO,G,4MACJ9U,MAAQ,CACNd,KAAM,KACN+E,SAAU,CACRrF,SAAU,IAEZwB,SAAS,EACT2U,YAAa,M,EASfzU,QAAU,WACR,EAAKkU,aAAY,GACjB,EAAKQ,sBACL,EAAKzU,SAAS,CAAEH,SAAS,K,EAG3BoU,YAAc,WAA+B,IAA9BS,EAA6B,wDAE1C,EAAKC,iBAAiBD,I,EAGxBC,iB,sBAAmB,wDAAAvc,EAAA,6DAAOsc,EAAP,gCACX3Z,EADW,eACE,EAAK0F,MAAM1F,OACxBQ,EAFW,eAEE,EAAKkF,MAAMlF,OAFb,EAGa,EAAKkE,MAA3Bd,EAHS,EAGTA,KAAM6V,EAHG,EAGHA,YACRI,EAAUrZ,EAAMqM,MAAMtM,WAAU,SAACqD,GAAD,OAAUA,EAAKnD,KAAO,EAAKiE,MAAMd,KAAKnD,MAC5ED,EAAMqM,MAAMgN,GAAWjW,EACjBvD,EAAWL,EAAMM,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAC9ET,EAAMM,OAAOD,GAAYG,EAErBmZ,GAAoBrb,KAAKC,UAAUkb,KAAiBnb,KAAKC,UAAUqF,KACjEmH,EAAWqO,GAAgBC,eAAe,EAAK3T,MAAMuB,aAAc,eAAgBrD,EAAM5D,EAAMM,OAAOD,GAAW,OACrHL,EAAM8K,WAAa9K,EAAM8K,WAAW8I,QAAQ7I,GAAY/K,EAAM8K,WAAa,IAAI+I,MAAM9I,IAXtE,UAcX,EAAKrF,MAAMpE,UAAUtB,GAdV,4C,EAkBnBgT,oBAAsB,YAAiB,IAAdnN,EAAa,EAAbA,OACfzH,EAAgByH,EAAhBzH,MAAO0H,EAASD,EAATC,KACf,EAAKb,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,kBAEDkC,EAAO1H,QAER,kBAAM,EAAK8a,kB,EAGjB5E,wBAA0B,SAACzQ,GACzB,EAAKoB,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFC,UAAU,eAAMA,SAEhB,kBAAM,EAAKqV,kB,EAGjBpF,yBAA2B,SAAC1F,GAC1B,EAAKnJ,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFwK,SAAS,YAAKA,SAEd,kBAAM,EAAK8K,kB,EAGjBvB,qBAAuB,SAAC7J,GACtB,EAAK7I,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFkK,OAAO,YAAKA,SAEZ,kBAAM,EAAKoL,kB,EAGjBtE,qBAAuB,SAAC/Q,GACtB,EAAKoB,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFC,kBAEA,kBAAM,EAAKqV,kB,EAGjBV,cAAgB,SAACrN,GACf,EAAKlG,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFsK,QAAS5L,KAAK5D,MAAMyM,SAEpB,kBAAM,EAAK+N,kB,EAGjBC,qBAAuB,SAAC5b,GACtB,EAAK0H,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEF2B,MAAO,CAAEgE,OAAQhM,EAAKkJ,MAAO,UAE7B,kBAAM,EAAKyS,kB,EAGjBtC,mBAAqB,SAACnQ,GACpB,EAAKxB,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEF2B,MAAO,CAAEgE,OAAQ,GAAI9C,MAAOA,SAE5B,kBAAM,EAAKyS,kB,EAGjBF,aAAe,WAAO,IAAD,EACM,EAAKtT,MAAtB1F,EADW,EACXA,MAAOQ,EADI,EACJA,MACPoD,EAAS,EAAKc,MAAdd,KACFiW,EAAUrZ,EAAMqM,MAAMtM,WAAU,SAAC4P,GAAD,OAAcA,EAAS1P,KAAOmD,EAAKnD,MACzED,EAAMqM,MAAMX,OAAO2N,EAAS,GAC5B,IAAMxZ,EAAWL,EAAMM,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAC9ET,EAAMM,OAAOD,GAAYG,EACzB,EAAKkF,MAAMpE,UAAUtB,GACrB,EAAK0F,MAAMoU,eAAc,I,EAG3B9Q,gB,uCAAkB,WAAO+C,GAAP,6BAAA1O,EAAA,sDAChBI,QAAQC,IAAI,cAAeqO,GADX,EAES,EAAKrG,MAAtB1F,EAFQ,EAERA,MAAOQ,EAFC,EAEDA,MACPoD,EAAS,EAAKc,MAAdd,KACFmW,EAJU,eAIKnW,IACfoI,EAAYpI,EAAKqF,QAAQ1I,WAAU,SAAA0L,GAAU,OAAIA,EAAWhM,MAAQ8L,EAAO9L,SAChE,EACf8Z,EAAQ9Q,QAAQiD,OAAOF,EAAW,GAElC+N,EAAQ9Q,QAAQ5B,KAAK0E,GAEjB8N,EAAUrZ,EAAMqM,MAAMtM,WAAU,SAACqD,GAAD,OAAUA,EAAKnD,KAAO,EAAKiE,MAAMd,KAAKnD,MAC5ED,EAAMqM,MAAMgN,GAAWE,EACjB1Z,EAAWL,EAAMM,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAC9ET,EAAMM,OAAOD,GAAYG,EAEzB,EAAKyE,SAAS,CAAErB,KAAMmW,IAAW,WAAQ,EAAKrU,MAAMpE,UAAUtB,MAhB9C,4C,wDAmBlB0Z,oBAAsB,WAAO,IACnB7V,EAAc,EAAKa,MAAMd,KAAzBC,UACJA,GAAwC,IAA3BA,EAAUC,MAAMlC,SAAiBiC,EAAUC,MAAM,GAAGa,OACnE,EAAKiQ,qBAAqB,O,EAI9B9L,gBAAkB,SAACH,GACjB,EAAK1D,SAAS,CAAE0D,c,EAWlBqR,cAAgB,WACd,EAAK/U,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEF2B,MAAO,WAEP,kBAAM,EAAK2T,kB,kEAlKfxY,EAAcE,QADI,IAEVgD,EAASmC,KAAKL,MAAd9B,KACRmC,KAAKd,SAAS,CAAEH,SAAS,EAAMlB,OAAM6V,YAAa7V,M,+BAoK1C,IAAD,UACmBmC,KAAKrB,MAAvBd,EADD,EACCA,KAAMkB,EADP,EACOA,QACNtE,EAAUuF,KAAKL,MAAflF,MACFyZ,EAAkBlU,KAAKkU,gBAC7B,OAAKrW,EAGH,qBAAK0C,UAAU,cAAcC,QAASR,KAAKf,QAA3C,SACE,cAACgB,EAAA,EAAD,CAAeC,GAAInB,EAASoB,WAAW,QAAQC,QAAS,IAAKC,SAAUL,KAAKL,MAAMoU,cAAlF,SACE,sBAAKxT,UAAU,wCAAwCC,QAAS,SAAAkE,GAAE,OAAIA,EAAGC,mBAAzE,UACE,wBAAQpE,UAAU,YAAYC,QAASR,KAAKf,QAA5C,qBACC,UAAApB,EAAK2B,aAAL,eAAYkB,QACX,qBAAKH,UAAU,sBAAsBf,MAAO,CAAE0C,gBAAiBrE,EAAK2B,MAAMkB,MAAO+B,OAAQ,SAAzF,SACE,qBAAKjC,QAASR,KAAKiU,cAAetT,IAAI,+EAA+EJ,UAAU,QAAQK,IAAI,QAK7I,UAAA/C,EAAK2B,aAAL,eAAYgE,SACZ,sBAAKjD,UAAU,0CAA0Cf,MAAO,CAAEiD,OAAQ,SAA1E,UACE,qBAAK9B,IAAK9C,EAAK2B,MAAMgE,OAAQ5C,IAAI,KACjC,qBAAKJ,QAASR,KAAKiU,cAAetT,IAAI,+EAA+EJ,UAAU,QAAQK,IAAI,QAG/I,sBAAKL,UAAU,mCAAmCf,MAAO,CAAEiL,YAAa,UAAA5M,EAAK2B,aAAL,eAAYgE,UAAZ,UAAsB3F,EAAK2B,aAA3B,aAAsB,EAAYkB,OAAS,IAAM,QAAzH,UACE,cAACsM,GAAD,CAAYnP,KAAMA,EAAMoP,oBAAqBjN,KAAKiN,oBAAqBxS,MAAOA,IAC9E,sBAAK8F,UAAU,oBAAf,UACE,cAACgP,GAAD,CACE1R,KAAMA,EACN0Q,wBAAyBvO,KAAKuO,wBAC9BtB,oBAAqBjN,KAAKiN,oBAC1Bc,yBAA0B/N,KAAK+N,yBAC/Bc,qBAAsB7O,KAAK6O,uBAE7B,cAAC,GAAD,CACEhR,KAAMA,EACNoV,aAAcjT,KAAKiT,aACnBR,cAAezS,KAAKyS,cACpB5D,qBAAsB7O,KAAK6O,qBAC3BuE,qBAAsBpT,KAAKoT,qBAC3BxB,qBAAsB5R,KAAK4R,qBAC3Bf,mBAAoB7Q,KAAK6Q,mBACzBsC,YAAanT,KAAKmT,YAClBzZ,MAAOwa,EACPjR,gBAAiBjD,KAAKiD,gBACtBF,gBAAiB/C,KAAK+C,+BAzClB,qBAAKxC,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,U,sCAtBvH,IACbnG,EAAU+F,KAAKL,MAAf1F,MACA2I,EAAa5C,KAAKrB,MAAlBiE,SACFuR,EAAc,IAAIC,OAAOxR,EAASrF,SAAU,KAElD,OADctD,EAAMiJ,QAAQjF,QAAO,SAAA+H,GAAM,OAAImO,EAAYE,KAAKrO,EAAOzI,iB,GAnK9CyD,aAgPrBS,GAAqB,CACzBlG,YACA+Y,WrB1OK,SAAoB1b,GACzB,OAAO,SAACa,GACN,IACEA,EAAS,CAAEE,KAAM,cAAef,UAChC,MAAO+O,GACPjQ,QAAQC,IAAI,6BAA8BgQ,OqBwOnC4M,GAAc5S,aAZH,SAAAhD,GACtB,MAAO,CACL1E,MAAO0E,EAAMkD,YAAYC,UACzBZ,aAAcvC,EAAMiD,WAAWV,gBASiBO,GAAzBE,CAA6C8R,ICzPlEe,G,4MACJ7V,MAAQ,CACNd,KAAM,KACNwO,YAAa,KACb8E,eAAe,EACfsD,iBAAiB,EACjBC,iBAAiB,EACjBrc,MAAO,IAAIkE,M,EAiBboY,SAAW/O,IAAMC,Y,EACjB+O,cAAgBhP,IAAMC,Y,EAEtBgP,WAAa,WACX,EAAKF,SAASjP,QAAQlG,MAAMsF,WAAa,SACzC,EAAKnF,MAAMmV,0B,EAGbxC,gBAAkB,WAChB,EAAKpT,SAAS,CAAEiS,eAAgB,EAAKxS,MAAMwS,iB,EAE7C4D,YAAc,WACZ,EAAK7V,SAAS,CAAEuV,iBAAkB,EAAK9V,MAAM8V,mB,EAE/CO,YAAc,WACZ,EAAK9V,SAAS,CAAEwV,iBAAkB,EAAK/V,MAAM+V,mB,EAG/CzH,oBAAsB,YAAiB,IAAdnN,EAAa,EAAbA,OACfzH,EAAgByH,EAAhBzH,MAAO0H,EAASD,EAATC,KACfrI,QAAQC,IAAImI,EAAQC,EAAM1H,GAC1B,EAAK6G,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,kBAEDkC,EAAO1H,S,EAIduZ,qBAAuB,SAAC7J,GACtB,EAAK7I,UAAS,SAAAI,GAAS,MAAK,CAC1BzB,KAAK,2BACAyB,EAAUzB,MADX,IAEFkK,OAAO,YAAKA,SAEZ,kBAAM,EAAKkN,aAAa,EAAKtW,MAAMd,U,EAGzCgD,SAAW,SAACxI,GACV,EAAK6G,SAAS,CAAE7G,UAAS,kBAAM,EAAKoa,eAAe,EAAK9T,MAAMtG,MAAQ,IAAIqa,UAAU,EAAG,QACvF,EAAKsC,e,EAGPvC,cAAgB,SAACrN,GAAU,IACjBvH,EAAS,EAAKc,MAAdd,KACFmW,EAAO,eAAQnW,GACrBmW,EAAQ7L,QAAU5L,KAAK5D,MAAMyM,GAC7B,EAAK6P,aAAajB,I,EAGpB/Q,gB,uCAAkB,WAAO+C,GAAP,iBAAA1O,EAAA,sDACV4d,EADU,eACM,EAAKvW,MAAMd,MACjCnG,QAAQC,IAAI,WAAYud,GAClBjP,EAAYiP,EAAShS,QAAQ1I,WAAU,SAAA0L,GAAU,OAAIA,EAAWhM,MAAQ8L,EAAO9L,OACrFxC,QAAQC,IAAI,WAAYsO,GACpBA,GAAa,GACfiP,EAAShS,QAAQiD,OAAOF,EAAW,GACnC,EAAK/G,SAAS,CAAErB,KAAMqX,MAEtBA,EAAShS,QAAQ5B,KAAK0E,GACtB,EAAK9G,SAAS,CAAErB,KAAMqX,KAGxB,EAAKD,aAAa,EAAKtW,MAAMd,MAbb,2C,wDAgBlBoX,aAAe,SAACE,GAAgC,IAAnBC,EAAkB,uDAAT,KAAS,EACpB,EAAKzV,MAAtB1F,EADqC,EACrCA,MAAOQ,EAD8B,EAC9BA,MACTqZ,EAAUrZ,EAAMqM,MAAMtM,WAAU,SAACqD,GAAD,OAAUA,EAAKnD,KAAO,EAAKiE,MAAMd,KAAKnD,MAC5ED,EAAMqM,MAAMgN,GAAWqB,EACvB,IAAM7a,EAAWL,EAAMM,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAC9ET,EAAMM,OAAOD,GAAYG,EACzB,EAAKyE,SAAS,CAAErB,KAAMsX,IAAe,WACnC,EAAKxV,MAAMpE,UAAUtB,GACjBmb,GAAQ,EAAKP,iB,EAIrB5B,aAAe,WAAO,IAAD,EACM,EAAKtT,MAAtB1F,EADW,EACXA,MAAOQ,EADI,EACJA,MACPoD,EAAS,EAAKc,MAAdd,KACFiW,EAAUrZ,EAAMqM,MAAMtM,WAAU,SAAC4P,GAAD,OAAcA,EAAS1P,KAAOmD,EAAKnD,MACzED,EAAMqM,MAAMX,OAAO2N,EAAS,GAC5B,IAAMxZ,EAAWL,EAAMM,OAAOC,WAAU,SAACgS,GAAD,OAAeA,EAAU9R,KAAOD,EAAMC,MAC9ET,EAAMM,OAAOD,GAAYG,EACzB,EAAKkF,MAAMpE,UAAUtB,GACrB,EAAK4a,c,kEAnGc,IAAD,EAElB7U,KAAKd,SAAS,CAAErB,KAAMmC,KAAKL,MAAM9B,KAAMwO,YAAW,UAAErM,KAAKL,aAAP,aAAE,EAAY0M,gB,6CAIhErM,KAAKd,SAAS,CACZrB,KAAM,KACNwO,YAAa,KACb8E,eAAe,EACfsD,iBAAiB,EACjBC,iBAAiB,M,+BAkGX,IAAD,SAC+E1U,KAAKrB,MAAnF0N,EADD,EACCA,YAAaxO,EADd,EACcA,KAAMsT,EADpB,EACoBA,cAAesD,EADnC,EACmCA,gBAAiBC,EADpD,EACoDA,gBAAiBrc,EADrE,EACqEA,MAE5E,OAAKwF,EAIH,qCACE,qBAAK0C,UAAU,0BAA0BqE,IAAK5E,KAAK2U,SAAUnU,QAASR,KAAK6U,WAAYrV,MAAO,CAC5FoL,SAAU,WACV8B,OAAQ,IAAMC,IAAK,EAAGE,KAAM,EAAGwI,MAAO,EAAGC,OAAQ,EACjDpT,gBAAiB,QAAS2C,QAAS,MAErC,sBAAKtE,UAAU,4BAA4Bf,MAAO,CAChDoL,SAAU,WACV8B,OAAQ,IAAOC,KAAgB,OAAXN,QAAW,IAAXA,OAAA,EAAAA,EAAaO,KAAgB,OAAXP,QAAW,IAAXA,OAAA,EAAAA,EAAaO,GAAI,GAAKC,MAAiB,OAAXR,QAAW,IAAXA,OAAA,EAAAA,EAAaS,GAAI,KAFrF,UAQE,sBAAKvM,UAAU,4BAAf,UACE,0BAAUA,UAAU,gCAAgCR,KAAK,QAAQ+L,KAAK,KAAKyJ,KAAK,OAAOxJ,KAAK,IAAIlL,SAAUb,KAAKiN,oBAAqB5U,MAAOwF,EAAKe,MAAOqI,WAAS,IAChK,wBAAQ1G,UAAU,4BAA4BC,QAAS,kBAAM,EAAKyU,aAAapX,EAAM,SAArF,qBAEF,sBAAK0C,UAAU,2CAAf,UACE,yBAAQA,UAAU,mCAAmCC,QAASR,KAAKsS,gBAAnE,UAAoF,sBAAM/R,UAAU,oCAAhB,SAClF,qBAAKI,IAAI,mFAAmFC,IAAI,YADlG,iBAGCuQ,GACC,qBAAK5Q,UAAU,kCAAkCf,MAAO,CAAEmN,KAAM,GAAI0I,OAAQ,KAA5E,SACE,cAAC9C,GAAD,CAAYD,gBAAiBtS,KAAKsS,gBAChCV,qBAAsB5R,KAAK4R,qBAAsB/T,KAAMA,MAC7D,yBAAQ0C,UAAU,sDAChBC,QAASR,KAAK+U,YADhB,UAC6B,sBAAMxU,UAAU,oCAAhB,SACzB,qBAAKI,IAAI,8EAA8EC,IAAI,aACtF,sBAAMpB,MAAO,CAAEgW,SAAU,GAAzB,+BAERf,GAAmB,qBAAKlU,UAAU,gCACjCf,MAAO,CAAEoL,SAAU,WAAY+B,IAAK,EAAGE,KAAM,GAD3B,SAElB,cAACvJ,GAAD,CAAWH,cAAenD,KAAK+U,YAC7B9R,gBAAiBjD,KAAKiD,gBACtBF,gBAAiB/C,KAAKL,MAAMoD,gBAAiBG,QAASrF,EAAKqF,QAC3DxJ,MAAOsG,KAAKL,MAAM1F,MAAMiJ,YAC5B,yBAAQ3C,UAAU,mCAAmCC,QAASR,KAAKgV,YAAnE,UACE,sBAAMzU,UAAU,oCAAhB,SACE,qBAAKI,IAAI,+EAA+EC,IAAI,YACvF,sBAAMpB,MAAO,CAAEgW,SAAU,GAAzB,iCACRd,GAAmB,sBAAKnU,UAAU,cAAf,UAClB,wBAAQC,QAASR,KAAKgV,YAAazU,UAAU,iBAA7C,oBACA,cAAC,KAAD,CAAUM,SAAUb,KAAKa,SAAUxI,MAAOA,OAE5C,yBAAQkI,UAAU,mCAAmCC,QAASR,KAAKiT,aAAnE,UACE,sBAAM1S,UAAU,oCAAhB,SACE,qBAAKI,IAAI,+EAA+EC,IAAI,YAE9F,sBAAMpB,MAAO,CAAEgW,SAAU,EAAGC,UAAW,QAAvC,gCArDQ,qBAAKlV,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,Y,GA1H9GY,aA8L5BS,GAAqB,CACzBlG,aAGWma,GAAqB/T,aARV,SAAChD,GAAD,MAAY,CAClC1E,MAAO0E,EAAMkD,YAAYC,aAOgCL,GAAzBE,CAA6C6S,IC5LlEmB,GAAb,4MACIhX,MAAQ,CACJiX,gBAAgB,EAChBC,WAAY,EACZC,uBAAuB,EACvBzJ,YAAa,CACTS,EAAG,KACHF,EAAG,MAEPmJ,kBAAkB,GAT1B,EAWIC,SAAWpQ,IAAMC,YAXrB,EA2CIwF,YAAc,SAACpR,GAAmC,IAA5BuB,EAA2B,wDAC7C9D,QAAQC,IAAI,QACZ,EAAKgI,MAAMpE,UAAUtB,EAAOuB,IA7CpC,EAgDIF,UAhDJ,sBAgDgB,4BAAAhE,EAAA,6DACAyC,EAAY,EAAK4F,MAAMsW,MAAMC,OAA7Bnc,QADA,SAEF,EAAK4F,MAAMrE,UAAUvB,GAFnB,OAGRY,EAAcQ,KAAK,YAAapB,GAHxB,2CAhDhB,EAsDIgN,WAtDJ,uCAsDiB,WAAOtM,GAAP,iBAAAnD,EAAA,6DACD2C,EAAU,EAAK0F,MAAf1F,OACFsS,EAFG,eAEctS,IACbM,OAAO+G,KAAK7G,GAHb,SAIH,EAAKkF,MAAMpE,UAAUgR,GAJlB,2CAtDjB,wDA+DI8F,cA/DJ,uCA+DoB,WAAOrK,GAAP,mBAAA1Q,EAAA,6DACJ2C,EAAU,EAAK0F,MAAf1F,MACFsS,EAFM,eAEWtS,GAEjBoF,EAAMkN,EAAUxE,OAAOvN,WAAU,SAAC4W,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,MAC7E6R,EAAUxE,OAAO5B,OAAO9G,EAAK,GALjB,SAQN,EAAKM,MAAMpE,UAAUgR,GARf,2CA/DpB,wDA0EImF,WA1EJ,uCA0EiB,WAAO1J,GAAP,mBAAA1Q,EAAA,6DACD2C,EAAU,EAAK0F,MAAf1F,OAIE8N,QACNoO,EAAWlc,EAAM8N,OAAOkK,MAAK,SAACb,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,MAE/D0b,EADAD,EACgBlc,EAAM8N,OAAOtH,KAAI,SAAC2Q,GAAD,OAAeA,EAAU1W,KAAOsN,EAAMtN,GAAKsN,EAAQoJ,KAEvE,sBAAOnX,EAAM8N,QAAb,CAAqBC,KAGtCoO,EAAgB,IAAItI,MAAM9F,GAG9B/N,EAAM8N,OAAN,YAAmBqO,GAhBV,SAiBH,EAAKzW,MAAMpE,UAAUtB,GAjBlB,2CA1EjB,wDA8FIoc,WA9FJ,sBA8FiB,gDAAA/e,EAAA,6DAAOgf,EAAP,+BAAqB,KAAMC,EAA3B,+BAA8C,KAC/Ctc,EAAU,EAAK0F,MAAf1F,MACFsS,EAFG,eAEctS,GAEnBqc,GAAeC,GACXD,EAAY1X,QAAU2X,EAAiB3X,QACnCoG,EAAWqO,GAAgBC,eAAe,EAAK3T,MAAMuB,aAAc,cAAe,KAAMoV,EAAa,MAAOC,GAChHhK,EAAUxH,WAAawH,EAAUxH,WAAW8I,QAAQ7I,GAAYuH,EAAUxH,WAAa,IAAI+I,MAAM9I,IAPhG,SAWH,EAAKrF,MAAMpE,UAAUgR,GAXlB,2CA9FjB,EA6GIX,UA7GJ,uCA6GgB,WAAO/N,EAAMxD,GAAb,qBAAA/C,EAAA,6DACA2C,EAAU,EAAK0F,MAAf1F,MACFsS,EAFE,eAEetS,GAFf,SAIeJ,EAAaO,gBAAgBH,EAAMC,IAAKG,GAJvD,cAIFC,EAJE,OAKRiS,EAAUhS,OAAOD,GAAUwM,MAAMxF,KAAKzD,GAEhCmH,EAAWqO,GAAgBC,eAAe,EAAK3T,MAAMuB,aAAc,cAAerD,EAAM0O,EAAUhS,OAAOD,GAAW,MAC1HiS,EAAUxH,WAAawH,EAAUxH,WAAW8I,QAAQ7I,GAAYuH,EAAUxH,WAAa,IAAI+I,MAAM9I,GARzF,UAUF,EAAKrF,MAAMpE,UAAUgR,GAVnB,4CA7GhB,0DA4HIiK,UAAY,SAACC,GAAY,IACbC,EAA2CD,EAA3CC,YAAaC,EAA8BF,EAA9BE,OAAQxN,EAAsBsN,EAAtBtN,YAAaxP,EAAS8c,EAAT9c,KAClCY,EAAW,EAAKoF,MAAM1F,MAAtBM,OACR,GAAKmc,EAAL,CACA,GAAa,UAAT/c,EAAkB,CAClB,IAAMid,EAAYrc,EAAO0X,MAAK,SAAAxX,GAAK,OAAIA,EAAMC,KAAOyO,KAIpD,OAHA5O,EAAO4L,OAAOwQ,EAAOzN,MAAO,GAC5B3O,EAAO4L,OAAOuQ,EAAYxN,MAAO,EAAG0N,QACpC,EAAKP,aAGT,IAAMC,EAAc/b,EAAO0X,MAAK,SAAAxX,GAAK,OAAIA,EAAMC,KAAOic,EAAO1L,eACvDsL,EAAmBhc,EAAO0X,MAAK,SAAAxX,GAAK,OAAIA,EAAMC,KAAOgc,EAAYzL,eACjE4L,EAAeP,EAAYxP,MAAMmL,MAAK,SAAApU,GAAI,OAAIA,EAAKnD,KAAOyO,KAChEmN,EAAYxP,MAAMX,OAAOwQ,EAAOzN,MAAO,GACvCqN,EAAiBzP,MAAMX,OAAOuQ,EAAYxN,MAAO,EAAG2N,GACpD,EAAKR,WAAWC,EAAaC,KA5IrC,EA+IIxC,cAAgB,WACZ,EAAK7U,SAAS,CAAE0W,gBAAiB,EAAKjX,MAAMiX,kBAhJpD,EAkJI5O,SAAW,SAACtC,GAA0B,IAAtBoS,EAAqB,uDAAN,EAE3B,GAAKA,EAAL,CACA,IAAMjB,EAAa,EAAKG,SAAStQ,QAAQmQ,WACzC,EAAK3W,SAAS,CACV2W,WAAYA,IACb,WACKiB,IACA,EAAKd,SAAStQ,QAAQmQ,YAAciB,QA1JpD,EA6JIhC,uBAAyB,SAACpM,GAOd,IAAD,KALP,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAKC,eACL,EAAKzJ,SAAS,CACVmN,YAAa,CAAES,EAAC,OAAEpE,QAAF,IAAEA,OAAF,EAAEA,EAAKC,cAAeiE,EAAC,OAAElE,QAAF,IAAEA,OAAF,EAAEA,EAAKC,eAC9CmN,uBAAwB,EAAKnX,MAAMmX,wBAGvC,EAAK5W,SAAS,CACVmN,YAAa,CAAES,EAAC,OAAEpE,QAAF,IAAEA,GAAF,UAAEA,EAAKhE,UAAP,aAAE,EAASmE,QAAS+D,EAAC,OAAElE,QAAF,IAAEA,GAAF,UAAEA,EAAKhE,UAAP,aAAE,EAASoE,SAChDgN,uBAAwB,EAAKnX,MAAMmX,yBAvKnD,EA4LIxK,cAAgB,SAAC5G,GAEb,EAAKxF,SAAS,CACVmN,YAAa,CAAES,EAAC,OAAEpI,QAAF,IAAEA,OAAF,EAAEA,EAAImE,QAAS+D,EAAC,OAAElI,QAAF,IAAEA,OAAF,EAAEA,EAAIoE,SACtCiN,kBAAmB,EAAKpX,MAAMoX,oBAhM1C,kEAYyB,IAAD,OAChBpb,EAAcE,QACdmF,KAAK1E,YACLX,EAAcI,GAAG,cAAc,SAACd,GAAD,OAAW,EAAKoR,YAAYpR,GAAO,MAElE+F,KAAK+W,kBAAoB7P,GAAgBnM,GAAG,eAAgBiF,KAAK+T,eACjE/T,KAAKgX,uBAAyB9P,GAAgBnM,GAAG,cAAeiF,KAAK0R,YACrE1R,KAAKiX,wBAA0B/P,GAAgBnM,GAAG,eAAgBiF,KAAKqS,eACvErS,KAAKkX,oCAAsChQ,GAAgBnM,GAAG,uBAAwBiF,KAAK8U,wBAC3F9U,KAAKmX,+BAAiCjQ,GAAgBnM,GAAG,kBAAmBiF,KAAKsL,iBArBzF,6CAiCQtL,KAAK+W,oBACL/W,KAAKgX,yBACLhX,KAAKiX,0BACLjX,KAAKkX,sCACLvc,EAAcS,YACd4E,KAAKL,MAAMyX,aACXpX,KAAKmX,mCAvCb,+BAqMc,IAAD,OACGld,EAAU+F,KAAKL,MAAf1F,MAER,GADAvC,QAAQC,IAAI,sCAAuCsC,IAC9CA,EAAO,OAAO,qBAAKsG,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,QAHxI,MAK0EJ,KAAKrB,MAA9EiX,EALD,EAKCA,eAAgBE,EALjB,EAKiBA,sBAAuBzJ,EALxC,EAKwCA,YAAa0J,EALrD,EAKqDA,iBAG1D,OACI,qCACK/V,KAAKL,MAAMyK,UAAYwL,GACpB,mCAEI,cAACrB,GAAD,CAAa1W,KAAMmC,KAAKL,MAAMyK,SAAU3P,MAAOuF,KAAKL,MAAM6M,UAAWuH,cAAe/T,KAAK+T,kBAGhGgC,GAAoB,cAAChJ,GAAD,CAAW9S,MAAOA,EAAOqR,cAAetL,KAAKsL,cAAee,YAAaA,EAAa5R,MAAOuF,KAAKL,MAAM6M,YAC5HsJ,GAAyB,cAACJ,GAAD,CAAoBzb,MAAOA,EAAO6a,uBAAwB9U,KAAK8U,uBAAwBzI,YAAaA,EAAaxO,KAAMmC,KAAKL,MAAMyK,SAAU3P,MAAOuF,KAAKL,MAAM6M,YACxL,cAAChG,GAAD,CAAa5H,MAAO3E,EAAM2E,MAAOsE,QAASjJ,EAAMiJ,QAAS6D,WAAY/G,KAAK+G,aAC1E,yBAASxG,UAAU,kBAAkBqE,IAAK5E,KAAKgW,SAAUhP,SAAUhH,KAAKgH,SAAxE,SACI,cAAC,KAAD,CAAiBwP,UAAWxW,KAAKwW,UAAjC,SACI,cAAC,KAAD,CAAWvL,YAAY,MAAMtR,KAAK,QAAQ0d,UAAU,aAApD,SACK,SAACjO,GAAD,OACG,8CAAK5J,MAAO,CAAEyC,MAA+B,IAAvBhI,EAAMM,OAAOsB,QAAiB+I,IAAKwE,EAASG,UAAcH,EAAS8B,gBAAzF,cACI,cAACiB,GAAD,CAAWd,YAAa,EAAKA,YAAa9Q,OAAQN,EAAMM,OAAQqR,UAAW,EAAKA,UAAW7E,WAAY,EAAKA,WAAYC,SAAU,EAAKA,WACtIoC,EAAStI,8BA9N9C,GAA+BE,aAmPzBS,GAAqB,CACvBnG,YACAC,YACA6b,WrC3NG,WACH,OAAO,SAAC3d,GACJ,IACIA,EAAS,CAAEE,KAAM,gBACnB,MAAOgO,GACLjQ,QAAQC,IAAI,8BAA+BgQ,OqCyN1C2P,GAAW3V,aAhBA,SAAAhD,GACpB,MAAO,CACH1E,MAAO0E,EAAMkD,YAAYC,UACzBsI,SAAUzL,EAAM0L,WAAWD,SAC3BoC,UAAW7N,EAAM0L,WAAWmC,UAC5BtL,aAAcvC,EAAMiD,WAAWV,gBAWUO,GAAzBE,CAA6CgU,I,8GC1PxD4B,GAAb,4MACE5Y,MAAQ,CACNtF,KAAM,CACJme,SAAU,GACVC,SAAU,IAEZ9P,IAAK,IANT,EAQE9E,aAAe,YAAiB,IAAd/C,EAAa,EAAbA,OACVgD,EAAQhD,EAAOC,KACf1H,EAAyB,WAAhByH,EAAOnG,MAAsBmG,EAAOzH,MAAQyH,EAAOzH,MAElE,EAAK6G,UAAS,SAAAI,GAAS,MAAK,CAC1BjG,KAAK,2BACAiG,EAAUjG,MADX,kBAEDyJ,EAAQzK,SAfjB,EAmBEqf,QAnBF,uCAmBY,WAAOhT,GAAP,SAAApN,EAAA,6DACRI,QAAQC,IAAI+M,GACZA,EAAGqB,iBAFK,SAINrB,EAAGqB,iBAJG,SAKA,EAAKpG,MAAM3G,MAAM,EAAK2F,MAAMtF,MAL5B,OAMN3B,QAAQC,IAAI,EAAKgI,MAAMuB,cACnB,EAAKvB,MAAMuB,cAAc,EAAKvB,MAAM0B,QAAQC,KAAK,WAP/C,kDASNoD,EAAGqB,iBACH,EAAKpG,MAAM0B,QAAQC,KAAK,UACxB5J,QAAQC,IAAI,QAAZ,MACA,EAAKuH,SAAS,CAAEyI,IAAK,YAZf,0DAnBZ,6GAkCY,IAAD,EACe3H,KAAKrB,MAAnBtF,EADD,EACCA,KAAMsO,EADP,EACOA,IACd,OACE,eAACgQ,GAAA,EAAD,CAAWC,UAAU,OAAOC,SAAS,KAArC,UACE,cAACC,GAAA,EAAD,IACA,sBAAKtY,MAAO,CACVuY,UAAW,OACXC,QAAS,OACTC,cAAe,SACfC,WAAY,UAJd,UAME,cAACC,GAAA,EAAD,CAAQ3Y,MAAO,CACbuK,OAAQ,OACR7H,gBAAiB,QAFnB,SAIE,cAAC,KAAD,MAEF,cAACkW,GAAA,EAAD,CAAYR,UAAU,KAAKS,QAAQ,KAAnC,mBAGA,qBAAK9X,UAAU,MAAf,SAAsBoH,IACtB,uBAAMnI,MAAO,CACXyC,MAAO,OACP8V,UAAW,OAFb,UAIE,cAACO,GAAA,EAAD,CACED,QAAQ,WACRtO,OAAO,SACP8B,UAAQ,EACR0M,WAAS,EACT7d,GAAG,WACHsN,MAAM,WACNjI,KAAK,WACLkH,WAAS,EACT5O,MAAOgB,EAAKme,SACZ3W,SAAUb,KAAK6C,eAEjB,cAACyV,GAAA,EAAD,CACED,QAAQ,WACRtO,OAAO,SACP8B,UAAQ,EACR0M,WAAS,EACTxY,KAAK,WACLiI,MAAM,WACNrO,KAAK,WACLe,GAAG,WACHqG,aAAa,mBACb1I,MAAOgB,EAAKoe,SACZ5W,SAAUb,KAAK6C,eAEhB8E,GAAO,uCACR,cAAC6Q,GAAA,EAAD,CACE7e,KAAK,SACL4e,WAAS,EACTF,QAAQ,YACR3X,MAAM,UACNlB,MAAO,CAAEuY,UAAW,QACpBvX,QAASR,KAAK0X,QANhB,mBAUA,eAACe,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CAAME,MAAI,EAACC,IAAE,EAACpZ,MAAO,CAAEuY,UAAW,QAAlC,SACE,cAACc,GAAA,EAAD,CAAMC,KAAK,IAAIT,QAAQ,QAAvB,gCAIF,cAACI,GAAA,EAAD,CAAME,MAAI,EAACnZ,MAAO,CAAEuY,UAAW,QAA/B,SACE,cAACc,GAAA,EAAD,CAAMC,KAAK,UAAUT,QAAQ,QAA7B,SACG,8CAMX,cAACU,GAAA,EAAD,CAAKC,GAAI,WA7GjB,GAA4BhY,aA6HtBS,GAAqB,CACzBzI,SAEWigB,GAAQtX,aAZS,SAAChD,GAE7B,MAAO,CACLjF,MAAOiF,EAAMiD,WAAWlI,MACxBwH,aAAcvC,EAAMiD,WAAWV,gBAQiBO,GAA/BE,CAAmD4V,I,SCzIlE2B,G,4MACJva,MAAQ,CACNtF,KAAM,CACJme,SAAU,GACVC,SAAU,IAEZ9P,IAAK,I,EAEP9E,aAAe,YAAiB,IAAd/C,EAAa,EAAbA,OACVgD,EAAQhD,EAAOC,KACf1H,EAAQyH,EAAOzH,MAErB,EAAK6G,UAAS,SAAAI,GAAS,MAAK,CAC1BjG,KAAK,2BACAiG,EAAUjG,MADX,kBAEDyJ,EAAQzK,S,EAyBfqf,Q,uCAAU,WAAOhT,GAAP,SAAApN,EAAA,+EAEA,EAAKqI,MAAM3G,MAAM,EAAK2F,MAAMtF,MAF5B,OAGN3B,QAAQC,IAAI,EAAKgI,MAAMuB,cACnB,EAAKvB,MAAMuB,cAAc,EAAKvB,MAAM0B,QAAQC,KAAK,WAJ/C,gDAON5J,QAAQC,IAAI,QAAZ,MACA,EAAKuH,SAAS,CAAEyI,IAAK,YARf,yD,6GAWA,IAAD,OACP,OACE,gCACE,wDACA,cAAC,KAAD,CACEwR,cAAe,CAAE3B,SAAU,GAAIC,SAAU,IAEzCpR,SAAUrG,KAAK0X,QAHjB,SAKG,gBAAG0B,EAAH,EAAGA,aAAH,OACC,eAAC,KAAD,WACE,cAAC,KAAD,CAAOzf,KAAK,OAAOoG,KAAK,WAAW8L,UAAQ,EAACxT,MAAO,EAAKsG,MAAMtF,KAAKme,SAAU3W,SAAU,EAAKgC,aAAc/B,YAAY,WAAWuY,GAAIf,OACrI,cAAC,KAAD,CAAcvY,KAAK,WAAWQ,UAAU,YACxC,cAAC,KAAD,CAAO5G,KAAK,WAAWkS,UAAQ,EAAC/K,YAAY,WAAWzI,MAAO,EAAKsG,MAAMtF,KAAKoe,SAAU5W,SAAU,EAAKgC,aAAcwW,GAAIf,KAAWvY,KAAK,aACzI,cAAC,KAAD,CAAcA,KAAK,WAAWQ,UAAU,UAAUqX,UAAU,SAC5D,wBAAQje,KAAK,SAAS2f,SAAUF,EAAhC,iC,GAlEQpY,aAqFhBS,GAAqB,CACzBzI,SAEWugB,GAAS5X,aAZQ,SAAChD,GAE7B,MAAO,CACLjF,MAAOiF,EAAMiD,WAAWlI,MACxBwH,aAAcvC,EAAMiD,WAAWV,gBAQkBO,GAA/BE,CAAmDuX,IChFnEM,G,4MACJ7a,MAAQ,CACNtF,KAAM,CACJme,SAAU,GACVja,SAAU,GACVka,SAAU,IAEZ9P,IAAK,CACHxC,IAAK,K,EAGTtC,aAAe,YAAiB,IAAd/C,EAAa,EAAbA,OACVgD,EAAQhD,EAAOC,KACf1H,EAAyB,WAAhByH,EAAOnG,MAAsBmG,EAAOzH,MAAQyH,EAAOzH,MAClE,EAAK6G,UAAS,SAAAI,GAAS,MAAK,CAC1BjG,KAAK,2BACAiG,EAAUjG,MADX,kBAEDyJ,EAAQzK,S,EAIfohB,a,uCAAe,WAAO/U,GAAP,SAAApN,EAAA,6DACboN,EAAGqB,iBADU,kBAGL,EAAKpG,MAAMzG,OAAO,EAAKyF,MAAMtF,MAHxB,OAIX,EAAKsG,MAAM0B,QAAQC,KAAK,WAJb,gDAMX,EAAKpC,SAAS,CAAEyI,IAAG,OANR,yD,6GAUL,IAAD,EACe3H,KAAKrB,MAAnBtF,EADD,EACCA,KAAMsO,EADP,EACOA,IACd,OACE,eAACgQ,GAAA,EAAD,CAAWC,UAAU,OAAOC,SAAS,KAArC,UACE,cAACC,GAAA,EAAD,IACA,sBAAKtY,MAAO,CACVuY,UAAW,OACXC,QAAS,OACTC,cAAe,SACfC,WAAY,UAJd,UAME,cAACC,GAAA,EAAD,CAAQ3Y,MAAO,CACbuK,OAAQ,OACR7H,gBAAiB,QAFnB,SAIE,cAAC,KAAD,MAEF,cAACkW,GAAA,EAAD,CAAYR,UAAU,KAAKS,QAAQ,KAAnC,qBAGA,qBAAK9X,UAAU,MAAf,SAAsBoH,GAAOA,EAAIxC,MACjC,uBAAMkB,SAAUrG,KAAKyZ,aAAcja,MAAO,CACxCyC,MAAO,OACP8V,UAAW,OAFb,UAIE,cAACO,GAAA,EAAD,CACED,QAAQ,SACRtO,OAAO,SACP8B,UAAQ,EACR0M,WAAS,EACT7d,GAAG,WACHsN,MAAM,WACNjI,KAAK,WACLkH,WAAS,EACT5O,MAAOgB,EAAKme,SACZ3W,SAAUb,KAAK6C,eAEjB,cAACyV,GAAA,EAAD,CACED,QAAQ,SACRtO,OAAO,SACP8B,UAAQ,EACR0M,WAAS,EACT7d,GAAG,WACHsN,MAAM,YACNjI,KAAK,WACL1H,MAAOgB,EAAKkE,SACZsD,SAAUb,KAAK6C,eAEjB,cAACyV,GAAA,EAAD,CACED,QAAQ,SACRtO,OAAO,SACP8B,UAAQ,EACR0M,WAAS,EACTxY,KAAK,WACLiI,MAAM,WACNrO,KAAK,WACLe,GAAG,WACHrC,MAAOgB,EAAKoe,SACZ5W,SAAUb,KAAK6C,eAEjB,cAAC2V,GAAA,EAAD,CACE7e,KAAK,SACL4e,WAAS,EACTF,QAAQ,YACR3X,MAAM,UACNlB,MAAO,CAAEuY,UAAW,QALtB,2BAWJ,cAACgB,GAAA,EAAD,CAAKC,GAAI,W,GAtGKhY,aAsHhBS,GAAqB,CACzBvI,O3ChGK,SAAgBU,GACnB,8CAAO,WAAOH,GAAP,eAAAnC,EAAA,+EAEoBwB,EAAYI,OAAOU,GAFvC,OAEOP,EAFP,OAGCI,EAAS,CAAEE,KAAM,SAAUN,SAH5B,gDAKC3B,QAAQC,IAAI,6BAAZ,MALD,yDAAP,wD2CiGS+hB,GAAS/X,aAXQ,SAAChD,GAE7B,MAAO,CACLjF,MAAOiF,EAAMiD,WAAWlI,SAQyB+H,GAA/BE,CAAmD6X,I,UC7H5DG,GAAb,4MACEhb,MAAQ,CACN1E,MAAO,MAFX,EAgBEqB,UAhBF,uCAgBc,WAAOvB,GAAP,SAAAzC,EAAA,sEACJ,EAAKqI,MAAMrE,UAAUvB,GADjB,2CAhBd,wDAoBE6f,iBAAmB,WACjB,IAAMC,EAAW,EAAKlb,MAAM1E,MAAMM,OAAOuf,QAAO,SAAC1K,EAAK3U,GAEpD,OADA2U,EAAI3U,EAAMmE,OAASnE,EAAMqM,MAAMjL,OACxBuT,IACN,IAIH,OAHA1X,QAAQC,IAAIkiB,GACZniB,QAAQC,IAAIoiB,OAAOC,KAAKH,GAAUpZ,KAAI,SAAA7B,GAAK,OAAIA,MAC/ClH,QAAQC,IAAIoiB,OAAOE,OAAOJ,GAAUpZ,KAAI,SAAA7B,GAAK,OAAIA,MAC1C,CAELmJ,OACEgS,OAAOC,KAAKH,GAAUpZ,KAAI,SAAA7B,GAAK,OAAIA,KACrCsb,SAAU,CAAC,CACT9iB,KAAM2iB,OAAOE,OAAOJ,GAAUpZ,KAAI,SAAA7B,GAAK,OAAIA,KAC3CsD,gBAAgB,YACX6X,OAAOC,KAAKH,GAAUpZ,KAAI,kBAAM/E,EAAY4C,qBAEjD6b,qBAAqB,YAChBJ,OAAOC,KAAKH,GAAUpZ,KAAI,iBAAM,kBAtC7C,EA6CE2Z,iBAAmB,WACjB,IAAMC,EAAY,EAAK1b,MAAM1E,MAAMM,OAAOuf,QAAO,SAAC1K,EAAK3U,GAQrD,OAPAA,EAAMqM,MAAMuI,SAAQ,SAAAxR,GAClBA,EAAKkK,OAAOsH,SAAQ,SAAArH,GACboH,EAAIpH,EAAMpJ,OACVwQ,EAAIpH,EAAMpJ,QAAU,EADFwQ,EAAIpH,EAAMpJ,OAAS,QAKvCwQ,IACN,IACH,MAAO,CACLrH,OAAO,YACDgS,OAAOC,KAAKK,GAAW5Z,KAAI,SAAA7B,GAAK,OAAIA,MAC1Csb,SAAU,CAAC,CACT9iB,KAAK,YAAK2iB,OAAOE,OAAOI,GAAW5Z,KAAI,SAAA7B,GAAK,OAAIA,MAChDsD,gBAAgB,YACX6X,OAAOC,KAAKK,GAAW5Z,KAAI,kBAAM/E,EAAY4C,qBAGlD6b,qBAAqB,YAChBJ,OAAOC,KAAKK,GAAW5Z,KAAI,iBAAM,kBAlE9C,EAwEE6Z,eAAiB,WACf,IAAIC,EAAU,EACVC,EAAoB,EAUxB,OATA,EAAK7b,MAAM1E,MAAMM,OAAO8U,SAAQ,SAAA5U,GAC9BA,EAAMqM,MAAMuI,SAAQ,SAAAxR,GAAS,IAAD,GACtB,UAAAA,EAAKqF,eAAL,eAAcrH,QAAS,GACzB2e,IAEFD,UAIG,CAAEA,UAASC,kBADlBA,EAAoBD,EAAUC,IAnFlC,4LAKkBxa,KAAKL,MAAM1F,MAL7B,uBAOUF,EAAUiG,KAAKL,MAAMsW,MAAMC,OAAOnc,QAP5C,SAQYiG,KAAK1E,UAAUvB,GAR3B,OASMrC,QAAQC,IAAIoC,GACZiG,KAAKd,SAAS,CAAEjF,MAAO+F,KAAKL,MAAM1F,QAAS,kBAAMvC,QAAQC,IAAI,EAAKgH,MAAM1E,UAV9E,OAYI+F,KAAKd,SAAS,CAAEjF,MAAO+F,KAAKL,MAAM1F,QAZtC,qIAwFI,OAAK+F,KAAKrB,MAAM1E,MAEd,sBAAKsG,UAAU,kBAAf,UACE,kDACA,yBAAQA,UAAU,wBAAlB,UACE,sBAAKA,UAAU,gCAAf,UAA+C,+BAAOP,KAAKsa,iBAAiBC,UAA5E,IAA4F,mDAC5F,sBAAKha,UAAU,gCAAf,UAA+C,+BAAOP,KAAKsa,iBAAiBE,oBAA5E,IAAsG,wDACtG,sBAAKja,UAAU,gCAAf,UAA+C,qCAA/C,IAA8D,sDAEhE,sBAAKA,UAAU,yBAAyBf,MAAO,CAAEuK,OAAQ,SAAUtH,OAAQ,QAASR,MAAO,QAASwY,SAAU,QAA9G,UAEE,cAAC,OAAD,CAAKC,QAAS,CACZC,OAAQ,CACNC,MAAO,CAAC,CACNC,SAAS,EACTC,UAAW,CACT9C,SAAS,EACTtX,MAAO,2BAGXqa,MAAO,CAAC,CACND,UAAW,CACT9C,SAAS,MAIfpZ,MAAO,CACLoZ,SAAS,EACTlc,KAAM,iBACNkf,SAAU,IAEZC,OAAQ,CACNjD,SAAS,EACTpN,SAAU,SAEZ7C,OAAQ,CACNmT,UAAW,iBAEZ3a,UAAU,OAAOnJ,KAAM4I,KAAK4Z,qBAC/B,cAAC,YAAD,CAAUc,QAAS,CACjBC,OAAQ,CACNC,MAAO,CAAC,CACNC,SAAS,EACTC,UAAW,CACT9C,SAAS,EACTtX,MAAO,2BAGXqa,MAAO,CAAC,CACND,UAAW,CACT9C,SAAS,MAIfpZ,MAAO,CACLoZ,SAAS,EACTlc,KAAM,iBACNkf,SAAU,IAEZC,OAAQ,CACNjD,SAAS,EACTpN,SAAU,UAEXrK,UAAU,OAAOnJ,KAAM4I,KAAKoa,2BA/DP,qBAAK7Z,UAAU,iBAAf,SAAgC,cAAC,KAAD,CAAQA,UAAU,SAAS5G,KAAK,WAAW+G,MAAM,OAAO+B,OAAQ,IAAKR,MAAO,IAAK7B,QAAS,YAxF5J,GAAgCY,aAmK1BS,GAAqB,CACzBjI,YACA8B,aAGW6f,GAAYxZ,aAVD,SAAChD,GAAD,MAAY,CAClC1E,MAAO0E,EAAMkD,YAAYC,UACzBpI,MAAOiF,EAAMiD,WAAWlI,SAQwB+H,GAAzBE,CAA6CgY,ICnJtE,IAIMlY,GAAqB,CACzBlG,aAIW6f,GAAMzZ,aATK,SAAChD,GAAD,MAAY,CAClCmD,UAAWnD,EAAMkD,YAAYC,aAQaL,GAAzBE,EA3BZ,YAA8B,IAAdG,EAAa,EAAbA,UACrB,OACE,sBAAKvB,UAAU,MAAMf,MAAO,CAAEC,gBAAgB,OAAD,OAAUqC,EAAaA,EAAUtC,MAAMC,gBAAkB,QAAzD,MAA7C,UACE,cAACiC,GAAD,IACA,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOkW,UAAW2B,GAAQ8B,KAAK,YAC/B,cAAC,IAAD,CAAOzD,UAAWqB,GAAOoC,KAAK,WAC9B,cAAC,IAAD,CAAOzD,UAAW8B,GAAQ2B,KAAK,YAC/B,cAAC,IAAD,CAAOzD,UAAWuD,GAAWE,KAAK,8BAClC,cAAC,IAAD,CAAOzD,UAAWN,GAAU+D,KAAK,oBACjC,cAAC,IAAD,CAAOzD,UAAWlV,GAAQ2Y,KAAK,YAC/B,cAAC,IAAD,CAAOzD,UAAW0D,QAAMD,KAAK,e,mBCxB/BE,GAAe,CACnBzZ,UAAW,KACXU,OAAQ,ICFV,IAAM+Y,GAAe,CACnBnR,SAAU,KACVoC,UAAW,MCDb,IAAM+O,GAAe,CAEnBra,aAAc3I,KAAKI,MAAML,eAAekjB,QAAQ,kBAAoB,KACpE9hB,MAAO,GACPkJ,SAAU,CAAErF,SAAU,KCGxB,IAAMke,GAAcC,aAAgB,CAChC7Z,YHJG,WAAqD,IAA/BlD,EAA8B,uDAAtB4c,GAAchI,EAAQ,uCACzD,OAAQA,EAAO5Z,MACb,IAAK,aACH,OAAO,2BAAKgF,GAAZ,IAAmB6D,OAAQ+Q,EAAO/Q,SACpC,IAAK,YACH,OAAO,2BAAK7D,GAAZ,IAAmBmD,UAAU,eAAMyR,EAAOtZ,SAC5C,IAAK,eACH,OAAO,2BAAK0E,GAAZ,IAAmBmD,UAAWyR,EAAOtZ,QACvC,IAAK,cACH,OAAO,2BAAK0E,GAAZ,IAAmBmD,UAAW,OAChC,IAAK,YACH,OAAO,2BAAKnD,GAAZ,IAAmB6D,OAAO,GAAD,mBAAM7D,EAAM6D,QAAZ,CAAoB+Q,EAAOtZ,QAAQ6H,UAAU,eAAMyR,EAAOtZ,SACrF,IAAK,aACH,OAAO,2BACF0E,GADL,IACY6D,OAAQ7D,EAAM6D,OAAO/B,KAAI,SAAAxG,GACjC,OAAIA,EAAMC,MAAQqZ,EAAOtZ,MAAMC,IAAYqZ,EAAOtZ,MACtCA,OAGlB,QACE,OAAO0E,IGfT0L,WFLG,WAAoD,IAA/B1L,EAA8B,uDAAtB4c,GAAchI,EAAQ,uCACxD,OAAQA,EAAO5Z,MACb,IAAK,WACH,OAAO,2BAAKgF,GAAZ,IAAmByL,SAAS,eAAMmJ,EAAO1V,QAC3C,IAAK,YACH,OAAO,2BAAKc,GAAZ,IAAmB6N,UAAU,eAAM+G,EAAO9Y,SAC5C,IAAK,cACH,OAAO,2BAAKkE,GAAZ,IAAmB6N,UAAW+G,EAAO3a,MAAOwR,SAAUmJ,EAAO3a,QAC/D,QACE,OAAO+F,IEHTiD,WDHG,WAAoD,IAA/BjD,EAA8B,uDAAtB4c,GAAchI,EAAQ,uCACxD,OAAQA,EAAO5Z,MACb,IAAK,YACH,OAAO,2BAAKgF,GAAZ,IAAmBjF,MAAO6Z,EAAO7Z,QACnC,IAAK,WACH,OAAO,2BAAKiF,GAAZ,IAAmBuC,aAAcqS,EAAOla,OAC1C,IAAK,QACH,OAAO,2BAAKsF,GAAZ,IAAmBuC,aAAa,eAAMqS,EAAOla,QAC/C,IAAK,SACH,OAAO,2BAAKsF,GAAZ,IAAmBuC,aAAc,OACnC,IAAK,SACH,OAAO,2BAAKvC,GAAZ,IAAmBjF,MAAM,GAAD,mBAAMiF,EAAMjF,OAAZ,CAAmB6Z,EAAOla,OAAO6H,aAAcqS,EAAOla,OAChF,QACE,OAAOsF,MCNPgd,GAAmB5jB,OAAO6jB,sCAAwCC,KAC3D1jB,GAAQ2jB,aAAYL,GAAaE,GAAiBI,aAAgBC,QAC/EjkB,OAAOkkB,SAAW9jB,GAClBA,GAAM+jB,WAAU,WACZxkB,QAAQC,IAAI,mBAAoBQ,GAAMgkB,eCPtBC,QACW,cAA7BrkB,OAAOC,SAASqkB,UAEe,UAA7BtkB,OAAOC,SAASqkB,UAEhBtkB,OAAOC,SAASqkB,SAASpG,MAAM,2DCjBnC,IAYeqG,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,OCGdQ,IAASC,OACP,cAAC,IAAD,CAAU7kB,MAAOA,GAAjB,SACE,cAAC,IAAD,UACE,cAACijB,GAAD,QAIJ6B,SAASC,eAAe,SF8GpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBZ,MAAK,SAACa,GACLA,EAAaC,gBAEdC,OAAM,SAACC,GACN/lB,QAAQ+lB,MAAMA,EAAMC,YEzG5BpB,O","file":"static/js/main.4d8ce2ca.chunk.js","sourcesContent":["import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n// : '//localhost:3030/'\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login')\r\n        }\r\n        throw err\r\n    }\r\n}","export const storageService = {\r\n  store,\r\n  load,\r\n  clear\r\n}\r\n\r\nfunction store(key, value) {\r\n  sessionStorage[key] = JSON.stringify(value);\r\n\r\n}\r\n\r\nfunction load(key, defaultValue = null) {\r\n  let value = sessionStorage[key];\r\n  if (!value) return defaultValue\r\n  else return JSON.parse(value);\r\n}\r\n\r\n\r\nfunction clear() {\r\n  sessionStorage.clear()\r\n}\r\n\r\n","import { httpService } from './httpService.js'\r\nimport { storageService } from './sessionStorage.js'\r\n\r\nconst STORAGE_KEY = 'loggedinUser'\r\n\r\n\r\nexport const userService = {\r\n    query,\r\n    login,\r\n    logout,\r\n    signup,\r\n    loadUser\r\n}\r\n\r\n\r\n\r\n// const baseUrl = 'http://localhost:3030/api/user'\r\n// const baseUrl = 'http://localhost:3030/user'\r\n// const baseUrl = 'http://localhost:3030/api/auth';\r\n\r\nasync function query() {\r\n    return httpService.get(`user`)\r\n}\r\n\r\nasync function login(credentials) {\r\n    //loadUser()\r\n    const user = await httpService.post(`auth/login`, credentials);\r\n    return _handleLogin(user);\r\n}\r\n\r\nasync function logout() {//check with liel how to do this\r\n    storageService.clear();\r\n    await httpService.post(`auth/logout`);\r\n}\r\n\r\n\r\nasync function signup(credentials) {\r\n    // console.log('credentials', credentials)\r\n    const newUser = await httpService.post(`auth/signup`, credentials);\r\n    return _handleLogin(newUser);\r\n}\r\n\r\nasync function loadUser() {\r\n    const user = storageService.load(STORAGE_KEY)\r\n    // console.log('user', user);\r\n    return user\r\n}\r\nfunction _handleLogin(user) {\r\n    storageService.store(STORAGE_KEY, user)\r\n    return user\r\n}","import { userService } from '../../services/userService.js'\r\n\r\n\r\nexport function loadUsers() {\r\n    return async (dispatch) => {\r\n        try {\r\n            const users = await userService.query()\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('err userAction LOAD users', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function login(userCred) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.login(userCred)\r\n            dispatch({ type: 'LOGIN', user })\r\n        } catch (err) {\r\n            console.log('err userAction LOGIN USER', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    return async (dispatch) => {\r\n        try {\r\n            await userService.logout()\r\n            dispatch({ type: 'LOGOUT' })\r\n        } catch (err) {\r\n            console.log('err userAction LOGOUT USER', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function signup(userCred) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.signup(userCred)\r\n            dispatch({ type: 'SIGNUP', user })\r\n        } catch (err) {\r\n            console.log('err userAction SIGNUP USER', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function loadUser(userCred) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.loadUser(userCred)\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('err userAction LOAD USER', err);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function setUserFilter(filterBy) {\r\n    return (dispatch) => { dispatch({ type: 'FILTER', filterBy }) }\r\n}","import { httpService } from './httpService.js'\r\n\r\nexport const boardService = {\r\n    query,\r\n    remove,\r\n    save,\r\n    getBoardById,\r\n    getGroupIdxById,\r\n}\r\n\r\nfunction query() {\r\n    return httpService.get(`board`)\r\n}\r\n\r\nfunction remove(boardId) {\r\n    return httpService.delete(`board/${boardId}`)\r\n}\r\nfunction save(board) {\r\n    if (board._id) {\r\n        return httpService.put(`board/${board._id}`, board)\r\n    } else {\r\n        return httpService.post('board', board)\r\n    }\r\n}\r\n\r\nfunction getBoardById(boardId) {\r\n    return httpService.get(`board/${boardId}`)\r\n}\r\n\r\nasync function getGroupIdxById(boardId, groupId) {\r\n    try {\r\n        const board = await getBoardById(boardId)\r\n        const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n        return groupIdx\r\n    } catch (err) {\r\n        console.log('err boardService GET GROUP IDX BY ID', err)\r\n    }\r\n}\r\n\r\n","import io from 'socket.io-client'\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production') ? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', { from: 'Someone', txt: 'Aha it worked!' })\r\n    },\r\n  }\r\n  return socketService\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) { console.log(x) }\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import { boardService } from '../../services/boardService.js'\r\nimport { socketService } from '../../services/socketService.js';\r\n\r\nexport function loadBoards() { // Action Creator\r\n    return async (dispatch) => {\r\n        try {\r\n            const boards = await boardService.query()\r\n            dispatch({ type: 'SET_BOARDS', boards })\r\n        } catch (err) {\r\n            console.log('err boardAction LOAD BOARDS', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function loadBoard(boardId) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.getBoardById(boardId)\r\n            console.log('board from DISPATCH', board)\r\n            dispatch({ type: 'SET_BOARD', board })\r\n        } catch (err) {\r\n            console.log('err boardAction LOAD BOARD', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function saveBoard(board, isRenderSocket = false) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const savedBoard = await boardService.save(board)\r\n            // console.log('savedBoard', savedBoard);\r\n            if (!isRenderSocket) {\r\n                socketService.emit('render', board)\r\n                // socketService.emit('render', board)\r\n            }\r\n            dispatch({ type: (board._id) ? 'UPDATE_BOARD' : 'ADD_BOARD', board: savedBoard })\r\n        } catch (err) {\r\n            console.log('err boardAction SAVE BOARD', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function cleanBoard() {\r\n    return (dispatch) => {\r\n        try {\r\n            dispatch({ type: 'CLEAN_BOARD' })\r\n        } catch (err) {\r\n            console.log('err boardAction CLEAN BOARD', err);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","export const utilService = {\r\n  getRandomInt,\r\n  makeId,\r\n  createTime,\r\n  getDueDate,\r\n  convertName,\r\n  getTodoProgress,\r\n  getRandomColor\r\n}\r\n\r\n\r\nfunction getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nfunction makeId(length = 7) {\r\n  var text = \"\";\r\n  var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n}\r\n\r\nfunction createTime() {\r\n  var timeNow = new Date();\r\n  var hours = timeNow.getHours();\r\n  var minutes = timeNow.getMinutes();\r\n  var seconds = timeNow.getSeconds();\r\n  var timeString = \"\" + ((hours > 12) ? hours - 12 : hours);\r\n  timeString += ((minutes < 10) ? \":0\" : \":\") + minutes;\r\n  timeString += ((seconds < 10) ? \":0\" : \":\") + seconds;\r\n  return timeString;\r\n}\r\n\r\nfunction getDueDate(timeStamp) {\r\n  var stampDate = new Date(timeStamp);\r\n  const allMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\",\r\n    \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n  const month = allMonths[stampDate.getMonth()]\r\n  const day = stampDate.getDate()\r\n  const date = `${month} ${day}`\r\n  return date\r\n}\r\n\r\nfunction convertName(fullname) {\r\n  if (!fullname) return\r\n  let letterName;\r\n  const names = fullname.split(' ')\r\n  if (!names[1]) letterName = names[0][0].toUpperCase()\r\n  else letterName = names[0][0].toUpperCase() + names[1][0].toUpperCase()\r\n  return letterName\r\n}\r\n\r\nfunction getTodoProgress(card) {\r\n  if (card.checklist) {\r\n    const { todos } = card.checklist\r\n    let doneTodos = todos.filter(todo => todo.isDone)\r\n    const progress = { total: todos.length, done: doneTodos.length }\r\n    return progress\r\n  }\r\n  else return\r\n\r\n}\r\nfunction getRandomColor() {\r\n  var colors = ['#f9ed69', '#f08a5d', '#54e346', '#00adb5', '#6a2c70', '#b83b5e']\r\n\r\n  return colors[getRandomInt(0, 6)];\r\n}\r\n","import React, { Component } from 'react'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nexport class AddBoard extends Component {\r\n\r\n    state = {\r\n        board: {\r\n            title: '',\r\n            imgUrlLarge: '',\r\n            imgUrlmedium: ''\r\n        },\r\n        mounted: false,\r\n        picked: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ mounted: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n    // coverColors = () => {\r\n    //     return ['#f9ed69', '#a56cc1', '#f38181', '#95e1d3', '#878ecd', '#3fc1c9',\r\n    //         '#a1dd70', '#ffcc29']\r\n    // }\r\n\r\n    bgColors = () => {\r\n\r\n        return [{ imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_300/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg'},\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg'},\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg'},\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_300/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg'},\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712052/pexels-pixabay-461940_znnsxj.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_300/v1610712052/pexels-pixabay-461940_znnsxj.jpg'},\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/v1611084082/green-1_rp1fjx.jpg', imgUrlmedium:'https://res.cloudinary.com/basimgs/image/upload/v1611084082/green-1_rp1fjx.jpg' },\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/v1611084082/cooldownpink_y0m0db.jpg', imgUrlmedium:'https://res.cloudinary.com/basimgs/image/upload/v1611084082/cooldownpink_y0m0db.jpg' },\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/v1611084082/mizu_qlr5uq.png', imgUrlmedium:'https://res.cloudinary.com/basimgs/image/upload/v1611084082/mizu_qlr5uq.png' },\r\n        { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/v1611084082/0322_purple_hkmphn.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/v1611084082/0322_purple_hkmphn.jpg'}]\r\n      }\r\n\r\n    setBgcImg = (imgUrlLarge, imgUrlmedium, idx) => {\r\n        console.log('the chosen url is', imgUrlLarge);\r\n        this.setState(prevState => {\r\n            return {board: { ...prevState.board, imgUrlLarge, imgUrlmedium}}\r\n        })\r\n        this.setState({ picked: idx })\r\n    }\r\n\r\n    onAddBoard = () => {\r\n        const { title, imgUrlLarge, imgUrlmedium } = this.state.board\r\n        const board = { title, style: {backgroundImage: imgUrlLarge, backgroundImagePreview: imgUrlmedium} }\r\n        this.props.addBoard(board)\r\n        this.onClose()\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const { name } = target\r\n        const { value } = target\r\n        this.setState(prevState => {\r\n            return {\r\n                board: {\r\n                    ...prevState.board,\r\n                    [name]: value\r\n                }\r\n            }\r\n        }, () => console.log('input title',this.state.board.title ))\r\n    }\r\n\r\n    render() {\r\n        const { mounted, picked } = this.state\r\n        return (\r\n            <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleAddBoard}>\r\n            <div className=\"new-board-modal flex column\">\r\n            <div className=\"new-board-header flex space-around\">\r\n                <h3>Create New Board</h3><button onClick={this.onClose}></button>\r\n            </div>\r\n                <div className=\"board-cover-colors\">\r\n                        {this.bgColors().map((color, idx) => {\r\n                            return <div className={(picked === idx)? \"new-board-color picked\": \"new-board-color\"} key={idx}\r\n                                onClick={() => this.setBgcImg(color.imgUrlLarge ,color.imgUrlmedium, idx)}><img src={color.imgUrlmedium} alt=\"\"/></div>\r\n                        })}\r\n                </div>\r\n                <input type=\"text\" name=\"title\" value={this.state.title} onChange={this.handleInput}\r\n                    className=\"add-board-input\" placeholder=\"Enter a board title...\" autoComplete=\"off\"/>\r\n                    <button onClick={this.onAddBoard} className=\"create-board-btn\">Create board</button>\r\n            </div>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}\r\n","import { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { Component } from 'react'\r\nimport { logout, loadUser } from '../store/actions/userAction.js'\r\nimport { saveBoard } from '../store/actions/boardAction'\r\nimport { utilService } from '../services/utilService.js'\r\nimport { AddBoard } from './BoardHeader/AddBoard.jsx'\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass _AppHeader extends Component {\r\n\r\n  state = {\r\n    loggedInUser: null,\r\n    isAddBoardShow: false,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // console.log(this.props);\r\n    const user = await this.props.loadUser()\r\n    if (user) this.setState({ loggedInUser: user })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // console.log('prevProps', prevProps);\r\n    // console.log('prevState', prevState);\r\n    // console.log('state', this.state);\r\n    if (this.props.loggedInUser !== this.state.loggedInUser)\r\n      this.setState({ loggedInUser: this.props.loggedInUser })\r\n  }\r\n\r\n  toggleAddBoard = () => {\r\n    this.setState({ isAddBoardShow: !this.state.isAddBoardShow })\r\n  }\r\n\r\n  addBoard = async (board) => {\r\n    await this.props.saveBoard(board, true)\r\n    const newBoardId = this.props.board._id\r\n    console.log('newBoardId', newBoardId)\r\n    this.props.history.push(`/`)\r\n    this.props.history.push(`board/${newBoardId}`)\r\n  }\r\n\r\n  render() {\r\n    // window.loggedInUser = this.state\r\n    const { loggedInUser, isAddBoardShow } = this.state\r\n    // if (!loggedInUser) return <div>Loading...</div>\r\n    // console.log('LOGGED IN USER', loggedInUser);\r\n    return (\r\n      <>\r\n        {isAddBoardShow && <AddBoard addBoard={this.addBoard} toggleAddBoard={this.toggleAddBoard} />}\r\n        <header className=\"app-header flex space-between\">\r\n          <nav>\r\n            <ul className=\"header-list flex justify-center\">\r\n              <li ><Link to=\"/\" className=\"home-btn\"><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625350/home_seebre.png\" alt=\"\" /></Link></li>\r\n              <li ><Link to=\"/boards\" className=\"boards-btn\">Boards</Link></li>\r\n            </ul>\r\n          </nav>\r\n          <li ><Link to=\"/\" className=\"header-title\">Trello</Link></li>\r\n          <div className=\"header-right flex\">\r\n            <button className=\"header-add-board-btn\" onClick={this.toggleAddBoard}><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png\" alt=\"\" /></button>\r\n            {loggedInUser && <> <div className=\"header-user-logged-in\">{utilService.convertName(loggedInUser.fullname)}</div> <button className=\"header-log-board-btn\" onClick={this.props.logout}> Logout</button></>}\r\n            {!loggedInUser && <>  <div className=\"header-user-logged-in\">{'G '} </div> <button className=\"header-log-board-btn\"><Link to=\"/login\">Login</Link></button></>}\r\n          </div>\r\n        </header>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapGlobalStateToProps = (state) => {\r\n  return {\r\n    loggedInUser: state.userModule.loggedInUser,\r\n    board: state.boardModule.currBoard\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  loadUser,\r\n  saveBoard,\r\n}\r\n\r\nexport const AppHeader = connect(mapGlobalStateToProps, mapDispatchToProps)(withRouter(_AppHeader))\r\n","import { Link } from 'react-router-dom'\r\n\r\nexport function BoardPreview({ board }) {\r\n    return (\r\n        <Link style={{ width: '280px' }} to={`/board/${board._id}`}>\r\n            <div style={{\r\n                backgroundImage: `url(${board.style.backgroundImagePreview})`, backgroundColor: \"#6DB3F2\",\r\n                backgroundRepeat: \"no-repeat\",\r\n                backgroundSize: \"cover\",\r\n                backgroundPosition: \"center\",\r\n                // background: \"linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.65) 100%)\",\r\n            }} className=\"board-preview\">\r\n                <h1 >{board.title}</h1>\r\n            </div>\r\n        </Link>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { BoardPreview } from '../cmps/BoardPreview'\r\nimport { loadBoards, saveBoard } from '../store/actions/boardAction'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nexport class _Boards extends Component {\r\n    componentDidMount() {\r\n        this.props.loadBoards()\r\n    }\r\n\r\n    // componentDidUpdate(prevProps) {\r\n    //     if (this.props.boards === prevProps.boards && this.props.board) {\r\n    //         this.props.loadBoards()\r\n    //         console.log('this.props UPDATE', this.props)\r\n    //         // this.props.history.push(`board/${this.props.board._id}`)\r\n    //     }\r\n    // }\r\n\r\n    addBoard = async () => {\r\n        const board = { title: 'New Board', style: {} }\r\n        await this.props.saveBoard(board, true)\r\n        console.log('board to add new', board);\r\n        this.props.history.push(`board/${this.props.board._id}`)\r\n    }\r\n    // const board = { title: 'New Board' }\r\n    // await this.props.saveBoard(board, true)\r\n    // console.log('this.props', this.props.board._id)\r\n    // addBoard = async () => {\r\n    //     const board = { title: 'New Board' }\r\n    //     await this.props.saveBoard(board)\r\n    //     console.log('board', board)\r\n    //     this.props.history.push(`board/${this.props.board._id}`)\r\n    // }\r\n\r\n    render() {\r\n        const { boards } = this.props\r\n        if (!boards) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n        // console.log('this.props UPDATE', this.props)\r\n        return (\r\n            <div className=\"boards-page\">\r\n                <h2>Our Boards</h2>\r\n                <section className=\"boards-container\">\r\n                    <div className=\"new-board\" onClick={this.addBoard}><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png\" alt=\"\" /></div>\r\n                    {boards.map(board => {\r\n                        return <BoardPreview key={board._id} board={board} />\r\n                    })}\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardModule.boards,\r\n        board: state.boardModule.currBoard,\r\n        // loggedInUser: state.userModule.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    saveBoard,\r\n    // removeBoard,\r\n}\r\n\r\n\r\n\r\nexport const Boards = connect(mapStateToProps, mapDispatchToProps)(_Boards);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { utilService } from '../services/utilService'\r\nimport Input from '@material-ui/core/Input';\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nexport class _AddMember extends Component {\r\n\r\n    state = {\r\n        mounted: false,\r\n        filterBy: {\r\n            fullname: '',\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ mounted: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const field = target.name\r\n        const value = target.value\r\n\r\n        this.setState(prevState => ({ filterBy: { ...prevState.filterBy, [field]: value } }), () => {\r\n            this.props.onSetUserFilter(this.state.filterBy)\r\n        })\r\n    }\r\n\r\n    onToggleUser = (user) => {\r\n        this.props.onUpdateMembers(user)\r\n        // console.log('check', user);\r\n    }\r\n\r\n    render() {\r\n        const { users, members } = this.props\r\n        const { filterBy, mounted } = this.state\r\n        // console.log('current members', members);\r\n        return (\r\n            <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleMembers}>\r\n                <div className=\"members-container header-members\">\r\n                    <div className=\"add-member-header flex spase-between\">\r\n                        <h3>Members</h3>\r\n                        <button onClick={this.onClose} className=\"member-close-btn\"></button>\r\n                    </div>\r\n                    <Input type=\"text\" name=\"fullname\" value={filterBy.fullname} onChange={this.handleChange} placeholder=\"Search members...\" />\r\n                    <div className=\"new-member-list flex column\">\r\n                        {users.map(user => <div key={user._id} className=\"member-items flex space-between\" onClick={() => this.onToggleUser(user)}>\r\n                            <div className=\"flex space-between\"><div className=\"member-item\" style={{backgroundColor: user.color? user.color: \"#3f72af\"}}><span>{utilService.convertName(user.fullname)}</span>\r\n                            </div>\r\n                                <p>{user.fullname}</p></div>\r\n                            <button className={(members.findIndex(currUser => currUser._id === user._id) > -1) ?\r\n                                'checked-member' : 'unchecked-member'}>\r\n                                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610900476/checked_etlnj9.png\" alt=\"\" />\r\n                            </button>\r\n                        </div>)}\r\n                    </div>\r\n                </div>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // users: state.userModule.users\r\n        //   board: state.boardModule.currBoard,\r\n        // filterBy: state.boardModule.filterBy,\r\n        // loggedInUser: state.userModule.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const AddMember = connect(mapStateToProps, mapDispatchToProps)(_AddMember);\r\n","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { saveBoard } from '../../store/actions/boardAction.js'\r\n\r\nclass _BoardColors extends Component {\r\n  bgColors = () => {\r\n\r\n    return [{ imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731294/blue_icz7cd.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731552/yellow_acyunw.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731568/yellow2_gakpte.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731599/green-1_h78uob.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731662/green-2_ura9cy.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731705/red-1_mrdvf7.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731707/red-2_vo74ot.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731757/gray-1_rpkrjg.png' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731759/gray-2_shnjdu.jpg' },\r\n    { imgUrl: 'https://res.cloudinary.com/dxh5keaol/image/upload/v1610731294/blue_icz7cd.jpg' },]\r\n  }\r\n  getImgForBgc = async (imgUrl) => {\r\n    const { currBoard } = this.props\r\n    currBoard.style.backgroundImage = imgUrl\r\n    await this.props.saveBoard(currBoard)\r\n    this.props.toggleMenu()\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"board-colors flex justify-center\">\r\n        {this.bgColors().map((color, idx) => { return <div className=\"menu-img-box\" key={idx} ><img  className=\"board-colors-grid\" onClick={() => this.getImgForBgc(color.imgUrl)} src={color.imgUrl} alt=\"not good\" /></div> })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  currBoard: state.boardModule.currBoard\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n\r\n}\r\n\r\nexport const BoardColors = connect(mapStateToProps, mapDispatchToProps)(_BoardColors)\r\n","\r\nimport { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { saveBoard } from '../../store/actions/boardAction.js'\r\nclass _BoardPhotos extends Component {\r\n\r\n \r\n  photos = () => {\r\n    return [{ imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712043/pexels-roberto-nickson-2885320_ghwa3m.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712043/pexels-vishnu-r-nair-1105666_nkvc5j.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712045/pexels-eberhard-grossgasteiger-844297_xsbtqx.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712048/pexels-eberhard-grossgasteiger-1287145_iyiwh5.jpg'},\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814688/pexels-asad-photo-maldives-1450353_oq4mbu.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814689/pexels-frans-van-heerden-624015_fjsy7m.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610814691/pexels-asad-photo-maldives-3601425_h5x2md.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712052/pexels-pixabay-461940_znnsxj.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712052/pexels-pixabay-461940_znnsxj.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712052/pexels-pixabay-461940_znnsxj.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063807/pexels-pixabay-33545_zzzi4o.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063807/pexels-pixabay-33545_zzzi4o.jpg' , imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063807/pexels-pixabay-33545_zzzi4o.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063800/pexels-steve-397857_n8hqga.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063800/pexels-steve-397857_n8hqga.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063800/pexels-steve-397857_n8hqga.jpg' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1611063805/pexels-roberto-shumski-1903702_vtanbj.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1611063805/pexels-roberto-shumski-1903702_vtanbj' , imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1611063805/pexels-roberto-shumski-1903702_vtanbj' },\r\n    { imgUrlLarge: 'https://res.cloudinary.com/basimgs/image/upload/w_1500/v1610712046/pexels-pixabay-2150_mujmra.jpg', imgUrlmedium: 'https://res.cloudinary.com/basimgs/image/upload/w_400/v1610712046/pexels-pixabay-2150_mujmra.jpg', imgUrlSmall: 'https://res.cloudinary.com/basimgs/image/upload/w_150/v1610712046/pexels-pixabay-2150_mujmra.jpg' },\r\n    ]\r\n  }\r\n\r\n\r\n  useImgForBgc = async (imgUrlLarge, imgUrlmedium) => {\r\n    const { currBoard } = this.props\r\n    currBoard.style.backgroundImage = imgUrlLarge\r\n    currBoard.style.backgroundImagePreview = imgUrlmedium\r\n    await this.props.saveBoard(currBoard)\r\n    this.props.toggleMenu()\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"board-photos flex justify-center\">\r\n        {this.photos().map((photo, idx) => { return <div key={idx} className=\"menu-img-box\"><img onClick={() => this.useImgForBgc(photo.imgUrlLarge, photo.imgUrlmedium)} className=\"board-photos-grid\" src={photo.imgUrlSmall} alt=\"not good\" /></div>})}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currBoard: state.boardModule.currBoard\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n\r\n}\r\n\r\nexport const BoardPhotos = connect(mapStateToProps, mapDispatchToProps)(_BoardPhotos)\r\n","import { Component } from 'react'\r\nimport { BoardColors } from './BoardColors.jsx'\r\nimport { BoardPhotos } from './BoardPhotos.jsx'\r\n\r\nexport class ChangeBackground extends Component {\r\n  state = {\r\n    bgcFrom: null\r\n  }\r\n  chooseBgcFrom = (from) => {\r\n    this.setState({ bgcFrom: from })\r\n  }\r\n  render() {\r\n    const { onChangeBackground, toggleMenu } = this.props\r\n    const { bgcFrom } = this.state\r\n    return (\r\n      <>\r\n        <div className=\"change-bgc-back\"><button onClick={onChangeBackground}>back</button></div>\r\n        <div className=\"change-bgc flex justify-center\">\r\n          {/* <div className=\"change-bgc flex space-between\"> */}\r\n          {!bgcFrom &&\r\n            <div className=\"flex align-center\">\r\n              <div className=\"flex column align-center\"><div onClick={() => this.chooseBgcFrom('Photos')} className=\"photos-btn\" ></div>\r\n                <span>Photos</span>\r\n              </div>\r\n              <div className=\"flex column align-center\">\r\n                <div onClick={() => this.chooseBgcFrom('Colors')} className=\"colors-menu-btn\"></div>\r\n                <span>Colors</span></div>\r\n            </div>}\r\n          {bgcFrom === 'Photos' && <BoardPhotos toggleMenu={toggleMenu} />}\r\n          {bgcFrom === 'Colors' && <BoardColors toggleMenu={toggleMenu} />}\r\n\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n","import { Component } from 'react'\r\nimport { ChangeBackground } from './ChangeBackground.jsx'\r\nimport TimeAgo from 'react-timeago'\r\nimport { connect } from 'react-redux'\r\nimport { utilService } from '../../services/utilService.js'\r\n\r\nclass _BoardMenu extends Component {\r\n  render() {\r\n    const { toggleMenu, mainRef, onChangeBackground, isChanging, board } = this.props\r\n    return (\r\n      <div className=\"board-menu-screen flex justify-center\" onClick={ev => ev.stopPropagation()} ref={mainRef} style={{ opacity: '0', visibility: 'hidden', width: 0 }}>\r\n\r\n        <section className=\"menu-container\">\r\n          <div className=\"board-menu-header flex space-around\">\r\n            <h3 className=\"board-menu-title\">Menu</h3>\r\n            <h4 className=\"board-menu-close\" onClick={toggleMenu}></h4>\r\n          </div>\r\n\r\n          {!isChanging &&\r\n            <>\r\n              <div className=\"bgc-change flex align-center\">\r\n                <button onClick={onChangeBackground}>Change Background</button>\r\n              </div>\r\n              <div className=\"side-activity-title\" >\r\n                <span>\r\n                  <img className=\"desc-img\" src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/left-align_qaakok.png\" alt=\"\" />\r\n                </span><p> Activity</p></div>\r\n\r\n              <section className=\"activities-wrapper\">\r\n                {board.activities && board.activities.map((activity, idx) => (\r\n                  <div className=\"activity-comment-wrapper flex\" key={idx}>\r\n                    <div className=\"member\">{activity.byMember ? utilService.convertName(activity.byMember.fullname) : 'G'}</div>\r\n\r\n                    <div className=\"activity-comment\">\r\n                      {!activity.toGroup && <p>{activity.byMember ? activity.byMember.fullname : 'Guest'}: {activity.txt}\r\n                        {activity.card?.title} {activity.group?.title}</p>}\r\n\r\n                      {activity.toGroup && <p>{activity.byMember ? activity.byMember.fullname : 'Guest'}: {activity.txt}\r\n                       from {activity.group.title} to {activity.toGroup.title}</p>}\r\n\r\n                      <TimeAgo className=\"activity-time\" date={activity.createdAt} />\r\n                    </div>\r\n                  </div>))}\r\n              </section>\r\n            </>\r\n          }\r\n          {isChanging && <ChangeBackground toggleMenu={toggleMenu} onChangeBackground={onChangeBackground} />}\r\n        </section>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardModule.currBoard\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  // saveBoard,\r\n  // loadUsers,\r\n}\r\n\r\n\r\n\r\nexport const BoardMenu = connect(mapStateToProps, mapDispatchToProps)(_BoardMenu);","import React, { Component } from 'react'\r\nimport { utilService } from '../../services/utilService'\r\nimport { saveBoard } from '../../store/actions/boardAction'\r\nimport { loadUsers } from '../../store/actions/userAction'\r\nimport { connect } from 'react-redux'\r\nimport { AddMember } from '../AddMember'\r\nimport { BoardMenu } from './BoardMenu'\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\r\nimport { Link } from 'react-router-dom'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nexport class _BoardHeader extends Component {\r\n\r\n  state = {\r\n    board: {\r\n      title: ''\r\n    },\r\n    isChanging: false,\r\n    isWrapper: false,\r\n    isMoreMembersShown: false\r\n  }\r\n\r\n  \r\n  componentDidMount() {\r\n    this.props.loadUsers()\r\n    this.setState({ board: { title: this.props.board.title } })\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n\r\n    if (this.props.board.title !== prevProps.board.title) {\r\n      this.setState(prevState => ({\r\n        board: {\r\n          ...prevState.board,\r\n          title: this.props.board.title\r\n        }\r\n      }))\r\n    }\r\n\r\n  }\r\n\r\n\r\n  toggleMenu = () => {\r\n    const { current } = this.boardMenuVisibility\r\n    if (current.style.opacity === '0') {\r\n      current.style.opacity = '1'\r\n      current.style.visibility = 'visible'\r\n      current.style.width = '339px'\r\n\r\n    } else if (current.style.opacity === '1') {\r\n      current.style.opacity = '0'\r\n      current.style.visibility = 'hidden'\r\n      current.style.width = '0'\r\n    }\r\n    this.setState({ isChanging: false, isWrapper: !this.state.isWrapper })\r\n  }\r\n  onChangeBackground = () => {\r\n    this.setState({ isChanging: !this.state.isChanging })\r\n  }\r\n\r\n  boardMenuVisibility = React.createRef()\r\n\r\n  handleInput = ({ target }) => {\r\n    const { name } = target\r\n    const value = target.value\r\n    this.setState(prevState => {\r\n      return {\r\n        board: {\r\n          ...prevState.board,\r\n          [name]: value\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  onSaveTitle = async (ev) => {\r\n    ev.preventDefault()\r\n    const { board } = this.props\r\n    const { title } = this.state.board\r\n    board.title = title\r\n    await this.props.saveBoard(board)\r\n  }\r\n\r\n  toggleMembers = () => {\r\n    this.setState({ isMoreMembersShown: !this.state.isMoreMembersShown })\r\n  }\r\n\r\n  onUpdateMembers = async (member) => {\r\n    const { board } = this.props\r\n    const memberIdx = board.members.findIndex(currMember => currMember._id === member._id)\r\n    if (memberIdx > -1) {\r\n      board.members.splice(memberIdx, 1)\r\n    } else {\r\n      board.members.push(member)\r\n    }\r\n    await this.props.saveBoard(board)\r\n  }\r\n\r\n  onSetUserFilter = (filterBy) => {\r\n    console.log('filtermember by', filterBy)\r\n    // this.props.setUserFilter(filterBy)\r\n    // this.props.loadUsers(filterBy)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const { members, users } = this.props\r\n    const { board, isChanging, isWrapper, isMoreMembersShown } = this.state\r\n    const currBoardId = this.props.board._id\r\n    if (!board && !currBoardId) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n    return (\r\n      <>\r\n        {isMoreMembersShown && <div className=\"board-header-member-box\"><AddMember toggleMembers={this.toggleMembers} onUpdateMembers={this.onUpdateMembers}\r\n          onSetUserFilter={this.onSetUserFilter} members={members} users={users} /></div>}\r\n        <header className=\"board-header flex space-between\">\r\n          <div className=\"header-options flex\">\r\n            {/* <h2>{title}</h2> */}\r\n            <form onSubmit={this.onSaveTitle} onBlur={this.onSaveTitle} className=\"board-title-form flex space-between\">\r\n              <input type=\"text\" name=\"title\" value={board.title} onChange={this.handleInput}\r\n                className=\"board-title-input\" placeholder=\"Enter board title...\" autoComplete=\"off\" />\r\n            </form>\r\n            <Link to={`/board/${currBoardId}/dashboard`}>\r\n              <button className=\"board-header-btn flex space-around\">\r\n                <h3>Statistics</h3>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610626728/pie-chart_fnvwct.png\" alt=\"\" />\r\n              </button>\r\n            </Link>\r\n            <div className=\"header-members flex\">\r\n              <ul className=\"member-list flex\">\r\n                <TransitionGroup className=\"members-list flex\">\r\n                  {members.map((member, idx) =>\r\n                    <CSSTransition key={idx} timeout={500} classNames=\"item\">\r\n                      <li key={member.fullname} className=\"header-member\" style={{ backgroundColor: member.color ? member.color : \"#3f72af\" }}>\r\n                        {utilService.convertName(member.fullname)}\r\n                      </li>\r\n                    </CSSTransition>\r\n                  )}\r\n                </TransitionGroup>\r\n              </ul>\r\n              <button className=\"add-member\" onClick={this.toggleMembers}>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625640/add-user_qxgidw.png\" alt=\"\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {/* <BoardFilter /> */}\r\n          <BoardMenu\r\n            toggleMenu={this.toggleMenu}\r\n            mainRef={this.boardMenuVisibility}\r\n            onChangeBackground={this.onChangeBackground}\r\n            isChanging={isChanging}\r\n          />\r\n\r\n\r\n          {isWrapper && <div className=\"board-menu-wrapper\" onClick={(isWrapper) ? this.toggleMenu : () => { return }}>\r\n          </div>}\r\n          <button className=\"menu-btn\" onClick={this.toggleMenu}><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610637597/menu_btis53.png\" alt=\"\" /></button>\r\n        </header>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardModule.currBoard,\r\n    users: state.userModule.users\r\n    // filterBy: state.boardModule.filterBy,\r\n    // loggedInUser: state.userModule.loggedInUser,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  loadUsers,\r\n}\r\n\r\n\r\n\r\nexport const BoardHeader = connect(mapStateToProps, mapDispatchToProps)(_BoardHeader);","import React, { Component } from 'react'\r\nimport { utilService } from '../../services/utilService.js'\r\n\r\nexport class GroupAdd extends Component {\r\n\r\n    state = {\r\n        isAddOpen: false,\r\n        group: {\r\n            title: ''\r\n        }\r\n    }\r\n\r\n    openInput = () => {\r\n        this.setState({\r\n            isAddOpen: true\r\n        })\r\n    }\r\n\r\n    closeInput = () => {\r\n        this.setState({\r\n            isAddOpen: false\r\n        })\r\n    }\r\n\r\n    onSaveGroup = (ev) => {\r\n        ev.preventDefault()\r\n        const group = { title: this.state.group.title, id: utilService.makeId(), cards: [] }\r\n        this.props.onAddGroup(group)\r\n        this.setState(\r\n            {\r\n                group: { title: '' },\r\n                isAddOpen: false\r\n            }, () => this.props.onScroll(null, 280))\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const { name } = target\r\n        const { value } = target\r\n        this.setState(prevState => {\r\n            return {\r\n                group: {\r\n                    ...prevState.group,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { isAddOpen, group } = this.state\r\n        return <section className=\"add-group-container\">\r\n            {isAddOpen &&\r\n                <form onSubmit={this.onSaveGroup} className=\"new-group-form\">\r\n                    <input type=\"text\" name=\"title\" value={group.title} onChange={this.handleInput}\r\n                        className=\"my-input\" placeholder=\"Enter group title...\" autoFocus autoComplete=\"off\" />\r\n                    <div>\r\n                        <button className=\"submit-group-btn\">Add group</button>\r\n                        <button onClick={this.closeInput} className=\"close-input-btn\" ><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610646476/close_voj9v3.png\" alt=\"\" /></button>\r\n                    </div>\r\n                </form>\r\n            }\r\n            {!isAddOpen && <button className=\"add-group-btn\" onClick={this.openInput}>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png\" alt=\"\" />\r\n                <span>Add another group</span></button>}\r\n        </section>\r\n    }\r\n}\r\n","function on(eventName, listener) {\r\n  const callListener = ({ detail }) => {\r\n      listener(detail)\r\n  }\r\n  window.addEventListener(eventName, callListener)\r\n  return () => {\r\n      window.removeEventListener(eventName, callListener)\r\n  }\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\n\r\nexport const eventBusService = { on, emit }","export function setCard(card) {\r\n  return (dispatch) => {\r\n    try {\r\n      dispatch({ type: 'SET_CARD', card })\r\n\r\n    } catch (err) {\r\n      console.log('err cardAction SET CARD', err);\r\n    }\r\n  }\r\n}\r\n\r\nexport function setGroup(group) {\r\n  return (dispatch) => {\r\n    try {\r\n      dispatch({ type: 'SET_GROUP', group })\r\n    } catch (err) {\r\n      console.log('err cardAction SET GROUP', err);\r\n    }\r\n  }\r\n}\r\n\r\nexport function clearState(clear) {\r\n  return (dispatch) => {\r\n    try {\r\n      dispatch({ type: 'CLEAR_STATE', clear })\r\n    } catch (err) {\r\n      console.log('err cardAction CLEAR STATE', err);\r\n    }\r\n  }\r\n}\r\n\r\n// export function addLabel(label) {\r\n//   return (dispatch) => {\r\n//     try {\r\n//       dispatch({ type: 'ADD_LABEL', label })\r\n//     } catch (err) {\r\n//       console.log('err cardAction CLEAR STATE', err);\r\n//     }\r\n//   }\r\n// }\r\n\r\n","import React, { Component } from 'react'\r\n\r\nexport class CardPreviewLabel extends Component {\r\n    state = {\r\n        isLableTitleShown: false\r\n    }\r\n\r\n    toggleLableTitle = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ isLableTitleShown: !this.state.isLableTitleShown })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { card } = this.props\r\n        const { isLableTitleShown } = this.state\r\n        return (\r\n            <div>\r\n                {card.labels && <div className=\"label-container flex\">\r\n                    {card.labels.map(label => {\r\n                        return <div key={label.id} style={{ backgroundColor: label.color }} className={isLableTitleShown ? 'card-label open' : 'card-label'} onClick={this.toggleLableTitle}>\r\n                            {isLableTitleShown && label.title}\r\n                        </div>\r\n                    })}\r\n                </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { utilService } from '../../services/utilService'\r\n\r\nexport function CardPreviewBottom({ card }) {\r\n    \r\n    const progress = utilService.getTodoProgress(card)\r\n    // const iconsMap = [\r\n    //     { dueDate: \"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png\" },\r\n    //     {comments: \"https://res.cloudinary.com/basimgs/image/upload/v1610704026/messenger_ypya0t.png\"},\r\n    //     {checklist: \"https://res.cloudinary.com/basimgs/image/upload/v1610625361/check-box_pzd2ul.png\"}\r\n    // ]\r\n\r\n    // const content = [\r\n    //     { dueDate: utilService.getDueDate(card.dueDate) },\r\n    //     {comments: card.comments?.length},\r\n    //     {checklist: progress?.done/progress?.total},\r\n    //     {members: card.members?.map(member => {\r\n    //         return <div key={member.fullname} className=\"member\">\r\n    //             {utilService.convertName(member.fullname)}\r\n    //         </div>\r\n    //     })}\r\n    // ]\r\n\r\n        \r\n        // {\r\n        //     card[type] && <div className={`${type}-container flex`}>\r\n        //         <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png\" alt=\"\" />\r\n        //         <p className=\"date\">{utilService.getDueDate(card.dueDate)}</p></div>\r\n        // }\r\n\r\n\r\n    return (\r\n        <div className=\"card-extras-container flex space-between\">\r\n            {/* { Object.keys(card).map((prop, idx) => {\r\n                return < CardPreviewFeature key={idx} card={ card } type = { prop } src = { iconsMap.prop } content = { content.prop } />\r\n            })} */}\r\n            {card.dueDate && <div className={card.dueDate < Date.now()? 'dueDate-container red flex':'dueDate-container flex'}>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png\" alt=\"\" />\r\n                <p className=\"dueDate\">{utilService.getDueDate(card.dueDate)}</p></div>}\r\n            {card.comments && <div className=\"comments-container flex\">\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610704026/messenger_ypya0t.png\" alt=\"\" />\r\n                <p className=\"comments\">{card.comments.length}</p></div>}\r\n            {card.checklist && <div className={(progress.done===progress.total)? 'check-list-container complete flex' : 'chec-klist-container flex'}>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/check-box_pzd2ul.png\" alt=\"\" />\r\n                <p className=\"chec-klist\">{progress.done}/{progress.total}</p></div>}\r\n            {card.members && <div className=\"preview-members-container flex\">\r\n                {card.members.map(member => {\r\n                    return <div key={member.fullname} className=\"member\" style={{backgroundColor: member.color? member.color: \"#3f72af\"}}>\r\n                        {utilService.convertName(member.fullname)}\r\n                    </div>\r\n                })}\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\n","import { Component } from 'react'\r\nimport { Draggable } from \"react-beautiful-dnd\"\r\nimport { connect } from 'react-redux'\r\nimport { eventBusService } from '../../services/eventBusService.js'\r\nimport { setCard, setGroup } from '../../store/actions/cardAction.js'\r\nimport { CardPreviewLabel } from './CardPreviewLabel'\r\nimport { CardPreviewBottom } from './CardPreviewBottom'\r\nimport NaturalDragAnimation from 'natural-drag-animation-rbdnd'\r\n\r\nexport class _CardPreview extends Component {\r\n    onShowCard = (card, group) => {\r\n        this.props.setCard(card)\r\n        this.props.setGroup(group)\r\n        eventBusService.emit('show-details', true)\r\n    }\r\n\r\n    showPreviewDetails = (ev, card, group) => {\r\n        const newClientPosY = this.calculateClick(ev)\r\n        const pos = {\r\n            ev,\r\n            newClientPosY\r\n        }\r\n        this.props.setCard(card)\r\n        this.props.setGroup(group)\r\n        ev.stopPropagation()\r\n        eventBusService.emit('show-preview-details', pos, true)\r\n        // eventBusService.emit('user-pos', newClientPosY)\r\n    }\r\n    // showPreviewDetails = (ev, card, group) => {\r\n    //     const newClientPosY = this.calculateClick(ev)\r\n    //     this.props.setCard(card)\r\n    //     this.props.setGroup(group)\r\n    //     ev.stopPropagation()\r\n    //     eventBusService.emit('show-preview-details', ev, true)\r\n    //     eventBusService.emit('user-pos', newClientPosY)\r\n    // }\r\n\r\n    calculateClick = (ev) => {\r\n        console.log('ev.clientX', ev.clientX)\r\n        console.log('ev.clientY', ev.clientY)\r\n        console.log('window.innerWidth', window.innerWidth)\r\n        console.log('window.innerHeight', window.innerHeight)\r\n        const sumY = window.innerHeight - ev.clientY\r\n        // const sumX = 420 - ev.clientX < 0\r\n\r\n        if (ev.clientX - 420 < 0) {\r\n            // const newClientPosX = window.innerWidth \r\n        }\r\n\r\n        if (sumY < 210) {\r\n            const newClientPosY = ev.clientY - (210 - sumY)\r\n            // const newClientPosY = window.innerHeight - (210 - sumY)\r\n            return newClientPosY\r\n            // return 210 - sumY  \r\n        } \r\n\r\n        if (sumY < 210) console.log('sumY', sumY)\r\n        // if (sumY < 210) return sumY\r\n    }\r\n\r\n    render() {\r\n        const { card, index, group } = this.props\r\n        return (\r\n            <div className=\"card-preview\" onClick={() => this.onShowCard(card, group)}>\r\n                <Draggable key={card.id} draggableId={card.id} index={index}>\r\n                    {(provided, snapshot) => (\r\n                        <NaturalDragAnimation\r\n                            style={provided.draggableProps.style}\r\n                            snapshot={snapshot}\r\n                        >\r\n                            {style => (\r\n                                <article className=\"card-preview\"\r\n                                    ref={provided.innerRef}\r\n                                    {...provided.draggableProps}\r\n                                    {...provided.dragHandleProps}\r\n                                    style={getItemStyle(snapshot.isDragging, provided.draggableProps.style, style, snapshot.isDraggingOver)}\r\n                                >\r\n                                    <button className=\"show-preview-details-btn\" onClick={(ev) => this.showPreviewDetails(ev, card, group)}><img className=\"show-preview-details-pen\" src=\"https://res.cloudinary.com/basimgs/image/upload/v1610873061/pen_lgmg47.png\" alt=\"pen\" /></button>\r\n                                    {card.style && (card.style.imgUrl ? <div className=\"card-img-cover\" style={{ backgroundImage: `url(${card.style.imgUrl}` }} ></div>\r\n                                        : <div className=\"card-color-cover\" style={{ backgroundColor: card.style.color }}></div>)}\r\n                                    <div className=\"lower-card\">\r\n                                        <CardPreviewLabel card={card} />\r\n                                        <div className=\"flex space-between\">\r\n                                            <pre>{card.title}</pre>\r\n\r\n                                        </div>\r\n                                        <CardPreviewBottom card={card} />\r\n                                    </div>\r\n                                </article>\r\n                            )}\r\n                        </NaturalDragAnimation>\r\n                    )}\r\n                </Draggable>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst getItemStyle = (isDragging, draggableStyle, style, isDraggingOver) => ({\r\n    userSelect: 'none',\r\n    padding: '0',\r\n\r\n    margin: '0 4px 8px 3px',\r\n    borderRadius: '3px',\r\n    background: isDragging ? '##e4e0e0' : 'white',\r\n    // background: isDraggingOver ? 'black' : 'green',\r\n    boxShadow: `0 1px 0 rgba(9, 30, 66, 0.25)`,\r\n    ...draggableStyle,\r\n    ...style\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currCard: state.cardModule.currCard\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setCard,\r\n    setGroup\r\n}\r\n\r\nexport const CardPreview = connect(mapStateToProps, mapDispatchToProps)(_CardPreview);\r\n","import { Droppable } from 'react-beautiful-dnd'\r\nimport { CardPreview } from './CardPreview.jsx'\r\nimport { Component } from 'react'\r\nimport Loader from 'react-loader-spinner'\r\n\r\n\r\nexport class CardList extends Component {\r\n    state = {\r\n        scrollTop: 0\r\n    }\r\n    // refCard = React.createRef()\r\n    getListStyle = isDraggingOver => ({\r\n        // padding: 5,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n        paddingLeft: 5,\r\n        position: \"relative\",\r\n        // backgroundColor: (isDraggingOver) ? 'lightgray' : 'unset'\r\n    })\r\n\r\n    onScroll = (ev, scrolltobottom = 0) => {\r\n        if (!scrolltobottom) return\r\n        const scrollTop = this.refCard.current.scrollTop\r\n        this.setState({\r\n            scrollTop: scrollTop\r\n        }, () => {\r\n            if (scrolltobottom)\r\n                this.props.ref.current.scrollTop = this.props.ref.current.scrollTop + scrolltobottom\r\n        })\r\n    }\r\n    render() {\r\n        const { cards, id, groupTitle, group } = this.props\r\n        if (!cards) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n\r\n        return (\r\n            // <div className=\"card-list\" ref={this.refCard} onScroll={this.props.onScroll}>\r\n            <div className=\"card-list\" ref={this.props.refs} onScroll={this.props.onScroll}>\r\n                <Droppable droppableId={group.id} type=\"card\">\r\n                    {(provided, snapshot) => (\r\n                        <div ref={provided.innerRef} style={this.getListStyle(snapshot.isDraggingOver)}\r\n                            {...provided.droppableProps}>\r\n                            {cards.map((card, index) =>\r\n\r\n                                <CardPreview key={card.id} card={card} group={group}\r\n                                    index={index} groupId={id} groupTitle={groupTitle} />\r\n                            )}\r\n\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n                {/* {isAddOpen &&\r\n                    <form onSubmit={() => { return }} className=\"new-card-form\">\r\n                        <textarea type=\"text\" name=\"title\" value={card.title} onChange={this.handleInput}\r\n                            className=\"my-input\" placeholder=\"Enter a card title...\" autoFocus required\r\n                            cols=\"35\" rows=\"4\"></textarea>\r\n                        <div className=\"flex\">\r\n                            <button type=\"submit\" onMouseDown={this.onSaveCard} className=\"submit-card-btn\">Add card</button>\r\n                            <button onClick={this.closeInput} className=\"close-input-btn\" >\r\n                                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610646476/close_voj9v3.png\" alt=\"\" />\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                } */}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { loadBoard, saveBoard } from '../../store/actions/boardAction'\r\nimport { setGroup } from '../../store/actions/cardAction'\r\nimport { connect } from 'react-redux'\r\nimport { eventBusService } from '../../services/eventBusService.js'\r\nexport class _GroupTitle extends Component {\r\n\r\n    state = {\r\n        groupIdx: null,\r\n        group: {\r\n            title: ''\r\n        }\r\n    }\r\n    textInput = React.createRef()\r\n\r\n    componentDidMount() {\r\n        const groupId = this.props.group.id\r\n        const { board, group } = this.props\r\n        const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n\r\n        this.setState({ groupIdx, group: { title: group.title } })\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n\r\n        if (this.props.group.title !== prevProps.group.title) {\r\n            this.setState(prevState => ({\r\n                group: {\r\n                    ...prevState.group,\r\n                    title: this.props.group.title\r\n                }\r\n            }))\r\n        }\r\n\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const { name } = target\r\n        const value = target.value\r\n        console.log('target.value', value, name)\r\n        this.setState(prevState => {\r\n            return {\r\n                group: {\r\n                    ...prevState.group,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onSaveTitle = async (ev) => {\r\n        ev.preventDefault()\r\n        const groupId = this.props.group.id\r\n        const board = { ...this.props.board }\r\n        // console.log('board from title', board)\r\n        const { title } = this.state.group\r\n        const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n        board.groups[groupIdx].title = title\r\n        await this.props.updateBoard(board)\r\n        this.setState({ groupIdx: null })\r\n    }\r\n\r\n    showGroupMenu = (ev) => {\r\n        const { group } = this.props\r\n        this.props.setGroup(group)\r\n        // console.log('curr group', group)\r\n        ev.stopPropagation()\r\n        eventBusService.emit('show-group-menu', ev, true)\r\n    }\r\n\r\n    render() {\r\n        const { group } = this.state\r\n        // console.log('GROUP_TITLE:', group.title);\r\n        return <section className=\"group-title\" {...this.props.dragHandle}>\r\n            <form onSubmit={this.onSaveTitle} ref={this.textInput} {...this.props.dragHandle} className=\"title-form flex space-between\">\r\n                {/* <input type=\"text\" ref={this.textInput} name=\"title\" value={group.title} onChange={this.handleInput} */}\r\n                {/* <TextField id=\"standard-basic\" label=\"Standard\" /> */}\r\n                <input type=\"text\" name=\"title\" value={group.title} onChange={this.handleInput}\r\n                    className=\"title-input\" placeholder=\"Enter group title...\" autoComplete=\"off\" onBlur={this.onSaveTitle} />\r\n                <button className=\"more-options-btn\" onClick={(ev) => this.showGroupMenu(ev)}><img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/more_e8mezf.png\" alt=\"\" /></button>\r\n            </form>\r\n        </section>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardModule.currBoard,\r\n        // filterBy: state.boardModule.filterBy,\r\n        // loggedInUser: state.userModule.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    saveBoard,\r\n    setGroup\r\n}\r\n\r\n\r\n\r\nexport const GroupTitle = connect(mapStateToProps, mapDispatchToProps)(_GroupTitle);","import { Component } from 'react'\r\nimport { utilService } from '../../services/utilService.js'\r\n\r\nexport class CardAdd extends Component {\r\n    state = {\r\n        isAddOpen: false,\r\n        card: {\r\n            title: '',\r\n        }\r\n    }\r\n\r\n    openInput = () => {\r\n        this.setState({ isAddOpen: true }, () => {\r\n            this.props.onScroll(null, 1000)\r\n        })\r\n    }\r\n\r\n    closeInput = () => {\r\n        this.setState({ isAddOpen: false, card: { title: '' } }, () => setTimeout(() => {\r\n            this.props.onScroll(null, 1000)\r\n        }, 150))\r\n    }\r\n\r\n    onSaveCard = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.card.title) return\r\n        const card = { title: this.state.card.title, id: utilService.makeId(), members: [], labels: [] }\r\n        this.props.onAddCard(card, this.props.groupId)\r\n        this.setState(\r\n            {\r\n                card: { title: '' },\r\n            }, () => this.closeInput())\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const { name } = target\r\n        const { value } = target\r\n        this.setState(prevState => {\r\n            return {\r\n                card: {\r\n                    ...prevState.card,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { isAddOpen, card } = this.state\r\n        return <section className=\"add-card-container\" onBlur={this.closeInput} >\r\n            {isAddOpen &&\r\n                <form onSubmit={() => { return }} className=\"new-card-form\">\r\n                    <textarea type=\"text\" name=\"title\" value={card.title} onChange={this.handleInput}\r\n                        className=\"my-input\" placeholder=\"Enter a card title...\" autoFocus required\r\n                        cols=\"35\" rows=\"4\"></textarea>\r\n                    <div className=\"flex\">\r\n                        <button type=\"submit\" onMouseDown={this.onSaveCard} className=\"submit-card-btn\">Add card</button>\r\n                        <button onClick={this.closeInput} className=\"close-input-btn\" >\r\n                            <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610646476/close_voj9v3.png\" alt=\"\" />\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            }\r\n            {!isAddOpen && <button className=\"add-card-btn\" onClick={this.openInput}>\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625350/plus_ljzrkm.png\" alt=\"\" />\r\n                <span>Add another card</span></button>}\r\n        </section>\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { CardList } from '../Card/CardList.jsx'\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport { GroupTitle } from './GroupTitle';\r\nimport { CardAdd } from '../Card/CardAdd.jsx';\r\nimport NaturalDragAnimation from 'natural-drag-animation-rbdnd'\r\n\r\nexport class GroupPreview extends Component {\r\n    // function isScroll() {\r\n\r\n    // }\r\n    state = {\r\n        scrollTop: 0\r\n    }\r\n    refCard = React.createRef()\r\n    onScroll = (ev, scrolltobottom = 0) => {\r\n        if (!scrolltobottom) return\r\n        const scrollTop = this.refCard.current.scrollTop\r\n        this.setState({\r\n            scrollTop: scrollTop\r\n        }, () => {\r\n            if (scrolltobottom)\r\n                this.refCard.current.scrollTop = this.refCard.current.scrollTop + scrolltobottom\r\n        })\r\n    }\r\n    render() {\r\n        const { group, idx, onAddCard, updateBoard } = this.props\r\n        // console.log('GROUP_PREVIEW', group)\r\n        return (\r\n            <Draggable draggableId={group.id} index={idx} >\r\n                {(provided, snapshot) => (\r\n                    <NaturalDragAnimation\r\n                        style={provided.draggableProps.style}\r\n                        snapshot={snapshot}\r\n                    >\r\n                        {style => (\r\n                            <div>\r\n                                <article className=\"group-preview\" {...provided.draggableProps}\r\n                                    style={getItemStyle(snapshot.isDragging, provided.draggableProps.style, style)}\r\n                                    ref={provided.innerRef}>\r\n                                    <div  {...provided.dragHandleProps} style={{ width: 272, height: '0.8rem' }}>\r\n                                    </div>\r\n                                    <GroupTitle updateBoard={updateBoard} group={group} dragHandle={provided.dragHandleProps} />\r\n                                    <CardList refs={this.refCard} cards={group.cards}\r\n                                        id={idx} group={group} onScroll={this.onScroll}\r\n                                        grpTitle={group.title} groupId={group.id} onAddCard={onAddCard} />\r\n                                    <CardAdd groupId={group.id} onAddCard={onAddCard} onScroll={this.onScroll} />\r\n                                </article>\r\n                            </div>\r\n                        )}\r\n                    </NaturalDragAnimation>\r\n                )}\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\nconst getItemStyle = (isDragging, draggableStyle, style) => ({\r\n    // userSelect: 'none',\r\n    // padding: 8,\r\n    margin: `0 8px 0 0`,\r\n    ...draggableStyle,\r\n    ...style\r\n});","import { GroupAdd } from './GroupAdd.jsx';\r\nimport { GroupPreview } from './GroupPreview.jsx'\r\n\r\nexport function GroupList({ groups, onAddCard, onAddGroup, onScroll, updateBoard }) {\r\n    return (\r\n        <div className=\"group-list\">\r\n            {groups.map((group, idx) =>\r\n                <GroupPreview updateBoard={updateBoard} key={group.id} group={group} idx={idx} onAddCard={onAddCard} />\r\n            )}\r\n            <GroupAdd onAddGroup={onAddGroup} onScroll={onScroll} />\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { saveBoard } from '../../store/actions/boardAction'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nclass _GroupMenu extends Component {\r\n    state = {\r\n        group: null,\r\n        userClicked: null,\r\n        mounted: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.setState({ card: this.props.card }, () => console.log(this.state.card))\r\n        this.setState({ group: this.props.group, userClicked: this.props?.userClicked, mounted: true })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({\r\n            group: null,\r\n            userClicked: null,\r\n        })\r\n    }\r\n\r\n\r\n    onClose = () => {\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n\r\n    onRemoveGroup = () => {\r\n        const copyBoard = { ...this.props.board }\r\n        const { group } = this.state\r\n        const groupIdx = copyBoard.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n        copyBoard.groups.splice(groupIdx, 1)\r\n        this.props.saveBoard(copyBoard)\r\n        this.onClose()\r\n    }\r\n\r\n    onAddCard = () => {\r\n        console.log('haha');\r\n    }\r\n\r\n    onCopyGroup = () => {\r\n        console.log(' im am doing nothimg...');\r\n    }\r\n\r\n    render() {\r\n        const { userClicked, group, mounted } = this.state\r\n        if (!group) return <div>Loading...</div>\r\n        return (\r\n            <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.showGroupMenu}>\r\n            <div className=\"group-menu flex column\" style={{\r\n                position: 'absolute',\r\n                zIndex: 1000, top: userClicked?.y + 10, left: userClicked?.x - 150\r\n            }}>\r\n                <div className=\"group-actions flex spase-between\">\r\n                    <h3>Group Actions</h3>\r\n                    <button onClick={this.onClose} className=\"group-close-btn\"></button>\r\n                </div>\r\n                <div className=\"group-menu-btns flex column\">\r\n                    <button className=\"group-menu-btn\" onClick={this.onAddCard}>\r\n                    Add Card...</button>\r\n                    <button className=\"group-menu-btn\" onClick={this.onCopyGroup}>\r\n                    Copy Group...</button>\r\n                    <button className=\"group-menu-btn\" onClick={this.onRemoveGroup}>\r\n                    Delete Group...</button>\r\n                    <button className=\"group-menu-btn\">\r\n                    Watch...</button>\r\n                    <hr/>\r\n                    <button className=\"group-menu-btn\">\r\n                    Sort By...</button>\r\n                    <hr/>\r\n                    <button className=\"group-menu-btn\">\r\n                    Move All Cards In This List...</button>\r\n                    <button className=\"group-menu-btn\">\r\n                    Archive All Cards in this List...</button>\r\n\r\n                </div>\r\n            </div>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    board: state.boardModule.currBoard,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    saveBoard\r\n}\r\n\r\nexport const GroupMenu = connect(mapStateToProps, mapDispatchToProps)(_GroupMenu)\r\n","export function CardHeader({ card, onHandleInputChange, group }) {\r\n  return (\r\n    <div className=\"card-header\"> \r\n      <div className=\"card-title-area flex\">\r\n        <img className=\"card-title-img\" src=\"https://res.cloudinary.com/basimgs/image/upload/v1610782307/document-header_xtqrpy.png\" alt=\"\" />\r\n        <textarea\r\n          className=\"title-textarea my-input\"\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={card.title}\r\n          onChange={onHandleInputChange}\r\n          placeholder={card.title}\r\n          spellCheck=\"false\"\r\n        />\r\n      </div>\r\n      <p className=\"card-title-p\">In list {group.title}</p>\r\n    </div>)\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { utilService } from '../../services/utilService'\r\nimport TimeAgo from 'react-timeago'\r\nimport { socketService } from '../../services/socketService'\r\n\r\nclass _CardActivityContainer extends Component {\r\n\r\n  state = {\r\n    comments: null,\r\n    isSaveOpen: false,\r\n    newComment: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    // socketService.setup()\r\n\r\n    // socketService.on('commented', (cmt) => {\r\n    //   console.log('cmt', cmt)\r\n    // }) \r\n\r\n    const { comments } = this.props.card\r\n    this.setState({ comments })\r\n  }\r\n\r\n  onHandleCommentChange = ({ target }) => {\r\n    const { value } = target\r\n    if (value) this.onToggleIsSaveOpen(true)\r\n    else this.onToggleIsSaveOpen(false)\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        newComment: value\r\n      }\r\n    })\r\n  }\r\n\r\n  onToggleIsSaveOpen = (isOpen) => {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        isSaveOpen: isOpen\r\n      }\r\n    })\r\n  }\r\n\r\n  createComment = () => {\r\n    const { newComment } = this.state\r\n    const loggedInUser = this.props.loggedInUser\r\n    let byMember = null;\r\n\r\n    if (loggedInUser) {\r\n      byMember = {\r\n        _id: loggedInUser._id,\r\n        fullname: loggedInUser.fullname,\r\n        imgUrl: loggedInUser.imgUrl\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: utilService.makeId(),\r\n      txt: newComment,\r\n      createdAt: Date.now(),\r\n      byMember\r\n    }\r\n  }\r\n\r\n  onSaveNewComment = () => {\r\n\r\n    const comment = this.createComment()\r\n    let commentsCopy = this.state.comments\r\n    if (commentsCopy) commentsCopy.unshift(comment)\r\n    else commentsCopy = new Array(comment)\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        comments: commentsCopy\r\n      }\r\n    }, () => {\r\n      this.props.onHandleActivitiesChange(this.state.comments)\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          newComment: '',\r\n          isSaveOpen: false\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { newComment, isSaveOpen, comments } = this.state\r\n    const loggedInUser = this.props.loggedInUser\r\n    return (\r\n      <div className=\"activity-container\">\r\n        <div className=\"activity-header flex\">\r\n          <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610792909/menu_1_o2l8cs.png\" alt=\"\" />\r\n          <h3>Activity</h3>\r\n        </div>\r\n        <div className=\"flex column\">\r\n          <div className=\"flex\">\r\n            <div className=\"member\">\r\n              {loggedInUser ? utilService.convertName(loggedInUser.fullname) : 'G'}\r\n            </div>\r\n            <textarea\r\n              className=\"activity-textarea\"\r\n              type=\"text\"\r\n              name=\"txt\"\r\n              value={newComment}\r\n              onChange={this.onHandleCommentChange}\r\n              placeholder=\"Write a comment...\"\r\n            />\r\n          </div>\r\n          {isSaveOpen && <button className=\"save-btn\" onMouseDown={this.onSaveNewComment} >Save</button>}\r\n        </div>\r\n        {comments && comments.map((comment, index) => {\r\n          return <div key={index} className=\"activity-comment-wrapper flex\">\r\n            <div className=\"member\">\r\n              {comment.byMember ? utilService.convertName(comment.byMember.fullname) : 'G'}\r\n            </div>\r\n            <div className=\"activity-comment\">\r\n              <p>{loggedInUser ? loggedInUser.fullname : 'Guest'}: {comment.txt}</p>\r\n              <TimeAgo className=\"activity-time\" date={comment.createdAt} />\r\n            </div>\r\n          </div>\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n// TODO: loggedInUser\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardModule.currBoard,\r\n    loggedInUser: state.userModule.loggedInUser\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n}\r\n\r\nexport const CardActivityContainer = connect(mapStateToProps, mapDispatchToProps)(_CardActivityContainer)","import { utilService } from \"./utilService\"\r\n\r\nexport const cardService = {\r\n  createTodo,\r\n  createChecklist\r\n}\r\n\r\nfunction createTodo(title) {\r\n  return {\r\n    id: utilService.makeId(),\r\n    title,\r\n    isDone: false\r\n  }\r\n}\r\n\r\nfunction createChecklist() {\r\n  return {\r\n    id: utilService.makeId(),\r\n    title: '',\r\n    todos: [createTodo('')]\r\n  }\r\n}\r\n\r\n\r\n","import { Component } from 'react'\r\nimport { cardService } from '../../services/cardService'\r\n// import { on, emit } from '../services/eventBusService.js'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nexport class CardChecklist extends Component {\r\n  state = {\r\n    checklist: null,\r\n    isAddOpen: false,\r\n    newTodoTitle: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { checklist } = this.props.card\r\n    this.setState({ checklist })\r\n  }\r\n\r\n  onHandleTitleChange = ({ target }) => {\r\n    const { value, name } = target\r\n\r\n    this.setState(prevState => ({\r\n      checklist: {\r\n        ...prevState.checklist,\r\n        [name]: value\r\n      }\r\n    }), () => this.props.onHandleChecklistChange(this.state.checklist))\r\n  }\r\n\r\n  onHandleTodosChange = (ev, todo) => {\r\n    const { todos } = this.state.checklist\r\n    const value = ev.target.type === 'checkbox' ? ev.target.checked : ev.target.value\r\n    const { name } = ev.target\r\n    todo[name] = value\r\n\r\n    const updatedTodos = [...todos]\r\n\r\n    this.saveTodos(updatedTodos)\r\n  }\r\n\r\n  onRemoveTodo = (idx) => {\r\n    if (this.state.checklist.todos.length === 1) this.props.addOrCancelChecklist(null)\r\n\r\n    const todosCopy = [...this.state.checklist.todos]\r\n    todosCopy.splice(idx, 1)\r\n    this.saveTodos(todosCopy)\r\n  }\r\n\r\n  saveNewTodo = () => {\r\n    const { todos } = this.state.checklist\r\n    const { newTodoTitle } = this.state\r\n    let todosCopy = [...todos]\r\n\r\n    const todoToSave = cardService.createTodo(newTodoTitle)\r\n    todosCopy.push(todoToSave)\r\n\r\n    this.saveTodos(todosCopy)\r\n  }\r\n\r\n  saveTodos = (updatedTodos) => {\r\n    this.setState(prevState => ({\r\n      checklist: {\r\n        ...prevState.checklist,\r\n        todos: [...updatedTodos]\r\n      },\r\n      newTodoTitle: ''\r\n    }), () => this.props.onHandleChecklistChange(this.state.checklist))\r\n  }\r\n\r\n  onHandleNewTodoChange = ({ target }) => {\r\n    const { value } = target\r\n    this.setState({ newTodoTitle: value })\r\n  }\r\n\r\n  toggleIsAddOpen = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        isAddOpen: !this.state.isAddOpen\r\n      }\r\n    })\r\n  }\r\n\r\n  progressBarPrecentage = () => {\r\n    const { checklist } = this.state\r\n    let acc = 0;\r\n    checklist.todos.forEach((todo) => { if (todo.isDone) acc += 1 })\r\n\r\n    const todosPrecent = 100 / checklist.todos.length\r\n\r\n    if (acc === 0) return 0\r\n    return todosPrecent * acc\r\n  }\r\n\r\n  render() {\r\n    const { checklist, isAddOpen, newTodoTitle } = this.state\r\n    if (!checklist) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n    return (\r\n      <div className=\"checklist flex column\" >\r\n        <div className=\"checklist-header flex\">\r\n          <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/check-box_pzd2ul.png\" alt=\"\" />\r\n          <input\r\n            className=\"my-input\"\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Checklist\"\r\n            value={checklist.title}\r\n            onChange={this.onHandleTitleChange}\r\n          />\r\n        </div>\r\n        <div className=\"progress-bar\"><div style={{ width: `${this.progressBarPrecentage()}%` }}></div></div>\r\n        {checklist.todos && checklist.todos.map((todo, idx) => {\r\n          return <div className=\"checklist-todo flex\" key={idx}>\r\n            <input\r\n              type=\"checkbox\"\r\n              name=\"isDone\"\r\n              checked={todo.isDone}\r\n              onChange={(ev) => this.onHandleTodosChange(ev, todo)}\r\n            />\r\n            <input\r\n              className=\"add-todo-input my-input\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              placeholder=\"Add an item\"\r\n              value={todo.title}\r\n              onChange={(ev) => this.onHandleTodosChange(ev, todo)}\r\n            />\r\n            <button className=\"delete-todo\" onClick={() => this.onRemoveTodo(idx)}></button>\r\n          </div>\r\n        })}\r\n\r\n        {isAddOpen && <div className=\"flex\">\r\n          <input\r\n            type=\"text\"\r\n            autoFocus\r\n            placeholder=\"Add an item\"\r\n            className=\"new-todo-input\"\r\n            value={newTodoTitle}\r\n            onChange={this.onHandleNewTodoChange}\r\n            onBlur={this.toggleIsAddOpen}\r\n          />\r\n          <button className=\"save-btn\" onMouseDown={this.saveNewTodo} >Save</button>\r\n        </div>}\r\n\r\n        {!isAddOpen && <button className=\"add-todo\" onClick={this.toggleIsAddOpen}>Add todo</button>}\r\n      </div >\r\n    )\r\n  }\r\n}\r\n","import { utilService } from \"../../services/utilService\"\r\nimport { CardActivityContainer } from \"./CardActivityContainer\";\r\nimport { CardChecklist } from \"./CardChecklist\"\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\r\nimport moment from \"moment\"\r\n\r\nexport function CardInfo({ card, onHandleInputChange, onHandleChecklistChange, onHandleActivitiesChange, addOrCancelChecklist }) {\r\n  return (\r\n    <div className=\"card-info\">\r\n\r\n      {card.members && <div className=\"members flex column\">\r\n        <h2 className=\"members-header\">Members</h2>\r\n        {/* <div className=\"members-list flex\"> */}\r\n        <TransitionGroup className=\"members-list flex\">\r\n          {card.members.map((member, idx) => \r\n          <CSSTransition key={idx} timeout={500} classNames=\"item\">\r\n             <span key={idx} className=\"member\" style={{backgroundColor: member.color? member.color: \"#3f72af\"}}>{utilService.convertName(member.fullname)}</span>\r\n             </CSSTransition>\r\n        )}\r\n          </TransitionGroup>\r\n        {/* </div> */}\r\n      </div>}\r\n\r\n      {card.labels && card.labels.length > 0 && <div className=\"card-labels-section\">\r\n        <h2 className=\"card-label-h2\">Labels</h2>\r\n        <div className=\"flex labels-container\">\r\n          {card.labels.map((label, idx) => {\r\n            return <button key={idx} className=\"label-btn\" style={{ backgroundColor: label.color }}>{label.title}</button>\r\n          })}\r\n        </div>\r\n      </div>}\r\n\r\n      {card.dueDate && <div className=\"due-date-wrapper\">\r\n        <h2 className=\"due-date-h2\">Due Date</h2>\r\n        <p className=\"due-date\">{moment(card.dueDate).format('LLL')}</p>\r\n      </div>}\r\n\r\n      <div className=\"card-description\">\r\n        <div className=\"flex\">\r\n          <span><img className=\"desc-img\" src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/left-align_qaakok.png\" alt=\"\" /></span>\r\n          <h3>Description</h3>\r\n        </div>\r\n        <textarea\r\n          className=\"desc-textarea my-input\"\r\n          type=\"text\"\r\n          name=\"description\"\r\n          value={card.description || ''}\r\n          onChange={onHandleInputChange}\r\n          placeholder=\"Add more detailed description...\"\r\n        />\r\n      </div>\r\n\r\n      {card.checklist?.todos?.length > 0 &&\r\n        <CardChecklist card={card} onHandleChecklistChange={onHandleChecklistChange} addOrCancelChecklist={addOrCancelChecklist} />}\r\n      <CardActivityContainer card={card} onHandleActivitiesChange={onHandleActivitiesChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\n// {/* <TransitionGroup className=\"cards-preview-list\">\r\n//                                 {cards.map((card, index) =>\r\n//                                     <CSSTransition\r\n//                                         key={card.id}\r\n//                                         timeout={500}\r\n//                                         classNames=\"item\"\r\n//                                     >\r\n//                                         <CardPreview key={card.id} card={card} group={group}\r\n//                                             index={index} groupId={id} groupTitle={groupTitle} />\r\n//                                     </CSSTransition>\r\n//                                 )}\r\n//                             </TransitionGroup> */}","export const cloudinaryService = {\r\n  uploadImg\r\n}\r\nasync function uploadImg(file) {\r\n  const CLOUD_NAME = 'basimgs'\r\n  const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file)\r\n  formData.append('upload_preset', 'misterToy');\r\n  try {\r\n    const res = await fetch(UPLOAD_URL, {\r\n      method: 'POST',\r\n      body: formData\r\n    })\r\n    const data = await res.json()\r\n    return data\r\n\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n","import { Component } from 'react'\r\nimport { cloudinaryService } from '../../services/cloudinaryService.js'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nexport class CardCover extends Component {\r\n\r\n    state = {\r\n        isUploading: false,\r\n        mounted: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ mounted: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n    coverColors = () => {\r\n        return ['#f9ed69', '#a56cc1', '#f38181', '#95e1d3', '#878ecd', '#3fc1c9',\r\n            '#a1dd70', '#ffcc29', '#19456b', '#d32626', '#16c79a', '#fcbad3', '#ffaa64', '#de95ba', '#17b978',]\r\n    }\r\n\r\n    onUploadImg = async ev => {\r\n        this.setState({ isUploading: true })\r\n        const { secure_url } = await cloudinaryService.uploadImg(ev.target.files[0])\r\n        this.setState({ isUploading: false }, () => this.props.onFinishUpload(secure_url))\r\n    }\r\n\r\n    setColor = (color) => {\r\n        console.log('the chosen color is', color);\r\n        this.props.onUpdateCoverColor(color)\r\n\r\n    }\r\n\r\n    render() {\r\n        const { isUploading, mounted } = this.state\r\n        return (\r\n            <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleCoverMenu}>\r\n                <div className=\"card-cover-modal flex column\">\r\n                    <div className=\"uploader\">\r\n                        <label className=\"upload-btn\" htmlFor=\"imageUploader\">{isUploading ? 'Uploading....' : 'Upload Image'}</label>\r\n                        <input onChange={this.onUploadImg} hidden\r\n                            type=\"file\" accept=\"image/*\" id=\"imageUploader\" />\r\n                    </div>\r\n                    <h3>Colors</h3>\r\n                    <div className=\"card-cover-colors\">\r\n                        {this.coverColors().map((color, idx) => {\r\n                            return <div className=\"cover-colors-menu\" key={idx}\r\n                                style={{ backgroundColor: color }} onClick={() => this.setColor(color)}></div>\r\n                        })}\r\n                    </div>\r\n                    <div className=\"card-cover-btns flex\">\r\n                        <button onClick={this.onClose} className=\"card-cover-btn\">Ok</button>\r\n                        <button onClick={this.onClose} className=\"card-cover-btn\"></button>\r\n                    </div>\r\n                </div>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { utilService } from '../../services/utilService'\r\nimport { eventBusService } from '../../services/eventBusService'\r\nimport { CSSTransition } from 'react-transition-group'\r\n// import { cardService } from '../../services/cardService'\r\n// TODO: maybe put in two cmps\r\n\r\nclass _CardLabels extends Component {\r\n\r\n  state = {\r\n    labels: [],\r\n    isCreateLabel: false,\r\n    currLabel: {\r\n      id: '',\r\n      title: '',\r\n      color: '#f2d601'\r\n    },\r\n    colors: ['#f2d601', '#ff9f19', '#eb5a46', '#c377e0', '#0179bf', '#04c2e0',\r\n      '#61bd50', '#50e898', '#ff78cb', '#344563', '#b3bac5'],\r\n    // mounted: false\r\n  }\r\n\r\n  // onClose = () => {\r\n  //   this.setState({ mounted: false })\r\n  // }\r\n\r\n  componentDidMount() {\r\n    // const { labels } = this.props.currCard //fucked me up\r\n    const { labels } = this.props.card\r\n    if (labels) {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          labels: [...labels],\r\n          mounted: true\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  onEditClick = (label) => {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        isCreateLabel: true,\r\n        currLabel: { ...label }\r\n      }\r\n    })\r\n  }\r\n\r\n  onHandleNewLabel = (val) => {\r\n    let name = 'color'\r\n\r\n    if (typeof (val) !== 'string') {\r\n      val = val.target.value\r\n      name = 'title'\r\n    }\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        currLabel: {\r\n          ...this.state.currLabel,\r\n          [name]: val\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  onToggleLabel = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        isCreateLabel: !this.state.isCreateLabel\r\n      }\r\n    })\r\n  }\r\n\r\n  onAddLabel = () => {\r\n    const { currLabel } = this.state\r\n    let labelsCopy = [...this.state.labels]\r\n\r\n    if (!currLabel.id) {\r\n      currLabel.id = utilService.makeId()\r\n      labelsCopy.push(currLabel)\r\n    } else {\r\n      const idx = labelsCopy.findIndex((label) => label.id === currLabel.id)\r\n      labelsCopy.splice(idx, 1, currLabel)\r\n    }\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        labels: [...labelsCopy]\r\n      }\r\n    }, () => {\r\n      this.props.onHandleLabelsChange(this.state.labels)\r\n      eventBusService.emit('label-added', currLabel)\r\n      this.onToggleLabel()\r\n      this.clearNewLabel()\r\n    })\r\n  }\r\n\r\n  clearNewLabel = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        currLabel: {\r\n          id: '',\r\n          title: '',\r\n          color: '#f2d601'\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  onChooseLabel = (label) => {\r\n    // const readyLabel = cardService.createLabel(label)\r\n    const isDuplicated = this.checkForDuplicate(label)\r\n\r\n    if (isDuplicated) {\r\n      this.removeLabel(label)\r\n      return\r\n    }\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        labels: [...prevState.labels, label]\r\n      }\r\n    }, () => this.props.onHandleLabelsChange(this.state.labels))\r\n  }\r\n\r\n  checkForDuplicate = (label) => {\r\n    const { labels } = this.state\r\n    if (!labels) return false\r\n\r\n    const isFound = labels.find((currLabel) => currLabel.id === label.id)\r\n    if (isFound) return true\r\n  }\r\n\r\n  removeLabel = (label, isClose = false) => {\r\n    const labelsCopy = [...this.state.labels]\r\n    const idx = labelsCopy.findIndex((currLabel) => currLabel.id === label.id)\r\n    labelsCopy.splice(idx, 1)\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        labels: labelsCopy\r\n      }\r\n    }, () => {\r\n        this.props.onHandleLabelsChange(this.state.labels)\r\n        if (isClose) this.props.onToggleLabels()\r\n        this.clearNewLabel()\r\n        this.onToggleLabel()\r\n    })\r\n  }\r\n\r\n  checkForMark = (label) => {\r\n    const { labels } = this.state\r\n\r\n    const isFound = labels.find((currLabel) => currLabel.id === label.id)\r\n    return isFound\r\n  }\r\n\r\n  onRemoveLabel = (label) => {\r\n    this.removeLabel(label, true)\r\n    eventBusService.emit('label-remove', label)\r\n  }\r\n\r\n  render() {\r\n    const { board } = this.props\r\n    const { isCreateLabel, colors, currLabel, mounted } = this.state\r\n    return (\r\n      <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleLabelMenu}>\r\n        <div className=\"card-labels flex column\" style={{ height: isCreateLabel ? '320px' : '450px' }}>\r\n\r\n          <header className=\"labels-header flex\">\r\n            {isCreateLabel && <button className=\"go-back\" onClick={this.onToggleLabel}> </button>}\r\n            <p>{!isCreateLabel ? 'Labels' : 'Create Label'}</p>\r\n            <button className=\"close-btn inside-close\" onClick={this.props.toggleLabelMenu}></button>\r\n          </header>\r\n\r\n          {!isCreateLabel && <section className=\"label-choose-container flex column\">\r\n            <ul>\r\n              {board.labels?.map((label) => (\r\n                <li key={label.id} className=\"label flex\">\r\n                  <div className=\"label-title flex space-between\" onClick={() => this.onChooseLabel(label)} style={{ backgroundColor: label.color }}>\r\n                    <p>{label.title} </p>\r\n                    <span className=\"checkmark\">{this.checkForMark(label) ? '' : ''}</span>\r\n                  </div>\r\n                  <button className=\"label-edit-btn\" onClick={() => this.onEditClick(label)}>\r\n                    <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610872377/pen_so2afr.png\" alt=\"\" />\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </section>}\r\n\r\n          {isCreateLabel && <section className=\"create-label-container flex column\">\r\n            <label htmlFor=\"title\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter label name...\"\r\n              name=\"title\"\r\n              id=\"title\"\r\n              value={currLabel.title}\r\n              onChange={this.onHandleNewLabel}\r\n            />\r\n            <p>Select a color</p>\r\n            <ul className=\"flex\">\r\n              {colors.map((color) => (\r\n                <li\r\n                  className=\"label-color-picker flex align-center justify-center\"\r\n                  key={color}\r\n                  name=\"color\"\r\n                  style={{ backgroundColor: color }}\r\n                  onClick={() => this.onHandleNewLabel(color)}\r\n                >{currLabel.color === color ? '' : ''}</li>\r\n              ))}\r\n            </ul>\r\n            <div className=\"flex space-between\">\r\n              <button className=\"save-btn\" onClick={this.onAddLabel}>Create</button>\r\n              {currLabel.id && <button className=\"delete-btn\" onClick={() => this.onRemoveLabel(currLabel)}>Delete</button>}\r\n            </div>\r\n          </section>}\r\n\r\n          {!isCreateLabel &&\r\n            <footer>\r\n              <button className=\"add-label-btn\" onClick={this.onToggleLabel}>+ Create New Label</button>\r\n            </footer>}\r\n\r\n        </div>\r\n      </CSSTransition>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardModule.currBoard,\r\n    currCard: state.cardModule.currCard\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  // saveBoard,\r\n}\r\n\r\nexport const CardLabels = connect(mapStateToProps, mapDispatchToProps)(_CardLabels)","import { Component } from 'react'\r\nimport Calendar from 'react-calendar';\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nexport class DatePicker extends Component {\r\n\r\n    state = {\r\n        mounted: false,\r\n        value: new Date()\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ mounted: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n    onChange = (value) => {\r\n        this.setState({ value }, () => this.props.onSavedueDate((this.state.value + '').substring(4, 32)))\r\n        this.setState({ mounted: false })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { value, mounted } = this.state\r\n        return (\r\n            <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleDate}>\r\n                <div className=\"date-picker\">\r\n                    <button onClick={this.onClose} className=\"close-date-btn\"></button>\r\n                    <Calendar style={{ zIndex: 2000, position: 'absolute' }}\r\n                        onChange={this.onChange}\r\n                        value={value}\r\n                    />\r\n                </div>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n// import Calendar from 'react-calendar';\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport { cardService } from '../../services/cardService';\r\nimport { CardCover } from './CardCover';\r\nimport { CardLabels } from './CardLabels';\r\nimport { AddMember } from '../AddMember';\r\nimport { DatePicker } from './DatePicker';\r\n// import { DatePicker } from '@material-ui/pickers';\r\n\r\nexport class CardSide extends Component {\r\n\r\n  state = {\r\n    // value: new Date(),\r\n    isDateShown: false,\r\n    isLabelsShown: false,\r\n    isLabelsMenuShown: false,\r\n    isCoverMenuShown: false,\r\n    isMoreMembersShown: false\r\n  }\r\n\r\n  onRemoveCard = () => {\r\n    this.props.onRemoveCard()\r\n  }\r\n\r\n  toggleMembers = () => {\r\n    this.setState({ isMoreMembersShown: !this.state.isMoreMembersShown })\r\n  }\r\n\r\n  toggleDate = () => {\r\n    this.setState({ isDateShown: !this.state.isDateShown })\r\n  }\r\n\r\n  toggleCoverMenu = () => {\r\n    this.setState({ isCoverMenuShown: !this.state.isCoverMenuShown })\r\n  }\r\n\r\n  toggleLabelMenu = () => {\r\n    this.setState({ isLabelsMenuShown: !this.state.isLabelsMenuShown })\r\n    window.isLabelsMenuShown = this.state.isLabelsMenuShown\r\n  }\r\n\r\n\r\n\r\n  onAddChecklist = () => {\r\n    const checklist = cardService.createChecklist()\r\n    this.props.addOrCancelChecklist(checklist)\r\n  }\r\n\r\n  onToggleLabels = () => {\r\n    this.setState({ isLabelsShown: !this.state.isLabelsShown })\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const { isDateShown, isCoverMenuShown, isMoreMembersShown, isLabelsMenuShown } = this.state\r\n    const { card, onHandleLabelsChange, saveChanges, users } = this.props\r\n    return (\r\n      <>\r\n        {isLabelsMenuShown && <CardLabels saveChanges={saveChanges} card={card} onToggleLabels={this.onToggleLabels} toggleLabelMenu={this.toggleLabelMenu} onHandleLabelsChange={onHandleLabelsChange} />}\r\n        {isCoverMenuShown && <CardCover onFinishUpload={this.props.onUploadCardCoverImg}\r\n          onUpdateCoverColor={this.props.onUpdateCoverColor} toggleCoverMenu={this.toggleCoverMenu} />}\r\n        {isDateShown && <DatePicker onSavedueDate={this.props.onSavedueDate} toggleDate={this.toggleDate} />}\r\n        {isMoreMembersShown && <AddMember toggleMembers={this.toggleMembers}\r\n          onUpdateMembers={this.props.onUpdateMembers} onSetUserFilter={this.props.onSetUserFilter} members={card.members} users={users} />}\r\n        {/* {isMoreMembersShown && <div className=\"card-details-member-container\"><AddMember toggleMembers={this.toggleMembers}\r\n          onUpdateMembers={this.props.onUpdateMembers} onSetUserFilter={this.props.onSetUserFilter} members={card.members} users={users} /></div>} */}\r\n        {/* <DatePicker /> */}\r\n        <div className=\"card-side flex column\">\r\n          <button className=\"side-btn\" onClick={this.toggleMembers}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/user_g2y481.png\" alt=\"\" />\r\n            </span> Members</button>\r\n\r\n          <button className=\"side-btn\" onClick={this.toggleLabelMenu}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610794160/price-tag_evse4z.png\" alt=\"\" />\r\n            </span> Labels</button>\r\n\r\n          {!card.checklist && <button className=\"side-btn\" onClick={this.onAddChecklist}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610794290/check-box_srgv0c.png\" alt=\"\" />\r\n            </span> Checklist</button>}\r\n\r\n          <button className=\"side-btn\" onClick={this.toggleDate}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png\" alt=\"\" />\r\n            </span> Due date</button>\r\n\r\n          <button className=\"side-btn\" onClick={this.toggleCoverMenu}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610793767/picture_omnffh.png\" alt=\"\" />\r\n            </span> Cover</button>\r\n\r\n          <button className=\"side-btn\" onClick={this.onRemoveCard}>\r\n            <span>\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png\" alt=\"\" />\r\n            </span> Delete</button>\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n","import { utilService } from \"./utilService\"\r\n\r\nexport const activityService = {\r\n  createActivity\r\n}\r\n\r\nfunction createActivity(user, txt, card, group, action, moveTo) {\r\n  let byMember = null\r\n  let toGroup = null\r\n\r\n  if (user) {\r\n    byMember = {\r\n      _id: user._id,\r\n      fullname: user.fullname,\r\n      imgUrl: user.imgUrl\r\n    }\r\n  }\r\n\r\n  if (moveTo) {\r\n    toGroup = {\r\n      id: moveTo.id,\r\n      title: moveTo.title\r\n    }\r\n  }\r\n\r\n  if (card) {\r\n    card =  {\r\n      id: card.id,\r\n      title: `${card.title} ${action}`\r\n    }\r\n  } else card = null\r\n\r\n\r\n  return {\r\n    id: utilService.makeId(),\r\n    txt,\r\n    createdAt: Date.now(),\r\n    byMember,\r\n    card,\r\n    group: {\r\n      id: group.id,\r\n      title: group.title\r\n    },\r\n    toGroup\r\n  }\r\n}","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CardHeader } from './CardHeader'\r\nimport { CardInfo } from './CardInfo'\r\nimport { clearState } from '../../store/actions/cardAction.js'\r\nimport { saveBoard } from '../../store/actions/boardAction.js'\r\nimport { CardSide } from './CardSide'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { socketService } from '../../services/socketService'\r\nimport { activityService } from '../../services/activityService'\r\nimport Loader from 'react-loader-spinner'\r\n// TODO: go back to handle click outside async lielm1995\r\n\r\nclass _CardDetails extends Component {\r\n  state = {\r\n    card: null,\r\n    filterBy: {\r\n      fullname: ''\r\n    },\r\n    mounted: false,\r\n    initialCard: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    socketService.setup()\r\n    const { card } = this.props\r\n    this.setState({ mounted: true, card, initialCard: card })\r\n  }\r\n\r\n  onClose = () => {\r\n    this.saveChanges(true)\r\n    this.checklistValidation()\r\n    this.setState({ mounted: false })\r\n  }\r\n\r\n  saveChanges = (isActivityUpdate = false) => {\r\n    // this.checklistValidation()\r\n    this.sendUpdatedBoard(isActivityUpdate)\r\n  }\r\n\r\n  sendUpdatedBoard = async (isActivityUpdate = false) => {\r\n    const board = { ...this.props.board }\r\n    const group = { ...this.props.group }\r\n    const { card, initialCard } = this.state\r\n    const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n    group.cards[cardIdx] = card\r\n    const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n    board.groups[groupIdx] = group\r\n\r\n    if (isActivityUpdate && JSON.stringify(initialCard) !== JSON.stringify(card)) {\r\n      var activity = activityService.createActivity(this.props.loggedInUser, 'update card ', card, board.groups[groupIdx], ' in')\r\n      board.activities ? board.activities.unshift(activity) : board.activities = new Array(activity)\r\n    }\r\n\r\n    await this.props.saveBoard(board)\r\n    // socketService.emit('card changed', board)\r\n  }\r\n\r\n  onHandleInputChange = ({ target }) => {\r\n    const { value, name } = target\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        [name]: value\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onHandleChecklistChange = (checklist) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        checklist: { ...checklist }\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onHandleActivitiesChange = (comments) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        comments: [...comments]\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onHandleLabelsChange = (labels) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        labels: [...labels]\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  addOrCancelChecklist = (checklist) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        checklist\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onSavedueDate = (date) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        dueDate: Date.parse(date)\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onUploadCardCoverImg = (url) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        style: { imgUrl: url, color: '' }\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onUpdateCoverColor = (color) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        style: { imgUrl: '', color: color }\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n  onRemoveCard = () => {\r\n    const { board, group } = this.props\r\n    const { card } = this.state\r\n    const cardIdx = group.cards.findIndex((currCard) => currCard.id === card.id)\r\n    group.cards.splice(cardIdx, 1)\r\n    const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n    board.groups[groupIdx] = group\r\n    this.props.saveBoard(board)\r\n    this.props.toggleDetails(false)\r\n  }\r\n\r\n  onUpdateMembers = async (member) => {\r\n    console.log('new members', member);\r\n    const { board, group } = this.props\r\n    const { card } = this.state\r\n    const newCard = { ...card }\r\n    const memberIdx = card.members.findIndex(currMember => currMember._id === member._id)\r\n    if (memberIdx > -1) {\r\n      newCard.members.splice(memberIdx, 1)\r\n    } else {\r\n      newCard.members.push(member)\r\n    }\r\n    const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n    group.cards[cardIdx] = newCard\r\n    const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n    board.groups[groupIdx] = group\r\n\r\n    this.setState({ card: newCard }, () => { this.props.saveBoard(board) })\r\n  }\r\n\r\n  checklistValidation = () => {\r\n    const { checklist } = this.state.card\r\n    if (checklist && checklist.todos.length === 1 && !checklist.todos[0].title) {\r\n      this.addOrCancelChecklist(null)\r\n    }\r\n  }\r\n\r\n  onSetUserFilter = (filterBy) => {\r\n    this.setState({ filterBy })\r\n  }\r\n\r\n  get usersForDisplay() {\r\n    const { board } = this.props\r\n    const { filterBy } = this.state;\r\n    const filterRegex = new RegExp(filterBy.fullname, 'i');\r\n    const users = board.members.filter(member => filterRegex.test(member.fullname))\r\n    return users\r\n  }\r\n\r\n  onDeleteCover = () => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        style: null\r\n      }\r\n    }), () => this.saveChanges())\r\n  }\r\n\r\n\r\n  render() {\r\n    const { card, mounted } = this.state\r\n    const { group } = this.props\r\n    const usersForDisplay = this.usersForDisplay\r\n    if (!card) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n\r\n    return (\r\n      <div className=\"modal-cover\" onClick={this.onClose}>\r\n        <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleDetails}>\r\n          <div className=\"card-details flex column align-center\" onClick={ev => ev.stopPropagation()}>\r\n            <button className=\"close-btn\" onClick={this.onClose}></button>\r\n            {card.style?.color &&\r\n              <div className=\"details-img-wrapper\" style={{ backgroundColor: card.style.color, height: '150px' }}>\r\n                <img onClick={this.onDeleteCover} src=\"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png\" className=\"trash\" alt=\"\" />\r\n              </div>\r\n            }\r\n\r\n            {\r\n              card.style?.imgUrl &&\r\n              <div className=\"details-img-wrapper flex justify-center\" style={{ height: '200px' }}>\r\n                <img src={card.style.imgUrl} alt=\"\" />\r\n                <img onClick={this.onDeleteCover} src=\"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png\" className=\"trash\" alt=\"\" />\r\n              </div >}\r\n\r\n            <div className=\"card-details-wrapper flex column\" style={{ paddingTop: (card.style?.imgUrl || card.style?.color) ? '0' : '15px' }}>\r\n              <CardHeader card={card} onHandleInputChange={this.onHandleInputChange} group={group} />\r\n              <div className=\"card-content flex\">\r\n                <CardInfo\r\n                  card={card}\r\n                  onHandleChecklistChange={this.onHandleChecklistChange}\r\n                  onHandleInputChange={this.onHandleInputChange}\r\n                  onHandleActivitiesChange={this.onHandleActivitiesChange}\r\n                  addOrCancelChecklist={this.addOrCancelChecklist}\r\n                />\r\n                <CardSide\r\n                  card={card}\r\n                  onRemoveCard={this.onRemoveCard}\r\n                  onSavedueDate={this.onSavedueDate}\r\n                  addOrCancelChecklist={this.addOrCancelChecklist}\r\n                  onUploadCardCoverImg={this.onUploadCardCoverImg}\r\n                  onHandleLabelsChange={this.onHandleLabelsChange}\r\n                  onUpdateCoverColor={this.onUpdateCoverColor}\r\n                  saveChanges={this.saveChanges}\r\n                  users={usersForDisplay}\r\n                  onUpdateMembers={this.onUpdateMembers}\r\n                  onSetUserFilter={this.onSetUserFilter}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div >\r\n        </CSSTransition >\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardModule.currBoard,\r\n    loggedInUser: state.userModule.loggedInUser\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  clearState\r\n}\r\n\r\nexport const CardDetails = connect(mapStateToProps, mapDispatchToProps)(_CardDetails)\r\n// import { Component } from 'react'\r\n// import { connect } from 'react-redux'\r\n// import ReactDOM from 'react-dom'\r\n// import { CardHeader } from './CardHeader'\r\n// import { CardInfo } from './CardInfo'\r\n// import { clearState } from '../../store/actions/cardAction.js'\r\n// import { saveBoard } from '../../store/actions/boardAction.js'\r\n// import { CardSide } from './CardSide'\r\n// import { CSSTransition } from 'react-transition-group'\r\n// import { socketService } from '../../services/socketService'\r\n// import { activityService } from '../../services/activityService'\r\n// // TODO: find a way to merge all handle inputs\r\n// // TODO: go back to handle click outside async lielm1995\r\n\r\n// class _CardDetails extends Component {\r\n//   state = {\r\n//     card: null,\r\n//     filterBy: {\r\n//       fullname: ''\r\n//     },\r\n//     mounted: false\r\n//   }\r\n\r\n//   componentDidMount() {\r\n//     socketService.setup()\r\n//     const { card } = this.props\r\n//     this.setState({ mounted: true })\r\n//     this.setState({ card })\r\n//     // document.addEventListener('click', this.handleClickOutside, true)\r\n//   }\r\n\r\n//   // componentWillUnmount() {\r\n//   //   socketService.terminate()\r\n//   // }\r\n\r\n\r\n//   onClose = () => {\r\n//     this.saveChanges()\r\n//     this.setState({ mounted: false })\r\n//   }\r\n\r\n//   // componentWillUnmount() {\r\n//   //   document.removeEventListener('click', this.handleClickOutside, true)\r\n//   // }\r\n\r\n//   // handleClickOutside = event => {\r\n//   //   const domNode = ReactDOM.findDOMNode(this)\r\n//   //   if (!domNode || !domNode.contains(event.target)) {\r\n//   //     this.saveChanges()\r\n//   //     // this.props.clearState(null)\r\n//   //   }\r\n//   // }\r\n\r\n//   saveChanges = () => {\r\n//     this.checklistValidation()\r\n//     this.sendUpdatedBoard()\r\n//   }\r\n\r\n//   sendUpdatedBoard = async () => {\r\n//     const { board, group } = this.props\r\n//     const { card } = this.state\r\n//     const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n//     group.cards[cardIdx] = card\r\n//     const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n//     board.groups[groupIdx] = group\r\n//     await this.props.saveBoard(board)\r\n\r\n//     // socketService.emit('card changed', board)\r\n//   }\r\n\r\n//   onHandleInputChange = ({ target }) => {\r\n//     const { value, name } = target\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         [name]: value\r\n//       }\r\n//     }), () => this.saveChanges())\r\n//   }\r\n\r\n//   onHandleChecklistChange = (checklist) => {\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         checklist: { ...checklist }\r\n//       }\r\n//     }))\r\n//     // }), () => this.saveChanges())\r\n//   }\r\n\r\n//   onHandleActivitiesChange = (comments) => {\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         comments: [...comments]\r\n//       }\r\n//     }), () => this.saveChanges())\r\n//   }\r\n\r\n//   onHandleLabelsChange = (labels) => {\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         labels: [...labels]\r\n//       }\r\n//     }), () => this.saveChanges())\r\n//   }\r\n\r\n//   addOrCancelChecklist = (checklist) => {\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         checklist\r\n//       }\r\n//     }))\r\n//   }\r\n\r\n//   onRemoveCard = () => {\r\n//     const { board, group } = this.props\r\n//     const { card } = this.state\r\n//     const cardIdx = group.cards.findIndex((currCard) => currCard.id === card.id)\r\n//     group.cards.splice(cardIdx, 1)\r\n//     const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n//     board.groups[groupIdx] = group\r\n//     this.props.saveBoard(board)\r\n//     this.props.toggleDetails(false)\r\n//   }\r\n\r\n//   onSavedueDate = (date) => {\r\n//     this.setState(prevState => ({\r\n//       card: {\r\n//         ...prevState.card,\r\n//         dueDate: Date.parse(date)\r\n//       }\r\n//     }))\r\n//     const { card } = this.state\r\n//     const newCard = { ...card }\r\n//     newCard.dueDate = Date.parse(date)\r\n//     this.onUpdateCard(newCard)\r\n//   }\r\n\r\n//   onUploadCardCoverImg = (url) => {\r\n//     const { card } = this.state\r\n//     const newCard = { ...card }\r\n//     const style = { imgUrl: url, color: '' }\r\n//     newCard.style = style\r\n//     this.onUpdateCard(newCard)\r\n//   }\r\n\r\n//   onUpdateCard = (updatedCard) => {\r\n//     const { board, group } = this.props\r\n//     const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n//     group.cards[cardIdx] = updatedCard\r\n//     const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n//     board.groups[groupIdx] = group\r\n//     this.setState({ card: updatedCard }, () => { this.props.saveBoard(board) })\r\n//   }\r\n\r\n//   onUpdateCoverColor = (color) => {\r\n//     const { card } = this.state\r\n//     const newCard = { ...card }\r\n//     const style = { imgUrl: '', color: color }\r\n//     newCard.style = style\r\n//     this.onUpdateCard(newCard)\r\n//   }\r\n\r\n//   onUpdateMembers = async (member) => {\r\n//     console.log('new members', member);\r\n//     const { board, group } = this.props\r\n//     const { card } = this.state\r\n//     const newCard = { ...card }\r\n//     const memberIdx = card.members.findIndex(currMember => currMember._id === member._id)\r\n//     if (memberIdx > -1) {\r\n//       newCard.members.splice(memberIdx, 1)\r\n//     } else {\r\n//       newCard.members.push(member)\r\n//     }\r\n//     const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n//     group.cards[cardIdx] = newCard\r\n//     const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n//     board.groups[groupIdx] = group\r\n//     this.setState({ card: newCard }, () => { this.props.saveBoard(board) })\r\n//   }\r\n\r\n//   checklistValidation = () => {\r\n//     const { checklist } = this.state.card\r\n//     if (checklist && checklist.todos.length === 1 && !checklist.todos[0].title) {\r\n//       this.addOrCancelChecklist(null)\r\n//     }\r\n//   }\r\n\r\n//   onSetUserFilter = (filterBy) => {\r\n//     this.setState({ filterBy })\r\n//   }\r\n\r\n//   get usersForDisplay() {\r\n//     const { board } = this.props\r\n//     const { filterBy } = this.state;\r\n//     const filterRegex = new RegExp(filterBy.fullname, 'i');\r\n//     const users = board.members.filter(member => filterRegex.test(member.fullname))\r\n//     return users\r\n//   }\r\n\r\n\r\n\r\n//   render() {\r\n//     const { card, mounted } = this.state\r\n//     const { group } = this.props\r\n//     const usersForDisplay = this.usersForDisplay\r\n//     if (!card) return <div>Loading...</div>\r\n\r\n//     return (\r\n//       <div className=\"modal-cover\" onClick={this.onClose}>\r\n//         <CSSTransition in={mounted} classNames=\"modal\" timeout={300} onExited={this.props.toggleDetails}>\r\n//           <div className=\"card-details flex column align-center\" onClick={ev => ev.stopPropagation()}>\r\n//             {card.style?.color &&\r\n//               <div className=\"details-img-wrapper\" style={{ backgroundColor: card.style.color, height: '150px' }}>\r\n//               </div>}\r\n\r\n//             {card.style?.imgUrl &&\r\n//               <div className=\"details-img-wrapper flex justify-center\" style={{ height: '200px' }}>\r\n//                 <img src={card.style.imgUrl} alt=\"\" />\r\n//               </div>}\r\n\r\n//             <div className=\"card-details-wrapper flex column\">\r\n//               <CardHeader card={card} onHandleInputChange={this.onHandleInputChange} group={group} />\r\n//               <div className=\"card-content flex\">\r\n//                 <CardInfo\r\n//                   card={card}\r\n//                   onHandleChecklistChange={this.onHandleChecklistChange}\r\n//                   onHandleInputChange={this.onHandleInputChange}\r\n//                   onHandleActivitiesChange={this.onHandleActivitiesChange}\r\n//                   addOrCancelChecklist={this.addOrCancelChecklist}\r\n//                 />\r\n//                 <CardSide\r\n//                   card={card}\r\n//                   onRemoveCard={this.onRemoveCard}\r\n//                   onSavedueDate={this.onSavedueDate}\r\n//                   addOrCancelChecklist={this.addOrCancelChecklist}\r\n//                   onUploadCardCoverImg={this.onUploadCardCoverImg}\r\n//                   onHandleLabelsChange={this.onHandleLabelsChange}\r\n//                   onUpdateCoverColor={this.onUpdateCoverColor}\r\n//                   saveChanges={this.saveChanges}\r\n//                   users={usersForDisplay}\r\n//                   onUpdateMembers={this.onUpdateMembers}\r\n//                   onSetUserFilter={this.onSetUserFilter}\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </CSSTransition>\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\n\r\n// const mapStateToProps = state => {\r\n//   return {\r\n//     board: state.boardModule.currBoard,\r\n//   }\r\n// }\r\n\r\n// const mapDispatchToProps = {\r\n//   saveBoard,\r\n//   clearState\r\n// }\r\n\r\n// export const CardDetails = connect(mapStateToProps, mapDispatchToProps)(_CardDetails)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CardLabels } from './CardLabels'\r\nimport Calendar from 'react-calendar';\r\nimport { saveBoard } from '../../store/actions/boardAction'\r\nimport { AddMember } from '../AddMember';\r\nimport Loader from 'react-loader-spinner'\r\nimport { eventBusService } from '../../services/eventBusService'\r\n\r\nclass _CardPreviewDetails extends Component {\r\n  state = {\r\n    card: null,\r\n    userClicked: null,\r\n    isCreateLabel: false,\r\n    isChangeMembers: false,\r\n    isChangeDueDate: false,\r\n    value: new Date()\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.setState({ card: this.props.card }, () => console.log(this.state.card))\r\n    this.setState({ card: this.props.card, userClicked: this.props?.userClicked })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState({\r\n      card: null,\r\n      userClicked: null,\r\n      isCreateLabel: false,\r\n      isChangeMembers: false,\r\n      isChangeDueDate: false,\r\n    })\r\n  }\r\n  modalRef = React.createRef()\r\n  modalLabelRef = React.createRef()\r\n\r\n  closeModal = () => {\r\n    this.modalRef.current.style.visibility = 'hidden'\r\n    this.props.showPreviewCardDetails()\r\n  }\r\n\r\n  toggleLabelMenu = () => {\r\n    this.setState({ isCreateLabel: !this.state.isCreateLabel })\r\n  }\r\n  showMembers = () => {\r\n    this.setState({ isChangeMembers: !this.state.isChangeMembers })\r\n  }\r\n  showDueDate = () => {\r\n    this.setState({ isChangeDueDate: !this.state.isChangeDueDate })\r\n  }\r\n\r\n  onHandleInputChange = ({ target }) => {\r\n    const { value, name } = target\r\n    console.log(target, name, value);\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        [name]: value\r\n      }\r\n    }))\r\n  }\r\n  onHandleLabelsChange = (labels) => {\r\n    this.setState(prevState => ({\r\n      card: {\r\n        ...prevState.card,\r\n        labels: [...labels]\r\n      }\r\n    }), () => this.onUpdateCard(this.state.card))\r\n  }\r\n\r\n  onChange = (value) => {\r\n    this.setState({ value }, () => this.onSavedueDate((this.state.value + '').substring(4, 32)))\r\n    this.showDueDate()\r\n  }\r\n\r\n  onSavedueDate = (date) => {\r\n    const { card } = this.state\r\n    const newCard = { ...card }\r\n    newCard.dueDate = Date.parse(date)\r\n    this.onUpdateCard(newCard)\r\n  }\r\n\r\n  onUpdateMembers = async (member) => {\r\n    const copyCard = { ...this.state.card }\r\n    console.log('copyCard', copyCard);\r\n    const memberIdx = copyCard.members.findIndex(currMember => currMember._id === member._id)\r\n    console.log('copyCard', memberIdx);\r\n    if (memberIdx > -1) {\r\n      copyCard.members.splice(memberIdx, 1)\r\n      this.setState({ card: copyCard })\r\n    } else {\r\n      copyCard.members.push(member)\r\n      this.setState({ card: copyCard })\r\n\r\n    }\r\n    this.onUpdateCard(this.state.card)\r\n  }\r\n\r\n  onUpdateCard = (updatedCard, isSave = null) => {\r\n    const { board, group } = this.props\r\n    const cardIdx = group.cards.findIndex((card) => card.id === this.state.card.id)\r\n    group.cards[cardIdx] = updatedCard\r\n    const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n    board.groups[groupIdx] = group\r\n    this.setState({ card: updatedCard }, () => {\r\n      this.props.saveBoard(board)\r\n      if (isSave) this.closeModal()\r\n    })\r\n  }\r\n\r\n  onRemoveCard = () => {\r\n    const { board, group } = this.props\r\n    const { card } = this.state\r\n    const cardIdx = group.cards.findIndex((currCard) => currCard.id === card.id)\r\n    group.cards.splice(cardIdx, 1)\r\n    const groupIdx = board.groups.findIndex((currGroup) => currGroup.id === group.id)\r\n    board.groups[groupIdx] = group\r\n    this.props.saveBoard(board)\r\n    this.closeModal()\r\n  }\r\n\r\n  // getUserClick = (ev) => {\r\n  //   console.log('ev.clientX', ev.clientX)\r\n  //   console.log('ev.clientY', ev.clientY)\r\n  //   console.log('window.innerWidth', window.innerWidth)\r\n  //   console.log('window.innerHeight', window.innerHeight)\r\n  // }\r\n\r\n  render() {\r\n    const { userClicked, card, isCreateLabel, isChangeMembers, isChangeDueDate, value } = this.state\r\n    // const { users } = this.props\r\n    if (!card) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n    // console.log('x', userClicked.x);\r\n    // console.log('y', userClicked.y);\r\n    return (\r\n      <>\r\n        <div className=\"wrapper-preview-details\" ref={this.modalRef} onClick={this.closeModal} style={{\r\n          position: 'absolute',\r\n          zIndex: 9000, top: 0, left: 0, right: 0, bottom: 0,\r\n          backgroundColor: 'black', opacity: 0.5\r\n        }}></div>\r\n        <div className=\"card-preview-details flex\" style={{\r\n          position: 'absolute',\r\n          zIndex: 10000, top: userClicked?.y || userClicked?.y + 10 , left: userClicked?.x - 217\r\n        }}>\r\n          {/* <div className=\"card-preview-details flex\" style={{\r\n          position: 'absolute',\r\n          zIndex: 10000, top: userClicked?.y + 10, left: userClicked?.x - 217\r\n        }}> */}\r\n          <div className=\"flex column space-between\">\r\n            <textarea className=\"card-preview-details-textarea\" name=\"title\" cols=\"28\" wrap=\"hard\" rows=\"8\" onChange={this.onHandleInputChange} value={card.title} autoFocus ></textarea>\r\n            <button className=\"card-preview-details-save\" onClick={() => this.onUpdateCard(card, 'save')}>Save</button>\r\n          </div>\r\n          <div className=\"card-preview-details-changes flex column\">\r\n            <button className=\"card-preview-details-changes-btn\" onClick={this.toggleLabelMenu}><span className=\"card-preview-details-changes-icon\">\r\n              <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610794160/price-tag_evse4z.png\" alt=\"label\" />\r\n            </span>Edit Labels</button>\r\n            {isCreateLabel &&\r\n              <div className=\"card-preview-details-label-wrap\" style={{ top: -45, right: -130 }}>\r\n                <CardLabels toggleLabelMenu={this.toggleLabelMenu}\r\n                  onHandleLabelsChange={this.onHandleLabelsChange} card={card} /></div>}\r\n            <button className=\"card-preview-details-changes-btn flex space-between\"\r\n              onClick={this.showMembers}><span className=\"card-preview-details-changes-icon\">\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/user_g2y481.png\" alt=\"member\" />\r\n              </span><span style={{ flexGrow: 1 }}>Change Members</span>\r\n            </button>\r\n            {isChangeMembers && <div className=\"card-details-member-container\"\r\n              style={{ position: \"absolute\", top: 0, left: 0 }} >\r\n              <AddMember toggleMembers={this.showMembers}\r\n                onUpdateMembers={this.onUpdateMembers}\r\n                onSetUserFilter={this.props.onSetUserFilter} members={card.members}\r\n                users={this.props.board.members} /></div>}\r\n            <button className=\"card-preview-details-changes-btn\" onClick={this.showDueDate}>\r\n              <span className=\"card-preview-details-changes-icon\">\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610625361/clock_zwp9d9.png\" alt=\"clock\" />\r\n              </span><span style={{ flexGrow: 1 }}> Change Due Date</span></button>\r\n            {isChangeDueDate && <div className=\"date-picker\">\r\n              <button onClick={this.showDueDate} className=\"close-date-btn\"></button>\r\n              <Calendar onChange={this.onChange} value={value} />\r\n            </div>}\r\n            <button className=\"card-preview-details-changes-btn\" onClick={this.onRemoveCard}>\r\n              <span className=\"card-preview-details-changes-icon\">\r\n                <img src=\"https://res.cloudinary.com/basimgs/image/upload/v1610793816/trash_nrq5xi.png\" alt=\"Trash\" />\r\n              </span>\r\n              <span style={{ flexGrow: 1, textAlign: 'left' }}>Delete</span></button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n  board: state.boardModule.currBoard,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard\r\n}\r\n\r\nexport const CardPreviewDetails = connect(mapStateToProps, mapDispatchToProps)(_CardPreviewDetails)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { loadBoard, saveBoard, cleanBoard } from '../store/actions/boardAction'\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\r\nimport { BoardHeader } from '../cmps/BoardHeader/BoardHeader'\r\nimport { GroupList } from '../cmps/Group/GroupList'\r\nimport { GroupMenu } from '../cmps/Group/GroupMenu'\r\nimport { CardDetails } from '../cmps/Card/CardDetails'\r\nimport { boardService } from '../services/boardService'\r\nimport { eventBusService } from '../services/eventBusService.js'\r\nimport { CardPreviewDetails } from '../cmps/Card/CardPreviewDetails'\r\nimport { socketService } from '../services/socketService'\r\nimport { activityService } from '../services/activityService'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nexport class _BoardApp extends Component {\r\n    state = {\r\n        isDetailsShown: false,\r\n        scrollLeft: 0,\r\n        isPreviewDetailsShown: false,\r\n        userClicked: {\r\n            x: null,\r\n            y: null\r\n        },\r\n        isGroupMenuShown: false\r\n    }\r\n    refBoard = React.createRef()\r\n    componentDidMount() {\r\n        socketService.setup()\r\n        this.loadBoard()\r\n        socketService.on('load board', (board) => this.updateBoard(board, true))\r\n\r\n        this.eventBusTerminate = eventBusService.on('show-details', this.toggleDetails)\r\n        this.eventBusLabelTerminate = eventBusService.on('label-added', this.onAddLabel)\r\n        this.eventBusRemoveTerminate = eventBusService.on('label-remove', this.onRemoveLabel)\r\n        this.eventBusShowPreviewDetailsTerminate = eventBusService.on('show-preview-details', this.showPreviewCardDetails)\r\n        this.eventBusShowGroupMenuTerminate = eventBusService.on('show-group-menu', this.showGroupMenu)\r\n    }\r\n\r\n    // componentDidUpdate(prevProps) {\r\n    //     if (this.props.board === prevProps.board) {\r\n    //     // if (this.props.board !== prevProps.board && !this.props.board) {\r\n    //         this.props.loadBoards()\r\n    //         // this.props.history.push(`board/${this.props.board._id}`)\r\n    //     }\r\n    // }\r\n\r\n    componentWillUnmount() {\r\n        this.eventBusTerminate()\r\n        this.eventBusLabelTerminate()\r\n        this.eventBusRemoveTerminate()\r\n        this.eventBusShowPreviewDetailsTerminate()\r\n        socketService.terminate()\r\n        this.props.cleanBoard()\r\n        this.eventBusShowGroupMenuTerminate()\r\n        // this.props.board = null\r\n    }\r\n\r\n    updateBoard = (board, isRenderSocket = false) => {\r\n        console.log('here')\r\n        this.props.saveBoard(board, isRenderSocket)\r\n    }\r\n\r\n    loadBoard = async () => {\r\n        const { boardId } = this.props.match.params\r\n        await this.props.loadBoard(boardId)\r\n        socketService.emit('set label', boardId)\r\n    }\r\n\r\n    onAddGroup = async (group) => {\r\n        const { board } = this.props\r\n        const copyBoard = { ...board }\r\n        copyBoard.groups.push(group)\r\n        await this.props.saveBoard(copyBoard)\r\n\r\n        // socketService.emit('group added', board)\r\n    }\r\n\r\n    onRemoveLabel = async (label) => {\r\n        const { board } = this.props\r\n        const copyBoard = { ...board }\r\n        // const labels = [...copyBoard.labels]\r\n        const idx = copyBoard.labels.findIndex((currLabel) => currLabel.id === label.id)\r\n        copyBoard.labels.splice(idx, 1)\r\n\r\n        // copyBoard.labels = [...labels]\r\n        await this.props.saveBoard(copyBoard)\r\n    }\r\n\r\n    onAddLabel = async (label) => {\r\n        const { board } = this.props\r\n        let updatedLabels;\r\n        let isUpdate;\r\n\r\n        if (board.labels) {\r\n            isUpdate = board.labels.find((currLabel) => currLabel.id === label.id)\r\n            if (isUpdate) {\r\n                updatedLabels = board.labels.map((currLabel) => currLabel.id === label.id ? label : currLabel)\r\n            } else {\r\n                updatedLabels = [...board.labels, label]\r\n            }\r\n        } else {\r\n            updatedLabels = new Array(label)\r\n        }\r\n\r\n        board.labels = [...updatedLabels]\r\n        await this.props.saveBoard(board)\r\n    }\r\n\r\n    onDragCard = async (sourceGroup = null, destinationGroup = null) => {\r\n        const { board } = this.props\r\n        const copyBoard = { ...board }\r\n\r\n        if (sourceGroup && destinationGroup) {\r\n            if (sourceGroup.title !== destinationGroup.title) {\r\n                var activity = activityService.createActivity(this.props.loggedInUser, 'moved card ', null, sourceGroup, ' to', destinationGroup)\r\n                copyBoard.activities ? copyBoard.activities.unshift(activity) : copyBoard.activities = new Array(activity)\r\n            }\r\n        }\r\n\r\n        await this.props.saveBoard(copyBoard)\r\n        // socketService.emit('card dragged', board) \r\n    }\r\n\r\n    onAddCard = async (card, groupId) => {\r\n        const { board } = this.props\r\n        const copyBoard = { ...board }\r\n\r\n        const groupIdx = await boardService.getGroupIdxById(board._id, groupId)\r\n        copyBoard.groups[groupIdx].cards.push(card)\r\n\r\n        const activity = activityService.createActivity(this.props.loggedInUser, 'added card ', card, copyBoard.groups[groupIdx], 'to')\r\n        copyBoard.activities ? copyBoard.activities.unshift(activity) : copyBoard.activities = new Array(activity)\r\n\r\n        await this.props.saveBoard(copyBoard)\r\n\r\n        // socketService.emit('card added', board)\r\n    }\r\n\r\n    onDragEnd = (result) => {\r\n        const { destination, source, draggableId, type } = result\r\n        const { groups } = this.props.board\r\n        if (!destination) return\r\n        if (type === 'group') {\r\n            const dragGroup = groups.find(group => group.id === draggableId)\r\n            groups.splice(source.index, 1)\r\n            groups.splice(destination.index, 0, dragGroup)\r\n            this.onDragCard()\r\n            return\r\n        }\r\n        const sourceGroup = groups.find(group => group.id === source.droppableId)\r\n        const destinationGroup = groups.find(group => group.id === destination.droppableId)\r\n        const draggingCard = sourceGroup.cards.find(card => card.id === draggableId)\r\n        sourceGroup.cards.splice(source.index, 1)\r\n        destinationGroup.cards.splice(destination.index, 0, draggingCard)\r\n        this.onDragCard(sourceGroup, destinationGroup)\r\n    }\r\n\r\n    toggleDetails = () => {\r\n        this.setState({ isDetailsShown: !this.state.isDetailsShown })\r\n    }\r\n    onScroll = (ev, scrolltoleft = 0) => {\r\n\r\n        if (!scrolltoleft) return\r\n        const scrollLeft = this.refBoard.current.scrollLeft\r\n        this.setState({\r\n            scrollLeft: scrollLeft\r\n        }, () => {\r\n            if (scrolltoleft)\r\n                this.refBoard.current.scrollLeft += scrolltoleft\r\n        })\r\n    }\r\n    showPreviewCardDetails = (pos) => {\r\n\r\n        if (pos?.newClientPosY) {\r\n            this.setState({\r\n                userClicked: { x: pos?.newClientPosY, y: pos?.newClientPosY },\r\n                isPreviewDetailsShown: !this.state.isPreviewDetailsShown\r\n            })\r\n        } else {\r\n            this.setState({\r\n                userClicked: { x: pos?.ev?.clientX, y: pos?.ev?.clientY },\r\n                isPreviewDetailsShown: !this.state.isPreviewDetailsShown\r\n            })\r\n        }\r\n\r\n    }\r\n    // showPreviewCardDetails = (ev) => {\r\n\r\n    //     if (pos.newClientPosY) {\r\n    //         this.setState({\r\n    //             userClicked: { x: ev?.clientX, y: ev?.clientY },\r\n    //             isPreviewDetailsShown: !this.state.isPreviewDetailsShown\r\n    //         })\r\n    //     } else {\r\n    //         this.setState({\r\n    //             userClicked: { x: pos.ev?.clientX, y: pos.ev?.clientY },\r\n    //             isPreviewDetailsShown: !this.state.isPreviewDetailsShown\r\n    //         })\r\n    //     }\r\n\r\n    // }\r\n\r\n    showGroupMenu = (ev) => {\r\n        // console.log(ev);\r\n        this.setState({\r\n            userClicked: { x: ev?.clientX, y: ev?.clientY },\r\n            isGroupMenuShown: !this.state.isGroupMenuShown\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { board } = this.props\r\n        console.log('want to check if a new board is add', board);\r\n        if (!board) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n        // console.log('board', board._id)\r\n        let { isDetailsShown, isPreviewDetailsShown, userClicked, isGroupMenuShown } = this.state\r\n        // console.log('this.props.board', this.props.board)\r\n        // socketService.emit('set label', this.props.board._id) // was here\r\n        return (\r\n            < >\r\n                {this.props.currCard && isDetailsShown &&\r\n                    <>\r\n                        {/* <div className=\"modal-cover\" onClick={this.toggleDetails}> </div> */}\r\n                        <CardDetails card={this.props.currCard} group={this.props.currGroup} toggleDetails={this.toggleDetails} />\r\n                    </>}\r\n                \r\n                {isGroupMenuShown && <GroupMenu board={board} showGroupMenu={this.showGroupMenu} userClicked={userClicked} group={this.props.currGroup} />}\r\n                {isPreviewDetailsShown && <CardPreviewDetails board={board} showPreviewCardDetails={this.showPreviewCardDetails} userClicked={userClicked} card={this.props.currCard} group={this.props.currGroup} />}\r\n                <BoardHeader title={board.title} members={board.members} onAddGroup={this.onAddGroup} />\r\n                <section className=\"board-container\" ref={this.refBoard} onScroll={this.onScroll}>\r\n                    <DragDropContext onDragEnd={this.onDragEnd} >\r\n                        <Droppable droppableId=\"app\" type=\"group\" direction=\"horizontal\" >\r\n                            {(provided) => (\r\n                                <div style={{ width: (board.groups.length) * 287 }} ref={provided.innerRef} {...provided.droppableProps}>\r\n                                    <GroupList updateBoard={this.updateBoard} groups={board.groups} onAddCard={this.onAddCard} onAddGroup={this.onAddGroup} onScroll={this.onScroll} />\r\n                                    {provided.placeholder}\r\n                                </div>\r\n                            )}\r\n                        </Droppable>\r\n                    </DragDropContext>\r\n                </section>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardModule.currBoard,\r\n        currCard: state.cardModule.currCard,\r\n        currGroup: state.cardModule.currGroup,\r\n        loggedInUser: state.userModule.loggedInUser\r\n        // filterBy: state.boardModule.filterBy,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    saveBoard,\r\n    cleanBoard\r\n}\r\n\r\nexport const BoardApp = connect(mapStateToProps, mapDispatchToProps)(_BoardApp);\r\n","import { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport { connect } from 'react-redux'\r\nimport { login } from '../store/actions/userAction.js'\r\n\r\nexport class _Login extends Component {\r\n  state = {\r\n    user: {\r\n      username: '',\r\n      password: '',\r\n    },\r\n    err: ''\r\n  }\r\n  handleChange = ({ target }) => {\r\n    const field = target.name\r\n    const value = (target.type === 'number') ? +target.value : target.value\r\n\r\n    this.setState(prevState => ({\r\n      user: {\r\n        ...prevState.user,\r\n        [field]: value\r\n      }\r\n    }))\r\n  }\r\n  onLogin = async (ev) => {\r\n    console.log(ev);\r\n    ev.preventDefault()\r\n    try {\r\n      ev.preventDefault()\r\n      await this.props.login(this.state.user)\r\n      console.log(this.props.loggedInUser);\r\n      if (this.props.loggedInUser) this.props.history.push('/boards')\r\n    } catch (err) {\r\n      ev.preventDefault()\r\n      this.props.history.push('/login')\r\n      console.log('login', err);\r\n      this.setState({ err: 'no user' })\r\n    }\r\n  }\r\n  render() {\r\n    const { user, err } = this.state\r\n    return (\r\n      <Container component=\"main\" maxWidth=\"xs\" >\r\n        <CssBaseline />\r\n        <div style={{\r\n          marginTop: '10px',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}>\r\n          <Avatar style={{\r\n            margin: '10px',\r\n            backgroundColor: 'blue',\r\n          }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h2\" variant=\"h5\">\r\n            Login\r\n        </Typography>\r\n          <div className=\"err\">{err}</div>\r\n          <form style={{\r\n            width: '100%',\r\n            marginTop: '5px'\r\n          }} >\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"Username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoFocus\r\n              value={user.username}\r\n              onChange={this.handleChange}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              value={user.password}\r\n              onChange={this.handleChange}\r\n            />\r\n            {err && <span>err</span>}\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ marginTop: '10px' }}\r\n              onClick={this.onLogin}\r\n            >\r\n              Login\r\n          </Button>\r\n            <Grid container>\r\n              <Grid item xs style={{ marginTop: '10px' }}>\r\n                <Link href=\"#\" variant=\"body2\">\r\n                  Forgot password?\r\n              </Link>\r\n              </Grid>\r\n              <Grid item style={{ marginTop: '10px' }}>\r\n                <Link href=\"/signup\" variant=\"body2\">\r\n                  {\"Don't have an account? Sign Up\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        </div>\r\n        <Box mt={8}>\r\n\r\n        </Box>\r\n      </Container >\r\n    );\r\n  }\r\n}\r\nconst mapGlobalStateToProps = (state) => {\r\n\r\n  return {\r\n    users: state.userModule.users,\r\n    loggedInUser: state.userModule.loggedInUser\r\n  }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  login\r\n}\r\nexport const Login = connect(mapGlobalStateToProps, mapDispatchToProps)(_Login)","import React, { Component } from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { TextField } from '@material-ui/core';\r\nimport { login } from '../store/actions/userAction.js'\r\nimport { connect } from 'react-redux'\r\nclass _Login1 extends Component {\r\n  state = {\r\n    user: {\r\n      username: '',\r\n      password: '',\r\n    },\r\n    err: ''\r\n  }\r\n  handleChange = ({ target }) => {\r\n    const field = target.name\r\n    const value = target.value\r\n\r\n    this.setState(prevState => ({\r\n      user: {\r\n        ...prevState.user,\r\n        [field]: value\r\n      }\r\n    }))\r\n  }\r\n  // validate(values) {\r\n  //   console.log(values);\r\n  //   const errors = {};\r\n  //   if (!values.email) {\r\n  //     errors.email = 'Required';\r\n  //   } else if (\r\n  //     !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\r\n  //   ) {\r\n  //     errors.email = 'Invalid email address';\r\n  //   }\r\n  //   if (values.password.length < 5) {\r\n  //     errors.password = 'Password is too short!'\r\n  //   }\r\n  //   return errors;\r\n  // }\r\n  // onSubmitForm(values, { setSubmitting }) {\r\n  //   setTimeout(() => {\r\n  //     alert(JSON.stringify(values, null, 2));\r\n  //     setSubmitting(false);\r\n  //   }, 400);\r\n  // }\r\n  onLogin = async (ev) => {\r\n    try {\r\n      await this.props.login(this.state.user)\r\n      console.log(this.props.loggedInUser);\r\n      if (this.props.loggedInUser) this.props.history.push('/boards')\r\n    } catch (err) {\r\n      // this.props.history.push('/login1')\r\n      console.log('login', err);\r\n      this.setState({ err: 'no user' })\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Any place in your app!</h1>\r\n        <Formik\r\n          initialValues={{ username: '', password: '' }}\r\n          // validate={this.validate}\r\n          onSubmit={this.onLogin}\r\n        >\r\n          {({ isSubmitting }) => (\r\n            <Form>\r\n              <Field type=\"text\" name=\"username\" required value={this.state.user.username} onChange={this.handleChange} placeholder=\"username\" as={TextField} />\r\n              <ErrorMessage name=\"username\" className=\"err-msg\" />\r\n              <Field type=\"password\" required placeholder=\"password\" value={this.state.user.password} onChange={this.handleChange} as={TextField} name=\"password\" />\r\n              <ErrorMessage name=\"password\" className=\"err-msg\" component=\"span\" />\r\n              <button type=\"submit\" disabled={isSubmitting}>\r\n                Submit\r\n          </button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nconst mapGlobalStateToProps = (state) => {\r\n\r\n  return {\r\n    users: state.userModule.users,\r\n    loggedInUser: state.userModule.loggedInUser\r\n  }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  login\r\n}\r\nexport const Login1 = connect(mapGlobalStateToProps, mapDispatchToProps)(_Login1)","import { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport { connect } from 'react-redux'\r\nimport { signup } from '../store/actions/userAction.js';\r\n\r\n\r\nclass _Signup extends Component {\r\n  state = {\r\n    user: {\r\n      username: '',\r\n      fullname: '',\r\n      password: ''\r\n    },\r\n    err: {\r\n      txt: ''\r\n    }\r\n  }\r\n  handleChange = ({ target }) => {\r\n    const field = target.name\r\n    const value = (target.type === 'number') ? +target.value : target.value\r\n    this.setState(prevState => ({\r\n      user: {\r\n        ...prevState.user,\r\n        [field]: value\r\n      }\r\n    }))\r\n  }\r\n  onSignUpUser = async (ev) => {\r\n    ev.preventDefault()\r\n    try {\r\n      await this.props.signup(this.state.user)\r\n      this.props.history.push('/boards')\r\n    } catch (err) {\r\n      this.setState({ err })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { user, err } = this.state\r\n    return (\r\n      <Container component=\"main\" maxWidth=\"xs\" >\r\n        <CssBaseline />\r\n        <div style={{\r\n          marginTop: '10px',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}>\r\n          <Avatar style={{\r\n            margin: '10px',\r\n            backgroundColor: 'blue',\r\n          }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h2\" variant=\"h5\">\r\n            Sign Up\r\n        </Typography>\r\n          <div className=\"err\">{err && err.txt}</div>\r\n          <form onSubmit={this.onSignUpUser} style={{\r\n            width: '100%',\r\n            marginTop: '5px'\r\n          }} >\r\n            <TextField\r\n              variant=\"filled\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"Username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoFocus\r\n              value={user.username}\r\n              onChange={this.handleChange}\r\n            />\r\n            <TextField\r\n              variant=\"filled\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"fullname\"\r\n              label=\"Full Name\"\r\n              name=\"fullname\"\r\n              value={user.fullname}\r\n              onChange={this.handleChange}\r\n            />\r\n            <TextField\r\n              variant=\"filled\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={user.password}\r\n              onChange={this.handleChange}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ marginTop: '10px' }}\r\n            >\r\n              Sign Up\r\n          </Button>\r\n          </form>\r\n        </div>\r\n        <Box mt={8}>\r\n\r\n        </Box>\r\n      </Container >\r\n    );\r\n  }\r\n\r\n}\r\nconst mapGlobalStateToProps = (state) => {\r\n\r\n  return {\r\n    users: state.userModule.users\r\n  }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  signup\r\n}\r\nexport const Signup = connect(mapGlobalStateToProps, mapDispatchToProps)(_Signup)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n// eslint-disable-next-line\r\nimport { Polar, Doughnut, Bar } from 'react-chartjs-2'\r\nimport { loadBoard } from '../store/actions/boardAction.js'\r\nimport { loadUsers } from '../store/actions/userAction.js'\r\nimport { utilService } from '../services/utilService.js'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nexport class _DashBoard extends Component {\r\n  state = {\r\n    board: null\r\n  }\r\n  async componentDidMount() {\r\n    const board = this.props.board\r\n    if (!board) {\r\n      let boardId = this.props.match.params.boardId\r\n      await this.loadBoard(boardId)\r\n      console.log(boardId);\r\n      this.setState({ board: this.props.board }, () => console.log(this.state.board))\r\n    }\r\n    this.setState({ board: this.props.board })\r\n\r\n  }\r\n\r\n  loadBoard = async (boardId) => {\r\n    await this.props.loadBoard(boardId)\r\n  }\r\n\r\n  showTaskPerGroup = () => {\r\n    const mapGroup = this.state.board.groups.reduce((acc, group) => {\r\n      acc[group.title] = group.cards.length\r\n      return acc\r\n    }, {})\r\n    console.log(mapGroup);\r\n    console.log(Object.keys(mapGroup).map(title => title));\r\n    console.log(Object.values(mapGroup).map(title => title));\r\n    return {\r\n\r\n      labels:\r\n        Object.keys(mapGroup).map(title => title),\r\n      datasets: [{\r\n        data: Object.values(mapGroup).map(title => title),\r\n        backgroundColor: [\r\n          ...Object.keys(mapGroup).map(() => utilService.getRandomColor())\r\n        ],\r\n        hoverBackgroundColor: [\r\n          ...Object.keys(mapGroup).map(() => '#FFFFFF')\r\n        ]\r\n      }]\r\n    };\r\n\r\n  }\r\n\r\n  showTaskPerLabel = () => {\r\n    const mapLabels = this.state.board.groups.reduce((acc, group) => {\r\n      group.cards.forEach(card => {\r\n        card.labels.forEach(label => {\r\n          if (!acc[label.title]) acc[label.title] = 1\r\n          else acc[label.title] += 1\r\n        })\r\n\r\n      })\r\n      return acc\r\n    }, {})\r\n    return {\r\n      labels:\r\n        [...Object.keys(mapLabels).map(title => title)],\r\n      datasets: [{\r\n        data: [...Object.values(mapLabels).map(title => title)],\r\n        backgroundColor: [\r\n          ...Object.keys(mapLabels).map(() => utilService.getRandomColor())\r\n\r\n        ],\r\n        hoverBackgroundColor: [\r\n          ...Object.keys(mapLabels).map(() => '#FFFFFF')\r\n        ]\r\n      }]\r\n    };\r\n  }\r\n\r\n  showTotalCards = () => {\r\n    let cardNum = 0\r\n    let cardUnassignedNum = 0\r\n    this.state.board.groups.forEach(group => {\r\n      group.cards.forEach(card => {\r\n        if (card.members?.length > 0) {\r\n          cardUnassignedNum++\r\n        }\r\n        cardNum++\r\n      })\r\n    })\r\n    cardUnassignedNum = cardNum - cardUnassignedNum\r\n    return { cardNum, cardUnassignedNum }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.board) return <div className=\"loader-wrapper\"><Loader className=\"loader\" type=\"TailSpin\" color=\"gray\" height={400} width={400} timeout={3000} /></div>\r\n    return (\r\n      <div className=\"statistics-page\">\r\n        <h1>Hello Statisctis</h1>\r\n        <header className=\"dashboard-header flex\">\r\n          <div className=\"dashboard-preview flex column\"><span>{this.showTotalCards().cardNum}</span> <span> TOTAL CARDS</span></div>\r\n          <div className=\"dashboard-preview flex column\"><span>{this.showTotalCards().cardUnassignedNum}</span> <span> UNASSIGNED CARDS</span></div>\r\n          <div className=\"dashboard-preview flex column\"><span>0</span> <span> ADDED TODAY</span></div>\r\n        </header>\r\n        <div className=\"dashboard-content flex\" style={{ margin: '0 auto', height: '600px', width: '600px', flexWrap: 'wrap' }}>\r\n          {/* <Polar className=\"test\" data={this.showStatistics()} /> */}\r\n          <Bar options={{\r\n            scales: {\r\n              yAxes: [{\r\n                stacked: true,\r\n                gridLines: {\r\n                  display: true,\r\n                  color: \"rgba(255,255,255,0.8)\"\r\n                }\r\n              }],\r\n              xAxes: [{\r\n                gridLines: {\r\n                  display: false\r\n                }\r\n              }]\r\n            },\r\n            title: {\r\n              display: true,\r\n              text: 'Task Per Group',\r\n              fontSize: 25\r\n            },\r\n            legend: {\r\n              display: true,\r\n              position: 'right'\r\n            },\r\n            labels: {\r\n              fontColor: 'rgb(0, 0, 0)'\r\n            }\r\n          }} className=\"test\" data={this.showTaskPerGroup()} />\r\n          <Doughnut options={{\r\n            scales: {\r\n              yAxes: [{\r\n                stacked: true,\r\n                gridLines: {\r\n                  display: true,\r\n                  color: \"rgba(255,255,255,0.8)\"\r\n                }\r\n              }],\r\n              xAxes: [{\r\n                gridLines: {\r\n                  display: false\r\n                }\r\n              }]\r\n            },\r\n            title: {\r\n              display: true,\r\n              text: 'Task Per Label',\r\n              fontSize: 25\r\n            },\r\n            legend: {\r\n              display: true,\r\n              position: 'right'\r\n            }\r\n          }} className=\"test\" data={this.showTaskPerLabel()} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  board: state.boardModule.currBoard,\r\n  users: state.userModule.users\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  loadUsers,\r\n  loadBoard\r\n}\r\n\r\nexport const DashBoard = connect(mapStateToProps, mapDispatchToProps)(_DashBoard)\r\n","import { connect } from 'react-redux'\r\nimport { AppHeader } from './cmps/AppHeader'\r\nimport { Home } from './pages/Home'\r\nimport { Boards } from './pages/Boards'\r\nimport { BoardApp } from './pages/BoardApp'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport { saveBoard } from './store/actions/boardAction'\r\nimport { Login } from './pages/Login'\r\nimport { Login1 } from './pages/Login1'\r\nimport { Signup } from './pages/Signup'\r\nimport { DashBoard } from './pages/DashBoard'\r\n\r\nexport function _App({ currBoard }) {\r\n  return (\r\n    <div className=\"App\" style={{ backgroundImage: `url(${(currBoard) ? currBoard.style.backgroundImage : 'white'})` }}>\r\n      <AppHeader />\r\n      <Switch>\r\n\r\n        <Route component={Login1} path=\"/login1\" />\r\n        <Route component={Login} path=\"/login\" />\r\n        <Route component={Signup} path=\"/signup\" />\r\n        <Route component={DashBoard} path=\"/board/:boardId/dashboard\" />\r\n        <Route component={BoardApp} path=\"/board/:boardId\" />\r\n        <Route component={Boards} path=\"/boards\" />\r\n        <Route component={Home} path=\"/\" />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currBoard: state.boardModule.currBoard\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n\r\n}\r\n\r\nexport const App = connect(mapStateToProps, mapDispatchToProps)(_App)\r\n\r\n\r\n","const initialState = {\r\n  currBoard: null,\r\n  boards: [],\r\n}\r\n\r\nexport function boardReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SET_BOARDS':\r\n      return { ...state, boards: action.boards }\r\n    case 'SET_BOARD':\r\n      return { ...state, currBoard: { ...action.board } }\r\n    case 'UPDATE_BOARD':\r\n      return { ...state, currBoard: action.board }\r\n    case 'CLEAN_BOARD':\r\n      return { ...state, currBoard: null }\r\n    case 'ADD_BOARD':\r\n      return { ...state, boards: [...state.boards, action.board], currBoard: { ...action.board } }\r\n    case 'SAVE_BOARD':\r\n      return {\r\n        ...state, boards: state.boards.map(board => {\r\n          if (board._id === action.board._id) return action.board\r\n          else return board\r\n        })\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const initialState = {\r\n  currCard: null,\r\n  currGroup: null\r\n}\r\n\r\nexport function cardReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SET_CARD':\r\n      return { ...state, currCard: { ...action.card } }\r\n    case 'SET_GROUP':\r\n      return { ...state, currGroup: { ...action.group } }\r\n    case 'CLEAR_STATE':\r\n      return { ...state, currGroup: action.clear, currCard: action.clear }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// case 'ADD_LABEL':\r\n//   return { ...state, currCard: { ...state.currCard, labels: [action.label, ...state.currCard.labels] } }","\r\nconst initialState = {\r\n  // loggedInUser: null,\r\n  loggedInUser: JSON.parse(sessionStorage.getItem('loggedinUser')) || null,\r\n  users: [],\r\n  filterBy: { fullname: '' }\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users }\r\n    case 'SET_USER':\r\n      return { ...state, loggedInUser: action.user }\r\n    case 'LOGIN':\r\n      return { ...state, loggedInUser: { ...action.user } }\r\n    case 'LOGOUT':\r\n      return { ...state, loggedInUser: null }\r\n    case 'SIGNUP':\r\n      return { ...state, users: [...state.users, action.user], loggedInUser: action.user }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import thunk from 'redux-thunk';\r\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\n\r\n\r\nimport { boardReducer } from './reducers/boardReducer.js';\r\nimport { cardReducer } from './reducers/cardReducer.js';\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    boardModule: boardReducer,\r\n    cardModule: cardReducer,\r\n    userModule: userReducer\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\nwindow.theStore = store;\r\nstore.subscribe(() => {\r\n    console.log('Global State is:', store.getState())\r\n})","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App.jsx';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from '../src/store/store';\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './assets/styles/main.scss';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  </Provider>\r\n  ,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}